var Jw=Object.defineProperty;var tR=(e,t,n)=>t in e?Jw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var As=(e,t,n)=>(tR(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function v1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var E1={exports:{}},Xc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eR=Symbol.for("react.transitional.element"),nR=Symbol.for("react.fragment");function T1(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:eR,type:e,key:i,ref:t!==void 0?t:null,props:n}}Xc.Fragment=nR;Xc.jsx=T1;Xc.jsxs=T1;E1.exports=Xc;var g=E1.exports,b1={exports:{}},J={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp=Symbol.for("react.transitional.element"),iR=Symbol.for("react.portal"),sR=Symbol.for("react.fragment"),rR=Symbol.for("react.strict_mode"),aR=Symbol.for("react.profiler"),oR=Symbol.for("react.consumer"),lR=Symbol.for("react.context"),uR=Symbol.for("react.forward_ref"),cR=Symbol.for("react.suspense"),hR=Symbol.for("react.memo"),A1=Symbol.for("react.lazy"),H_=Symbol.iterator;function dR(e){return e===null||typeof e!="object"?null:(e=H_&&e[H_]||e["@@iterator"],typeof e=="function"?e:null)}var S1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w1=Object.assign,R1={};function pa(e,t,n){this.props=e,this.context=t,this.refs=R1,this.updater=n||S1}pa.prototype.isReactComponent={};pa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};pa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function I1(){}I1.prototype=pa.prototype;function Lp(e,t,n){this.props=e,this.context=t,this.refs=R1,this.updater=n||S1}var Up=Lp.prototype=new I1;Up.constructor=Lp;w1(Up,pa.prototype);Up.isPureReactComponent=!0;var q_=Array.isArray,Ct={H:null,A:null,T:null,S:null,V:null},C1=Object.prototype.hasOwnProperty;function jp(e,t,n,i,s,r){return n=r.ref,{$$typeof:Vp,type:e,key:t,ref:n!==void 0?n:null,props:r}}function fR(e,t){return jp(e.type,t,void 0,void 0,void 0,e.props)}function zp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vp}function pR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var G_=/\/+/g;function od(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pR(""+e.key):t.toString(36)}function $_(){}function mR(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then($_,$_):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function vr(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Vp:case iR:a=!0;break;case A1:return a=e._init,vr(a(e._payload),t,n,i,s)}}if(a)return s=s(e),a=i===""?"."+od(e,0):i,q_(s)?(n="",a!=null&&(n=a.replace(G_,"$&/")+"/"),vr(s,t,n,"",function(c){return c})):s!=null&&(zp(s)&&(s=fR(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(G_,"$&/")+"/")+a)),t.push(s)),1;a=0;var o=i===""?".":i+":";if(q_(e))for(var u=0;u<e.length;u++)i=e[u],r=o+od(i,u),a+=vr(i,t,n,r,s);else if(u=dR(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,r=o+od(i,u++),a+=vr(i,t,n,r,s);else if(r==="object"){if(typeof e.then=="function")return vr(mR(e),t,n,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function tu(e,t,n){if(e==null)return e;var i=[],s=0;return vr(e,i,"","",function(r){return t.call(n,r,s++)}),i}function gR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var K_=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function _R(){}J.Children={map:tu,forEach:function(e,t,n){tu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return tu(e,function(){t++}),t},toArray:function(e){return tu(e,function(t){return t})||[]},only:function(e){if(!zp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};J.Component=pa;J.Fragment=sR;J.Profiler=aR;J.PureComponent=Lp;J.StrictMode=rR;J.Suspense=cR;J.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ct;J.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Ct.H.useMemoCache(e)}};J.cache=function(e){return function(){return e.apply(null,arguments)}};J.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=w1({},e.props),s=e.key,r=void 0;if(t!=null)for(a in t.ref!==void 0&&(r=void 0),t.key!==void 0&&(s=""+t.key),t)!C1.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var o=Array(a),u=0;u<a;u++)o[u]=arguments[u+2];i.children=o}return jp(e.type,s,void 0,void 0,r,i)};J.createContext=function(e){return e={$$typeof:lR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:oR,_context:e},e};J.createElement=function(e,t,n){var i,s={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)C1.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var o=Array(a),u=0;u<a;u++)o[u]=arguments[u+2];s.children=o}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return jp(e,r,void 0,void 0,null,s)};J.createRef=function(){return{current:null}};J.forwardRef=function(e){return{$$typeof:uR,render:e}};J.isValidElement=zp;J.lazy=function(e){return{$$typeof:A1,_payload:{_status:-1,_result:e},_init:gR}};J.memo=function(e,t){return{$$typeof:hR,type:e,compare:t===void 0?null:t}};J.startTransition=function(e){var t=Ct.T,n={};Ct.T=n;try{var i=e(),s=Ct.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(_R,K_)}catch(r){K_(r)}finally{Ct.T=t}};J.unstable_useCacheRefresh=function(){return Ct.H.useCacheRefresh()};J.use=function(e){return Ct.H.use(e)};J.useActionState=function(e,t,n){return Ct.H.useActionState(e,t,n)};J.useCallback=function(e,t){return Ct.H.useCallback(e,t)};J.useContext=function(e){return Ct.H.useContext(e)};J.useDebugValue=function(){};J.useDeferredValue=function(e,t){return Ct.H.useDeferredValue(e,t)};J.useEffect=function(e,t,n){var i=Ct.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};J.useId=function(){return Ct.H.useId()};J.useImperativeHandle=function(e,t,n){return Ct.H.useImperativeHandle(e,t,n)};J.useInsertionEffect=function(e,t){return Ct.H.useInsertionEffect(e,t)};J.useLayoutEffect=function(e,t){return Ct.H.useLayoutEffect(e,t)};J.useMemo=function(e,t){return Ct.H.useMemo(e,t)};J.useOptimistic=function(e,t){return Ct.H.useOptimistic(e,t)};J.useReducer=function(e,t,n){return Ct.H.useReducer(e,t,n)};J.useRef=function(e){return Ct.H.useRef(e)};J.useState=function(e){return Ct.H.useState(e)};J.useSyncExternalStore=function(e,t,n){return Ct.H.useSyncExternalStore(e,t,n)};J.useTransition=function(){return Ct.H.useTransition()};J.version="19.1.0";b1.exports=J;var q=b1.exports;const yR=v1(q);var x1={exports:{}},Wc={},O1={exports:{}},N1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,Z){var X=H.length;H.push(Z);t:for(;0<X;){var Tt=X-1>>>1,jt=H[Tt];if(0<s(jt,Z))H[Tt]=Z,H[X]=jt,X=Tt;else break t}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var Z=H[0],X=H.pop();if(X!==Z){H[0]=X;t:for(var Tt=0,jt=H.length,hr=jt>>>1;Tt<hr;){var ze=2*(Tt+1)-1,Ht=H[ze],qn=ze+1,An=H[qn];if(0>s(Ht,X))qn<jt&&0>s(An,Ht)?(H[Tt]=An,H[qn]=X,Tt=qn):(H[Tt]=Ht,H[ze]=X,Tt=ze);else if(qn<jt&&0>s(An,X))H[Tt]=An,H[qn]=X,Tt=qn;else break t}}return Z}function s(H,Z){var X=H.sortIndex-Z.sortIndex;return X!==0?X:H.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var u=[],c=[],d=1,m=null,p=3,v=!1,R=!1,O=!1,D=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function x(H){for(var Z=n(c);Z!==null;){if(Z.callback===null)i(c);else if(Z.startTime<=H)i(c),Z.sortIndex=Z.expirationTime,t(u,Z);else break;Z=n(c)}}function M(H){if(O=!1,x(H),!R)if(n(u)!==null)R=!0,V||(V=!0,N());else{var Z=n(c);Z!==null&&fn(M,Z.startTime-H)}}var V=!1,b=-1,y=5,S=-1;function w(){return D?!0:!(e.unstable_now()-S<y)}function I(){if(D=!1,V){var H=e.unstable_now();S=H;var Z=!0;try{t:{R=!1,O&&(O=!1,_(b),b=-1),v=!0;var X=p;try{e:{for(x(H),m=n(u);m!==null&&!(m.expirationTime>H&&w());){var Tt=m.callback;if(typeof Tt=="function"){m.callback=null,p=m.priorityLevel;var jt=Tt(m.expirationTime<=H);if(H=e.unstable_now(),typeof jt=="function"){m.callback=jt,x(H),Z=!0;break e}m===n(u)&&i(u),x(H)}else i(u);m=n(u)}if(m!==null)Z=!0;else{var hr=n(c);hr!==null&&fn(M,hr.startTime-H),Z=!1}}break t}finally{m=null,p=X,v=!1}Z=void 0}}finally{Z?N():V=!1}}}var N;if(typeof A=="function")N=function(){A(I)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,je=C.port2;C.port1.onmessage=I,N=function(){je.postMessage(null)}}else N=function(){T(I,0)};function fn(H,Z){b=T(function(){H(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(H){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var X=p;p=Z;try{return H()}finally{p=X}},e.unstable_requestPaint=function(){D=!0},e.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=p;p=H;try{return Z()}finally{p=X}},e.unstable_scheduleCallback=function(H,Z,X){var Tt=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Tt+X:Tt):X=Tt,H){case 1:var jt=-1;break;case 2:jt=250;break;case 5:jt=1073741823;break;case 4:jt=1e4;break;default:jt=5e3}return jt=X+jt,H={id:d++,callback:Z,priorityLevel:H,startTime:X,expirationTime:jt,sortIndex:-1},X>Tt?(H.sortIndex=X,t(c,H),n(u)===null&&H===n(c)&&(O?(_(b),b=-1):O=!0,fn(M,X-Tt))):(H.sortIndex=jt,t(u,H),R||v||(R=!0,V||(V=!0,N()))),H},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(H){var Z=p;return function(){var X=p;p=Z;try{return H.apply(this,arguments)}finally{p=X}}}})(N1);O1.exports=N1;var vR=O1.exports,D1={exports:{}},Ce={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ER=q;function k1(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function bi(){}var Ie={d:{f:bi,r:function(){throw Error(k1(522))},D:bi,C:bi,L:bi,m:bi,X:bi,S:bi,M:bi},p:0,findDOMNode:null},TR=Symbol.for("react.portal");function bR(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:TR,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var uo=ER.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Zc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ce.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ie;Ce.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(k1(299));return bR(e,t,null,n)};Ce.flushSync=function(e){var t=uo.T,n=Ie.p;try{if(uo.T=null,Ie.p=2,e)return e()}finally{uo.T=t,Ie.p=n,Ie.d.f()}};Ce.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ie.d.C(e,t))};Ce.prefetchDNS=function(e){typeof e=="string"&&Ie.d.D(e)};Ce.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Zc(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Ie.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&Ie.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ce.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Zc(t.as,t.crossOrigin);Ie.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ie.d.M(e)};Ce.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Zc(n,t.crossOrigin);Ie.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ce.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Zc(t.as,t.crossOrigin);Ie.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ie.d.m(e)};Ce.requestFormReset=function(e){Ie.d.r(e)};Ce.unstable_batchedUpdates=function(e,t){return e(t)};Ce.useFormState=function(e,t,n){return uo.H.useFormState(e,t,n)};Ce.useFormStatus=function(){return uo.H.useHostTransitionStatus()};Ce.version="19.1.0";function M1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M1)}catch(e){console.error(e)}}M1(),D1.exports=Ce;var AR=D1.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zt=vR,P1=q,SR=AR;function j(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function V1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function il(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function L1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Q_(e){if(il(e)!==e)throw Error(j(188))}function wR(e){var t=e.alternate;if(!t){if(t=il(e),t===null)throw Error(j(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Q_(s),e;if(r===i)return Q_(s),t;r=r.sibling}throw Error(j(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a)throw Error(j(189))}}if(n.alternate!==i)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?e:t}function U1(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=U1(e),t!==null)return t;e=e.sibling}return null}var St=Object.assign,RR=Symbol.for("react.element"),eu=Symbol.for("react.transitional.element"),Za=Symbol.for("react.portal"),Ir=Symbol.for("react.fragment"),j1=Symbol.for("react.strict_mode"),df=Symbol.for("react.profiler"),IR=Symbol.for("react.provider"),z1=Symbol.for("react.consumer"),Wn=Symbol.for("react.context"),Bp=Symbol.for("react.forward_ref"),ff=Symbol.for("react.suspense"),pf=Symbol.for("react.suspense_list"),Fp=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),mf=Symbol.for("react.activity"),CR=Symbol.for("react.memo_cache_sentinel"),Y_=Symbol.iterator;function Ba(e){return e===null||typeof e!="object"?null:(e=Y_&&e[Y_]||e["@@iterator"],typeof e=="function"?e:null)}var xR=Symbol.for("react.client.reference");function gf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xR?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ir:return"Fragment";case df:return"Profiler";case j1:return"StrictMode";case ff:return"Suspense";case pf:return"SuspenseList";case mf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Za:return"Portal";case Wn:return(e.displayName||"Context")+".Provider";case z1:return(e._context.displayName||"Context")+".Consumer";case Bp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fp:return t=e.displayName||null,t!==null?t:gf(e.type)||"Memo";case Ii:t=e._payload,e=e._init;try{return gf(e(t))}catch{}}return null}var Ja=Array.isArray,Q=P1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct=SR.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ds={pending:!1,data:null,method:null,action:null},_f=[],Cr=-1;function Bn(e){return{current:e}}function ie(e){0>Cr||(e.current=_f[Cr],_f[Cr]=null,Cr--)}function xt(e,t){Cr++,_f[Cr]=e.current,e.current=t}var On=Bn(null),Do=Bn(null),Hi=Bn(null),Wu=Bn(null);function Zu(e,t){switch(xt(Hi,t),xt(Do,e),xt(On,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?tv(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=tv(t),e=ib(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ie(On),xt(On,e)}function Zr(){ie(On),ie(Do),ie(Hi)}function yf(e){e.memoizedState!==null&&xt(Wu,e);var t=On.current,n=ib(t,e.type);t!==n&&(xt(Do,e),xt(On,n))}function Ju(e){Do.current===e&&(ie(On),ie(Do)),Wu.current===e&&(ie(Wu),Fo._currentValue=Ds)}var vf=Object.prototype.hasOwnProperty,Hp=Zt.unstable_scheduleCallback,ld=Zt.unstable_cancelCallback,OR=Zt.unstable_shouldYield,NR=Zt.unstable_requestPaint,Nn=Zt.unstable_now,DR=Zt.unstable_getCurrentPriorityLevel,B1=Zt.unstable_ImmediatePriority,F1=Zt.unstable_UserBlockingPriority,tc=Zt.unstable_NormalPriority,kR=Zt.unstable_LowPriority,H1=Zt.unstable_IdlePriority,MR=Zt.log,PR=Zt.unstable_setDisableYieldValue,sl=null,We=null;function Ui(e){if(typeof MR=="function"&&PR(e),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(sl,e)}catch{}}var Ze=Math.clz32?Math.clz32:UR,VR=Math.log,LR=Math.LN2;function UR(e){return e>>>=0,e===0?32:31-(VR(e)/LR|0)|0}var nu=256,iu=4194304;function Is(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Jc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=i&134217727;return o!==0?(i=o&~r,i!==0?s=Is(i):(a&=o,a!==0?s=Is(a):n||(n=o&~e,n!==0&&(s=Is(n))))):(o=i&~r,o!==0?s=Is(o):a!==0?s=Is(a):n||(n=i&~e,n!==0&&(s=Is(n)))),s===0?0:t!==0&&t!==s&&!(t&r)&&(r=s&-s,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:s}function rl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function jR(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q1(){var e=nu;return nu<<=1,!(nu&4194048)&&(nu=256),e}function G1(){var e=iu;return iu<<=1,!(iu&62914560)&&(iu=4194304),e}function ud(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function al(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function zR(e,t,n,i,s,r){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,u=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Ze(n),m=1<<d;o[d]=0,u[d]=-1;var p=c[d];if(p!==null)for(c[d]=null,d=0;d<p.length;d++){var v=p[d];v!==null&&(v.lane&=-536870913)}n&=~m}i!==0&&$1(e,i,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(a&~t))}function $1(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Ze(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function K1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ze(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function qp(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Gp(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Q1(){var e=ct.p;return e!==0?e:(e=window.event,e===void 0?32:fb(e.type))}function BR(e,t){var n=ct.p;try{return ct.p=e,t()}finally{ct.p=n}}var ds=Math.random().toString(36).slice(2),ve="__reactFiber$"+ds,Le="__reactProps$"+ds,ma="__reactContainer$"+ds,Ef="__reactEvents$"+ds,FR="__reactListeners$"+ds,HR="__reactHandles$"+ds,X_="__reactResources$"+ds,ol="__reactMarker$"+ds;function $p(e){delete e[ve],delete e[Le],delete e[Ef],delete e[FR],delete e[HR]}function xr(e){var t=e[ve];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ma]||n[ve]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=iv(e);e!==null;){if(n=e[ve])return n;e=iv(e)}return t}e=n,n=e.parentNode}return null}function ga(e){if(e=e[ve]||e[ma]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function to(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(j(33))}function zr(e){var t=e[X_];return t||(t=e[X_]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ee(e){e[ol]=!0}var Y1=new Set,X1={};function er(e,t){Jr(e,t),Jr(e+"Capture",t)}function Jr(e,t){for(X1[e]=t,e=0;e<t.length;e++)Y1.add(t[e])}var qR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),W_={},Z_={};function GR(e){return vf.call(Z_,e)?!0:vf.call(W_,e)?!1:qR.test(e)?Z_[e]=!0:(W_[e]=!0,!1)}function Iu(e,t,n){if(GR(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function su(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Kn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var cd,J_;function Er(e){if(cd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);cd=t&&t[1]||"",J_=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cd+e+J_}var hd=!1;function dd(e,t){if(!e||hd)return"";hd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(v){var p=v}Reflect.construct(e,[],m)}else{try{m.call()}catch(v){p=v}e.call(m.prototype)}}else{try{throw Error()}catch(v){p=v}(m=e())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(v){if(v&&p&&typeof v.stack=="string")return[v.stack,p.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],o=r[1];if(a&&o){var u=a.split(`
`),c=o.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===c.length)for(i=u.length-1,s=c.length-1;1<=i&&0<=s&&u[i]!==c[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==c[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==c[s]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=s);break}}}finally{hd=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Er(n):""}function $R(e){switch(e.tag){case 26:case 27:case 5:return Er(e.type);case 16:return Er("Lazy");case 13:return Er("Suspense");case 19:return Er("SuspenseList");case 0:case 15:return dd(e.type,!1);case 11:return dd(e.type.render,!1);case 1:return dd(e.type,!0);case 31:return Er("Activity");default:return""}}function ty(e){try{var t="";do t+=$R(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function W1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function KR(e){var t=W1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ec(e){e._valueTracker||(e._valueTracker=KR(e))}function Z1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=W1(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function nc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var QR=/[\n"\\]/g;function on(e){return e.replace(QR,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Tf(e,t,n,i,s,r,a,o){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+sn(t)):e.value!==""+sn(t)&&(e.value=""+sn(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?bf(e,a,sn(t)):n!=null?bf(e,a,sn(n)):i!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.name=""+sn(o):e.removeAttribute("name")}function J1(e,t,n,i,s,r,a,o){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;n=n!=null?""+sn(n):"",t=t!=null?""+sn(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=o?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function bf(e,t,n){t==="number"&&nc(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Br(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+sn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function tE(e,t,n){if(t!=null&&(t=""+sn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+sn(n):""}function eE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(j(92));if(Ja(i)){if(1<i.length)throw Error(j(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=sn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function ta(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var YR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ey(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||YR.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function nE(e,t,n){if(t!=null&&typeof t!="object")throw Error(j(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&ey(e,s,i)}else for(var r in t)t.hasOwnProperty(r)&&ey(e,r,t[r])}function Kp(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cu(e){return WR.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Af=null;function Qp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Or=null,Fr=null;function ny(e){var t=ga(e);if(t&&(e=t.stateNode)){var n=e[Le]||null;t:switch(e=t.stateNode,t.type){case"input":if(Tf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+on(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[Le]||null;if(!s)throw Error(j(90));Tf(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Z1(i)}break t;case"textarea":tE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Br(e,!!n.multiple,t,!1)}}}var fd=!1;function iE(e,t,n){if(fd)return e(t,n);fd=!0;try{var i=e(t);return i}finally{if(fd=!1,(Or!==null||Fr!==null)&&(uh(),Or&&(t=Or,e=Fr,Fr=Or=null,ny(t),e)))for(t=0;t<e.length;t++)ny(e[t])}}function ko(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Le]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(j(231,t,typeof n));return n}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sf=!1;if(li)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){Sf=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{Sf=!1}var ji=null,Yp=null,xu=null;function sE(){if(xu)return xu;var e,t=Yp,n=t.length,i,s="value"in ji?ji.value:ji.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===s[r-i];i++);return xu=s.slice(e,1<i?1-i:void 0)}function Ou(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ru(){return!0}function iy(){return!1}function Ue(e){function t(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ru:iy,this.isPropagationStopped=iy,this}return St(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ru)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ru)},persist:function(){},isPersistent:ru}),t}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},th=Ue(nr),ll=St({},nr,{view:0,detail:0}),ZR=Ue(ll),pd,md,Ha,eh=St({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ha&&(Ha&&e.type==="mousemove"?(pd=e.screenX-Ha.screenX,md=e.screenY-Ha.screenY):md=pd=0,Ha=e),pd)},movementY:function(e){return"movementY"in e?e.movementY:md}}),sy=Ue(eh),JR=St({},eh,{dataTransfer:0}),tI=Ue(JR),eI=St({},ll,{relatedTarget:0}),gd=Ue(eI),nI=St({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),iI=Ue(nI),sI=St({},nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rI=Ue(sI),aI=St({},nr,{data:0}),ry=Ue(aI),oI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uI[e])?!!t[e]:!1}function Xp(){return cI}var hI=St({},ll,{key:function(e){if(e.key){var t=oI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ou(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lI[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xp,charCode:function(e){return e.type==="keypress"?Ou(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ou(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dI=Ue(hI),fI=St({},eh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ay=Ue(fI),pI=St({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xp}),mI=Ue(pI),gI=St({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),_I=Ue(gI),yI=St({},eh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vI=Ue(yI),EI=St({},nr,{newState:0,oldState:0}),TI=Ue(EI),bI=[9,13,27,32],Wp=li&&"CompositionEvent"in window,co=null;li&&"documentMode"in document&&(co=document.documentMode);var AI=li&&"TextEvent"in window&&!co,rE=li&&(!Wp||co&&8<co&&11>=co),oy=String.fromCharCode(32),ly=!1;function aE(e,t){switch(e){case"keyup":return bI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nr=!1;function SI(e,t){switch(e){case"compositionend":return oE(t);case"keypress":return t.which!==32?null:(ly=!0,oy);case"textInput":return e=t.data,e===oy&&ly?null:e;default:return null}}function wI(e,t){if(Nr)return e==="compositionend"||!Wp&&aE(e,t)?(e=sE(),xu=Yp=ji=null,Nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rE&&t.locale!=="ko"?null:t.data;default:return null}}var RI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RI[e.type]:t==="textarea"}function lE(e,t,n,i){Or?Fr?Fr.push(i):Fr=[i]:Or=i,t=Ec(t,"onChange"),0<t.length&&(n=new th("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ho=null,Mo=null;function II(e){tb(e,0)}function nh(e){var t=to(e);if(Z1(t))return e}function cy(e,t){if(e==="change")return t}var uE=!1;if(li){var _d;if(li){var yd="oninput"in document;if(!yd){var hy=document.createElement("div");hy.setAttribute("oninput","return;"),yd=typeof hy.oninput=="function"}_d=yd}else _d=!1;uE=_d&&(!document.documentMode||9<document.documentMode)}function dy(){ho&&(ho.detachEvent("onpropertychange",cE),Mo=ho=null)}function cE(e){if(e.propertyName==="value"&&nh(Mo)){var t=[];lE(t,Mo,e,Qp(e)),iE(II,t)}}function CI(e,t,n){e==="focusin"?(dy(),ho=t,Mo=n,ho.attachEvent("onpropertychange",cE)):e==="focusout"&&dy()}function xI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nh(Mo)}function OI(e,t){if(e==="click")return nh(t)}function NI(e,t){if(e==="input"||e==="change")return nh(t)}function DI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var en=typeof Object.is=="function"?Object.is:DI;function Po(e,t){if(en(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!vf.call(t,s)||!en(e[s],t[s]))return!1}return!0}function fy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function py(e,t){var n=fy(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=fy(n)}}function hE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function dE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=nc(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=nc(e.document)}return t}function Zp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var kI=li&&"documentMode"in document&&11>=document.documentMode,Dr=null,wf=null,fo=null,Rf=!1;function my(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rf||Dr==null||Dr!==nc(i)||(i=Dr,"selectionStart"in i&&Zp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),fo&&Po(fo,i)||(fo=i,i=Ec(wf,"onSelect"),0<i.length&&(t=new th("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Dr)))}function Ss(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:Ss("Animation","AnimationEnd"),animationiteration:Ss("Animation","AnimationIteration"),animationstart:Ss("Animation","AnimationStart"),transitionrun:Ss("Transition","TransitionRun"),transitionstart:Ss("Transition","TransitionStart"),transitioncancel:Ss("Transition","TransitionCancel"),transitionend:Ss("Transition","TransitionEnd")},vd={},fE={};li&&(fE=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);function ir(e){if(vd[e])return vd[e];if(!kr[e])return e;var t=kr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in fE)return vd[e]=t[n];return e}var pE=ir("animationend"),mE=ir("animationiteration"),gE=ir("animationstart"),MI=ir("transitionrun"),PI=ir("transitionstart"),VI=ir("transitioncancel"),_E=ir("transitionend"),yE=new Map,If="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");If.push("scrollEnd");function bn(e,t){yE.set(e,t),er(t,[e])}var gy=new WeakMap;function ln(e,t){if(typeof e=="object"&&e!==null){var n=gy.get(e);return n!==void 0?n:(t={value:e,source:t,stack:ty(t)},gy.set(e,t),t)}return{value:e,source:t,stack:ty(t)}}var nn=[],Mr=0,Jp=0;function ih(){for(var e=Mr,t=Jp=Mr=0;t<e;){var n=nn[t];nn[t++]=null;var i=nn[t];nn[t++]=null;var s=nn[t];nn[t++]=null;var r=nn[t];if(nn[t++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&vE(n,s,r)}}function sh(e,t,n,i){nn[Mr++]=e,nn[Mr++]=t,nn[Mr++]=n,nn[Mr++]=i,Jp|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function tm(e,t,n,i){return sh(e,t,n,i),ic(e)}function _a(e,t){return sh(e,null,null,t),ic(e)}function vE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,s&&t!==null&&(s=31-Ze(n),e=r.hiddenUpdates,i=e[s],i===null?e[s]=[t]:i.push(t),t.lane=n|536870912),r):null}function ic(e){if(50<Ao)throw Ao=0,Qf=null,Error(j(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Pr={};function LI(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $e(e,t,n,i){return new LI(e,t,n,i)}function em(e){return e=e.prototype,!(!e||!e.isReactComponent)}function si(e,t){var n=e.alternate;return n===null?(n=$e(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function EE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Nu(e,t,n,i,s,r){var a=0;if(i=e,typeof e=="function")em(e)&&(a=1);else if(typeof e=="string")a=j2(e,n,On.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case mf:return e=$e(31,n,t,s),e.elementType=mf,e.lanes=r,e;case Ir:return ks(n.children,s,r,t);case j1:a=8,s|=24;break;case df:return e=$e(12,n,t,s|2),e.elementType=df,e.lanes=r,e;case ff:return e=$e(13,n,t,s),e.elementType=ff,e.lanes=r,e;case pf:return e=$e(19,n,t,s),e.elementType=pf,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case IR:case Wn:a=10;break t;case z1:a=9;break t;case Bp:a=11;break t;case Fp:a=14;break t;case Ii:a=16,i=null;break t}a=29,n=Error(j(130,e===null?"null":typeof e,"")),i=null}return t=$e(a,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function ks(e,t,n,i){return e=$e(7,e,i,t),e.lanes=n,e}function Ed(e,t,n){return e=$e(6,e,null,t),e.lanes=n,e}function Td(e,t,n){return t=$e(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vr=[],Lr=0,sc=null,rc=0,rn=[],an=0,Ms=null,Zn=1,Jn="";function Cs(e,t){Vr[Lr++]=rc,Vr[Lr++]=sc,sc=e,rc=t}function TE(e,t,n){rn[an++]=Zn,rn[an++]=Jn,rn[an++]=Ms,Ms=e;var i=Zn;e=Jn;var s=32-Ze(i)-1;i&=~(1<<s),n+=1;var r=32-Ze(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Zn=1<<32-Ze(t)+s|n<<s|i,Jn=r+e}else Zn=1<<r|n<<s|i,Jn=e}function nm(e){e.return!==null&&(Cs(e,1),TE(e,1,0))}function im(e){for(;e===sc;)sc=Vr[--Lr],Vr[Lr]=null,rc=Vr[--Lr],Vr[Lr]=null;for(;e===Ms;)Ms=rn[--an],rn[an]=null,Jn=rn[--an],rn[an]=null,Zn=rn[--an],rn[an]=null}var Re=null,Mt=null,ut=!1,Ps=null,In=!1,Cf=Error(j(519));function Hs(e){var t=Error(j(418,""));throw Vo(ln(t,e)),Cf}function _y(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[ve]=e,t[Le]=i,n){case"dialog":nt("cancel",t),nt("close",t);break;case"iframe":case"object":case"embed":nt("load",t);break;case"video":case"audio":for(n=0;n<jo.length;n++)nt(jo[n],t);break;case"source":nt("error",t);break;case"img":case"image":case"link":nt("error",t),nt("load",t);break;case"details":nt("toggle",t);break;case"input":nt("invalid",t),J1(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),ec(t);break;case"select":nt("invalid",t);break;case"textarea":nt("invalid",t),eE(t,i.value,i.defaultValue,i.children),ec(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||nb(t.textContent,n)?(i.popover!=null&&(nt("beforetoggle",t),nt("toggle",t)),i.onScroll!=null&&nt("scroll",t),i.onScrollEnd!=null&&nt("scrollend",t),i.onClick!=null&&(t.onclick=dh),t=!0):t=!1,t||Hs(e)}function yy(e){for(Re=e.return;Re;)switch(Re.tag){case 5:case 13:In=!1;return;case 27:case 3:In=!0;return;default:Re=Re.return}}function qa(e){if(e!==Re)return!1;if(!ut)return yy(e),ut=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||tp(e.type,e.memoizedProps)),n=!n),n&&Mt&&Hs(e),yy(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Mt=yn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Mt=null}}else t===27?(t=Mt,fs(e.type)?(e=ip,ip=null,Mt=e):Mt=t):Mt=Re?yn(e.stateNode.nextSibling):null;return!0}function ul(){Mt=Re=null,ut=!1}function vy(){var e=Ps;return e!==null&&(De===null?De=e:De.push.apply(De,e),Ps=null),e}function Vo(e){Ps===null?Ps=[e]:Ps.push(e)}var xf=Bn(null),sr=null,ti=null;function xi(e,t,n){xt(xf,t._currentValue),t._currentValue=n}function ri(e){e._currentValue=xf.current,ie(xf)}function Of(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Nf(e,t,n,i){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;t:for(;r!==null;){var o=r;r=s;for(var u=0;u<t.length;u++)if(o.context===t[u]){r.lanes|=n,o=r.alternate,o!==null&&(o.lanes|=n),Of(r.return,n,e),i||(a=null);break t}r=o.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(j(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),Of(a,n,e),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function cl(e,t,n,i){e=null;for(var s=t,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(j(387));if(a=a.memoizedProps,a!==null){var o=s.type;en(s.pendingProps.value,a.value)||(e!==null?e.push(o):e=[o])}}else if(s===Wu.current){if(a=s.alternate,a===null)throw Error(j(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(Fo):e=[Fo])}s=s.return}e!==null&&Nf(t,e,n,i),t.flags|=262144}function ac(e){for(e=e.firstContext;e!==null;){if(!en(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function qs(e){sr=e,ti=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ee(e){return bE(sr,e)}function au(e,t){return sr===null&&qs(e),bE(e,t)}function bE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ti===null){if(e===null)throw Error(j(308));ti=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ti=ti.next=t;return n}var UI=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},jI=Zt.unstable_scheduleCallback,zI=Zt.unstable_NormalPriority,Yt={$$typeof:Wn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sm(){return{controller:new UI,data:new Map,refCount:0}}function hl(e){e.refCount--,e.refCount===0&&jI(zI,function(){e.controller.abort()})}var po=null,Df=0,ea=0,Hr=null;function BI(e,t){if(po===null){var n=po=[];Df=0,ea=Im(),Hr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Df++,t.then(Ey,Ey),t}function Ey(){if(--Df===0&&po!==null){Hr!==null&&(Hr.status="fulfilled");var e=po;po=null,ea=0,Hr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function FI(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var Ty=Q.S;Q.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&BI(e,t),Ty!==null&&Ty(e,t)};var Vs=Bn(null);function rm(){var e=Vs.current;return e!==null?e:Et.pooledCache}function Du(e,t){t===null?xt(Vs,Vs.current):xt(Vs,t.pool)}function AE(){var e=rm();return e===null?null:{parent:Yt._currentValue,pool:e}}var dl=Error(j(460)),SE=Error(j(474)),rh=Error(j(542)),kf={then:function(){}};function by(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ou(){}function wE(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ou,ou),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Sy(e),e;default:if(typeof t.status=="string")t.then(ou,ou);else{if(e=Et,e!==null&&100<e.shellSuspendCounter)throw Error(j(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=i}},function(i){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Sy(e),e}throw mo=t,dl}}var mo=null;function Ay(){if(mo===null)throw Error(j(459));var e=mo;return mo=null,e}function Sy(e){if(e===dl||e===rh)throw Error(j(483))}var Ci=!1;function am(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function qi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,pt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=ic(e),vE(e,null,n),t}return sh(e,i,t,n),ic(e)}function go(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,K1(e,n)}}function bd(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Pf=!1;function _o(){if(Pf){var e=Hr;if(e!==null)throw e}}function yo(e,t,n,i){Pf=!1;var s=e.updateQueue;Ci=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var u=o,c=u.next;u.next=null,a===null?r=c:a.next=c,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=u))}if(r!==null){var m=s.baseState;a=0,d=c=u=null,o=r;do{var p=o.lane&-536870913,v=p!==o.lane;if(v?(ot&p)===p:(i&p)===p){p!==0&&p===ea&&(Pf=!0),d!==null&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});t:{var R=e,O=o;p=t;var D=n;switch(O.tag){case 1:if(R=O.payload,typeof R=="function"){m=R.call(D,m,p);break t}m=R;break t;case 3:R.flags=R.flags&-65537|128;case 0:if(R=O.payload,p=typeof R=="function"?R.call(D,m,p):R,p==null)break t;m=St({},m,p);break t;case 2:Ci=!0}}p=o.callback,p!==null&&(e.flags|=64,v&&(e.flags|=8192),v=s.callbacks,v===null?s.callbacks=[p]:v.push(p))}else v={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=v,u=m):d=d.next=v,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;v=o,o=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(1);d===null&&(u=m),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,r===null&&(s.shared.lanes=0),is|=a,e.lanes=a,e.memoizedState=m}}function RE(e,t){if(typeof e!="function")throw Error(j(191,e));e.call(t)}function IE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)RE(n[e],t)}var na=Bn(null),oc=Bn(0);function wy(e,t){e=hi,xt(oc,e),xt(na,t),hi=e|t.baseLanes}function Vf(){xt(oc,hi),xt(na,na.current)}function om(){hi=oc.current,ie(na),ie(oc)}var es=0,et=null,gt=null,Gt=null,lc=!1,qr=!1,Gs=!1,uc=0,Lo=0,Gr=null,HI=0;function zt(){throw Error(j(321))}function lm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!en(e[n],t[n]))return!1;return!0}function um(e,t,n,i,s,r){return es=r,et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Q.H=e===null||e.memoizedState===null?sT:rT,Gs=!1,r=n(i,s),Gs=!1,qr&&(r=xE(t,n,i,s)),CE(e),r}function CE(e){Q.H=cc;var t=gt!==null&&gt.next!==null;if(es=0,Gt=gt=et=null,lc=!1,Lo=0,Gr=null,t)throw Error(j(300));e===null||ne||(e=e.dependencies,e!==null&&ac(e)&&(ne=!0))}function xE(e,t,n,i){et=e;var s=0;do{if(qr&&(Gr=null),Lo=0,qr=!1,25<=s)throw Error(j(301));if(s+=1,Gt=gt=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}Q.H=XI,r=t(n,i)}while(qr);return r}function qI(){var e=Q.H,t=e.useState()[0];return t=typeof t.then=="function"?fl(t):t,e=e.useState()[0],(gt!==null?gt.memoizedState:null)!==e&&(et.flags|=1024),t}function cm(){var e=uc!==0;return uc=0,e}function hm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function dm(e){if(lc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}lc=!1}es=0,Gt=gt=et=null,qr=!1,Lo=uc=0,Gr=null}function Oe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?et.memoizedState=Gt=e:Gt=Gt.next=e,Gt}function Qt(){if(gt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=Gt===null?et.memoizedState:Gt.next;if(t!==null)Gt=t,gt=e;else{if(e===null)throw et.alternate===null?Error(j(467)):Error(j(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Gt===null?et.memoizedState=Gt=e:Gt=Gt.next=e}return Gt}function fm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fl(e){var t=Lo;return Lo+=1,Gr===null&&(Gr=[]),e=wE(Gr,e,t),t=et,(Gt===null?t.memoizedState:Gt.next)===null&&(t=t.alternate,Q.H=t===null||t.memoizedState===null?sT:rT),e}function ah(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return fl(e);if(e.$$typeof===Wn)return Ee(e)}throw Error(j(438,String(e)))}function pm(e){var t=null,n=et.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=et.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=fm(),et.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=CR;return t.index++,n}function ui(e,t){return typeof t=="function"?t(e):t}function ku(e){var t=Qt();return mm(t,gt,e)}function mm(e,t,n){var i=e.queue;if(i===null)throw Error(j(311));i.lastRenderedReducer=n;var s=e.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}t.baseQueue=s=r,i.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var o=a=null,u=null,c=t,d=!1;do{var m=c.lane&-536870913;if(m!==c.lane?(ot&m)===m:(es&m)===m){var p=c.revertLane;if(p===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),m===ea&&(d=!0);else if((es&p)===p){c=c.next,p===ea&&(d=!0);continue}else m={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(o=u=m,a=r):u=u.next=m,et.lanes|=p,is|=p;m=c.action,Gs&&n(r,m),r=c.hasEagerState?c.eagerState:n(r,m)}else p={lane:m,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(o=u=p,a=r):u=u.next=p,et.lanes|=m,is|=m;c=c.next}while(c!==null&&c!==t);if(u===null?a=r:u.next=o,!en(r,e.memoizedState)&&(ne=!0,d&&(n=Hr,n!==null)))throw n;e.memoizedState=r,e.baseState=a,e.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Ad(e){var t=Qt(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=e(r,a.action),a=a.next;while(a!==s);en(r,t.memoizedState)||(ne=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function OE(e,t,n){var i=et,s=Qt(),r=ut;if(r){if(n===void 0)throw Error(j(407));n=n()}else n=t();var a=!en((gt||s).memoizedState,n);a&&(s.memoizedState=n,ne=!0),s=s.queue;var o=kE.bind(null,i,s,e);if(pl(2048,8,o,[e]),s.getSnapshot!==t||a||Gt!==null&&Gt.memoizedState.tag&1){if(i.flags|=2048,ia(9,oh(),DE.bind(null,i,s,n,t),null),Et===null)throw Error(j(349));r||es&124||NE(i,t,n)}return n}function NE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=et.updateQueue,t===null?(t=fm(),et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function DE(e,t,n,i){t.value=n,t.getSnapshot=i,ME(t)&&PE(e)}function kE(e,t,n){return n(function(){ME(t)&&PE(e)})}function ME(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!en(e,n)}catch{return!0}}function PE(e){var t=_a(e,2);t!==null&&tn(t,e,2)}function Lf(e){var t=Oe();if(typeof e=="function"){var n=e;if(e=n(),Gs){Ui(!0);try{n()}finally{Ui(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:e},t}function VE(e,t,n,i){return e.baseState=n,mm(e,gt,typeof i=="function"?i:ui)}function GI(e,t,n,i,s){if(lh(e))throw Error(j(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};Q.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,LE(t,r)):(r.next=n.next,t.pending=n.next=r)}}function LE(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var r=Q.T,a={};Q.T=a;try{var o=n(s,i),u=Q.S;u!==null&&u(a,o),Ry(e,t,o)}catch(c){Uf(e,t,c)}finally{Q.T=r}}else try{r=n(s,i),Ry(e,t,r)}catch(c){Uf(e,t,c)}}function Ry(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Iy(e,t,i)},function(i){return Uf(e,t,i)}):Iy(e,t,n)}function Iy(e,t,n){t.status="fulfilled",t.value=n,UE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,LE(e,n)))}function Uf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,UE(t),t=t.next;while(t!==i)}e.action=null}function UE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function jE(e,t){return t}function Cy(e,t){if(ut){var n=Et.formState;if(n!==null){t:{var i=et;if(ut){if(Mt){e:{for(var s=Mt,r=In;s.nodeType!==8;){if(!r){s=null;break e}if(s=yn(s.nextSibling),s===null){s=null;break e}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){Mt=yn(s.nextSibling),i=s.data==="F!";break t}}Hs(i)}i=!1}i&&(t=n[0])}}return n=Oe(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jE,lastRenderedState:t},n.queue=i,n=eT.bind(null,et,i),i.dispatch=n,i=Lf(!1),r=vm.bind(null,et,!1,i.queue),i=Oe(),s={state:t,dispatch:null,action:e,pending:null},i.queue=s,n=GI.bind(null,et,s,r,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function xy(e){var t=Qt();return zE(t,gt,e)}function zE(e,t,n){if(t=mm(e,t,jE)[0],e=ku(ui)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=fl(t)}catch(a){throw a===dl?rh:a}else i=t;t=Qt();var s=t.queue,r=s.dispatch;return n!==t.memoizedState&&(et.flags|=2048,ia(9,oh(),$I.bind(null,s,n),null)),[i,r,e]}function $I(e,t){e.action=t}function Oy(e){var t=Qt(),n=gt;if(n!==null)return zE(t,n,e);Qt(),t=t.memoizedState,n=Qt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function ia(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=et.updateQueue,t===null&&(t=fm(),et.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function oh(){return{destroy:void 0,resource:void 0}}function BE(){return Qt().memoizedState}function Mu(e,t,n,i){var s=Oe();i=i===void 0?null:i,et.flags|=e,s.memoizedState=ia(1|t,oh(),n,i)}function pl(e,t,n,i){var s=Qt();i=i===void 0?null:i;var r=s.memoizedState.inst;gt!==null&&i!==null&&lm(i,gt.memoizedState.deps)?s.memoizedState=ia(t,r,n,i):(et.flags|=e,s.memoizedState=ia(1|t,r,n,i))}function Ny(e,t){Mu(8390656,8,e,t)}function FE(e,t){pl(2048,8,e,t)}function HE(e,t){return pl(4,2,e,t)}function qE(e,t){return pl(4,4,e,t)}function GE(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $E(e,t,n){n=n!=null?n.concat([e]):null,pl(4,4,GE.bind(null,t,e),n)}function gm(){}function KE(e,t){var n=Qt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&lm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function QE(e,t){var n=Qt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&lm(t,i[1]))return i[0];if(i=e(),Gs){Ui(!0);try{e()}finally{Ui(!1)}}return n.memoizedState=[i,t],i}function _m(e,t,n){return n===void 0||es&1073741824?e.memoizedState=t:(e.memoizedState=n,e=UT(),et.lanes|=e,is|=e,n)}function YE(e,t,n,i){return en(n,t)?n:na.current!==null?(e=_m(e,n,i),en(e,t)||(ne=!0),e):es&42?(e=UT(),et.lanes|=e,is|=e,t):(ne=!0,e.memoizedState=n)}function XE(e,t,n,i,s){var r=ct.p;ct.p=r!==0&&8>r?r:8;var a=Q.T,o={};Q.T=o,vm(e,!1,t,n);try{var u=s(),c=Q.S;if(c!==null&&c(o,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=FI(u,i);vo(e,t,d,Je(e))}else vo(e,t,i,Je(e))}catch(m){vo(e,t,{then:function(){},status:"rejected",reason:m},Je())}finally{ct.p=r,Q.T=a}}function KI(){}function jf(e,t,n,i){if(e.tag!==5)throw Error(j(476));var s=WE(e).queue;XE(e,s,t,Ds,n===null?KI:function(){return ZE(e),n(i)})}function WE(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ds,baseState:Ds,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:Ds},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ZE(e){var t=WE(e).next.queue;vo(e,t,{},Je())}function ym(){return Ee(Fo)}function JE(){return Qt().memoizedState}function tT(){return Qt().memoizedState}function QI(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Je();e=qi(n);var i=Gi(t,e,n);i!==null&&(tn(i,t,n),go(i,t,n)),t={cache:sm()},e.payload=t;return}t=t.return}}function YI(e,t,n){var i=Je();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},lh(e)?nT(t,n):(n=tm(e,t,n,i),n!==null&&(tn(n,e,i),iT(n,t,i)))}function eT(e,t,n){var i=Je();vo(e,t,n,i)}function vo(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(lh(e))nT(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,o=r(a,n);if(s.hasEagerState=!0,s.eagerState=o,en(o,a))return sh(e,t,s,0),Et===null&&ih(),!1}catch{}finally{}if(n=tm(e,t,s,i),n!==null)return tn(n,e,i),iT(n,t,i),!0}return!1}function vm(e,t,n,i){if(i={lane:2,revertLane:Im(),action:i,hasEagerState:!1,eagerState:null,next:null},lh(e)){if(t)throw Error(j(479))}else t=tm(e,n,i,2),t!==null&&tn(t,e,2)}function lh(e){var t=e.alternate;return e===et||t!==null&&t===et}function nT(e,t){qr=lc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function iT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,K1(e,n)}}var cc={readContext:Ee,use:ah,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt},sT={readContext:Ee,use:ah,useCallback:function(e,t){return Oe().memoizedState=[e,t===void 0?null:t],e},useContext:Ee,useEffect:Ny,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Mu(4194308,4,GE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mu(4194308,4,e,t)},useInsertionEffect:function(e,t){Mu(4,2,e,t)},useMemo:function(e,t){var n=Oe();t=t===void 0?null:t;var i=e();if(Gs){Ui(!0);try{e()}finally{Ui(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Oe();if(n!==void 0){var s=n(t);if(Gs){Ui(!0);try{n(t)}finally{Ui(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=YI.bind(null,et,e),[i.memoizedState,e]},useRef:function(e){var t=Oe();return e={current:e},t.memoizedState=e},useState:function(e){e=Lf(e);var t=e.queue,n=eT.bind(null,et,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:gm,useDeferredValue:function(e,t){var n=Oe();return _m(n,e,t)},useTransition:function(){var e=Lf(!1);return e=XE.bind(null,et,e.queue,!0,!1),Oe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=et,s=Oe();if(ut){if(n===void 0)throw Error(j(407));n=n()}else{if(n=t(),Et===null)throw Error(j(349));ot&124||NE(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,Ny(kE.bind(null,i,r,e),[e]),i.flags|=2048,ia(9,oh(),DE.bind(null,i,r,n,t),null),n},useId:function(){var e=Oe(),t=Et.identifierPrefix;if(ut){var n=Jn,i=Zn;n=(i&~(1<<32-Ze(i)-1)).toString(32)+n,t=""+t+"R"+n,n=uc++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=HI++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:ym,useFormState:Cy,useActionState:Cy,useOptimistic:function(e){var t=Oe();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=vm.bind(null,et,!0,n),n.dispatch=t,[e,t]},useMemoCache:pm,useCacheRefresh:function(){return Oe().memoizedState=QI.bind(null,et)}},rT={readContext:Ee,use:ah,useCallback:KE,useContext:Ee,useEffect:FE,useImperativeHandle:$E,useInsertionEffect:HE,useLayoutEffect:qE,useMemo:QE,useReducer:ku,useRef:BE,useState:function(){return ku(ui)},useDebugValue:gm,useDeferredValue:function(e,t){var n=Qt();return YE(n,gt.memoizedState,e,t)},useTransition:function(){var e=ku(ui)[0],t=Qt().memoizedState;return[typeof e=="boolean"?e:fl(e),t]},useSyncExternalStore:OE,useId:JE,useHostTransitionStatus:ym,useFormState:xy,useActionState:xy,useOptimistic:function(e,t){var n=Qt();return VE(n,gt,e,t)},useMemoCache:pm,useCacheRefresh:tT},XI={readContext:Ee,use:ah,useCallback:KE,useContext:Ee,useEffect:FE,useImperativeHandle:$E,useInsertionEffect:HE,useLayoutEffect:qE,useMemo:QE,useReducer:Ad,useRef:BE,useState:function(){return Ad(ui)},useDebugValue:gm,useDeferredValue:function(e,t){var n=Qt();return gt===null?_m(n,e,t):YE(n,gt.memoizedState,e,t)},useTransition:function(){var e=Ad(ui)[0],t=Qt().memoizedState;return[typeof e=="boolean"?e:fl(e),t]},useSyncExternalStore:OE,useId:JE,useHostTransitionStatus:ym,useFormState:Oy,useActionState:Oy,useOptimistic:function(e,t){var n=Qt();return gt!==null?VE(n,gt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:pm,useCacheRefresh:tT},$r=null,Uo=0;function lu(e){var t=Uo;return Uo+=1,$r===null&&($r=[]),wE($r,e,t)}function Ga(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function uu(e,t){throw t.$$typeof===RR?Error(j(525)):(e=Object.prototype.toString.call(t),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Dy(e){var t=e._init;return t(e._payload)}function aT(e){function t(T,_){if(e){var A=T.deletions;A===null?(T.deletions=[_],T.flags|=16):A.push(_)}}function n(T,_){if(!e)return null;for(;_!==null;)t(T,_),_=_.sibling;return null}function i(T){for(var _=new Map;T!==null;)T.key!==null?_.set(T.key,T):_.set(T.index,T),T=T.sibling;return _}function s(T,_){return T=si(T,_),T.index=0,T.sibling=null,T}function r(T,_,A){return T.index=A,e?(A=T.alternate,A!==null?(A=A.index,A<_?(T.flags|=67108866,_):A):(T.flags|=67108866,_)):(T.flags|=1048576,_)}function a(T){return e&&T.alternate===null&&(T.flags|=67108866),T}function o(T,_,A,x){return _===null||_.tag!==6?(_=Ed(A,T.mode,x),_.return=T,_):(_=s(_,A),_.return=T,_)}function u(T,_,A,x){var M=A.type;return M===Ir?d(T,_,A.props.children,x,A.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ii&&Dy(M)===_.type)?(_=s(_,A.props),Ga(_,A),_.return=T,_):(_=Nu(A.type,A.key,A.props,null,T.mode,x),Ga(_,A),_.return=T,_)}function c(T,_,A,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==A.containerInfo||_.stateNode.implementation!==A.implementation?(_=Td(A,T.mode,x),_.return=T,_):(_=s(_,A.children||[]),_.return=T,_)}function d(T,_,A,x,M){return _===null||_.tag!==7?(_=ks(A,T.mode,x,M),_.return=T,_):(_=s(_,A),_.return=T,_)}function m(T,_,A){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=Ed(""+_,T.mode,A),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case eu:return A=Nu(_.type,_.key,_.props,null,T.mode,A),Ga(A,_),A.return=T,A;case Za:return _=Td(_,T.mode,A),_.return=T,_;case Ii:var x=_._init;return _=x(_._payload),m(T,_,A)}if(Ja(_)||Ba(_))return _=ks(_,T.mode,A,null),_.return=T,_;if(typeof _.then=="function")return m(T,lu(_),A);if(_.$$typeof===Wn)return m(T,au(T,_),A);uu(T,_)}return null}function p(T,_,A,x){var M=_!==null?_.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return M!==null?null:o(T,_,""+A,x);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case eu:return A.key===M?u(T,_,A,x):null;case Za:return A.key===M?c(T,_,A,x):null;case Ii:return M=A._init,A=M(A._payload),p(T,_,A,x)}if(Ja(A)||Ba(A))return M!==null?null:d(T,_,A,x,null);if(typeof A.then=="function")return p(T,_,lu(A),x);if(A.$$typeof===Wn)return p(T,_,au(T,A),x);uu(T,A)}return null}function v(T,_,A,x,M){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return T=T.get(A)||null,o(_,T,""+x,M);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case eu:return T=T.get(x.key===null?A:x.key)||null,u(_,T,x,M);case Za:return T=T.get(x.key===null?A:x.key)||null,c(_,T,x,M);case Ii:var V=x._init;return x=V(x._payload),v(T,_,A,x,M)}if(Ja(x)||Ba(x))return T=T.get(A)||null,d(_,T,x,M,null);if(typeof x.then=="function")return v(T,_,A,lu(x),M);if(x.$$typeof===Wn)return v(T,_,A,au(_,x),M);uu(_,x)}return null}function R(T,_,A,x){for(var M=null,V=null,b=_,y=_=0,S=null;b!==null&&y<A.length;y++){b.index>y?(S=b,b=null):S=b.sibling;var w=p(T,b,A[y],x);if(w===null){b===null&&(b=S);break}e&&b&&w.alternate===null&&t(T,b),_=r(w,_,y),V===null?M=w:V.sibling=w,V=w,b=S}if(y===A.length)return n(T,b),ut&&Cs(T,y),M;if(b===null){for(;y<A.length;y++)b=m(T,A[y],x),b!==null&&(_=r(b,_,y),V===null?M=b:V.sibling=b,V=b);return ut&&Cs(T,y),M}for(b=i(b);y<A.length;y++)S=v(b,T,y,A[y],x),S!==null&&(e&&S.alternate!==null&&b.delete(S.key===null?y:S.key),_=r(S,_,y),V===null?M=S:V.sibling=S,V=S);return e&&b.forEach(function(I){return t(T,I)}),ut&&Cs(T,y),M}function O(T,_,A,x){if(A==null)throw Error(j(151));for(var M=null,V=null,b=_,y=_=0,S=null,w=A.next();b!==null&&!w.done;y++,w=A.next()){b.index>y?(S=b,b=null):S=b.sibling;var I=p(T,b,w.value,x);if(I===null){b===null&&(b=S);break}e&&b&&I.alternate===null&&t(T,b),_=r(I,_,y),V===null?M=I:V.sibling=I,V=I,b=S}if(w.done)return n(T,b),ut&&Cs(T,y),M;if(b===null){for(;!w.done;y++,w=A.next())w=m(T,w.value,x),w!==null&&(_=r(w,_,y),V===null?M=w:V.sibling=w,V=w);return ut&&Cs(T,y),M}for(b=i(b);!w.done;y++,w=A.next())w=v(b,T,y,w.value,x),w!==null&&(e&&w.alternate!==null&&b.delete(w.key===null?y:w.key),_=r(w,_,y),V===null?M=w:V.sibling=w,V=w);return e&&b.forEach(function(N){return t(T,N)}),ut&&Cs(T,y),M}function D(T,_,A,x){if(typeof A=="object"&&A!==null&&A.type===Ir&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case eu:t:{for(var M=A.key;_!==null;){if(_.key===M){if(M=A.type,M===Ir){if(_.tag===7){n(T,_.sibling),x=s(_,A.props.children),x.return=T,T=x;break t}}else if(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ii&&Dy(M)===_.type){n(T,_.sibling),x=s(_,A.props),Ga(x,A),x.return=T,T=x;break t}n(T,_);break}else t(T,_);_=_.sibling}A.type===Ir?(x=ks(A.props.children,T.mode,x,A.key),x.return=T,T=x):(x=Nu(A.type,A.key,A.props,null,T.mode,x),Ga(x,A),x.return=T,T=x)}return a(T);case Za:t:{for(M=A.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===A.containerInfo&&_.stateNode.implementation===A.implementation){n(T,_.sibling),x=s(_,A.children||[]),x.return=T,T=x;break t}else{n(T,_);break}else t(T,_);_=_.sibling}x=Td(A,T.mode,x),x.return=T,T=x}return a(T);case Ii:return M=A._init,A=M(A._payload),D(T,_,A,x)}if(Ja(A))return R(T,_,A,x);if(Ba(A)){if(M=Ba(A),typeof M!="function")throw Error(j(150));return A=M.call(A),O(T,_,A,x)}if(typeof A.then=="function")return D(T,_,lu(A),x);if(A.$$typeof===Wn)return D(T,_,au(T,A),x);uu(T,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,_!==null&&_.tag===6?(n(T,_.sibling),x=s(_,A),x.return=T,T=x):(n(T,_),x=Ed(A,T.mode,x),x.return=T,T=x),a(T)):n(T,_)}return function(T,_,A,x){try{Uo=0;var M=D(T,_,A,x);return $r=null,M}catch(b){if(b===dl||b===rh)throw b;var V=$e(29,b,null,T.mode);return V.lanes=x,V.return=T,V}finally{}}}var sa=aT(!0),oT=aT(!1),hn=Bn(null),Dn=null;function Oi(e){var t=e.alternate;xt(Xt,Xt.current&1),xt(hn,e),Dn===null&&(t===null||na.current!==null||t.memoizedState!==null)&&(Dn=e)}function lT(e){if(e.tag===22){if(xt(Xt,Xt.current),xt(hn,e),Dn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Dn=e)}}else Ni()}function Ni(){xt(Xt,Xt.current),xt(hn,hn.current)}function ei(e){ie(hn),Dn===e&&(Dn=null),ie(Xt)}var Xt=Bn(0);function hc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||np(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Sd(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:St({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Je(),s=qi(i);s.payload=t,n!=null&&(s.callback=n),t=Gi(e,s,i),t!==null&&(tn(t,e,i),go(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Je(),s=qi(i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Gi(e,s,i),t!==null&&(tn(t,e,i),go(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Je(),i=qi(n);i.tag=2,t!=null&&(i.callback=t),t=Gi(e,i,n),t!==null&&(tn(t,e,n),go(t,e,n))}};function ky(e,t,n,i,s,r,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,a):t.prototype&&t.prototype.isPureReactComponent?!Po(n,i)||!Po(s,r):!0}function My(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&zf.enqueueReplaceState(t,t.state,null)}function $s(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=St({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}var dc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function uT(e){dc(e)}function cT(e){console.error(e)}function hT(e){dc(e)}function fc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Py(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Bf(e,t,n){return n=qi(n),n.tag=3,n.payload={element:null},n.callback=function(){fc(e,t)},n}function dT(e){return e=qi(e),e.tag=3,e}function fT(e,t,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;e.payload=function(){return s(r)},e.callback=function(){Py(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Py(t,n,i),typeof s!="function"&&($i===null?$i=new Set([this]):$i.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function WI(e,t,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&cl(t,n,s,!0),n=hn.current,n!==null){switch(n.tag){case 13:return Dn===null?Yf():n.alternate===null&&Pt===0&&(Pt=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===kf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Pd(e,i,s)),!1;case 22:return n.flags|=65536,i===kf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Pd(e,i,s)),!1}throw Error(j(435,n.tag))}return Pd(e,i,s),Yf(),!1}if(ut)return t=hn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==Cf&&(e=Error(j(422),{cause:i}),Vo(ln(e,n)))):(i!==Cf&&(t=Error(j(423),{cause:i}),Vo(ln(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,i=ln(i,n),s=Bf(e.stateNode,i,s),bd(e,s),Pt!==4&&(Pt=2)),!1;var r=Error(j(520),{cause:i});if(r=ln(r,n),bo===null?bo=[r]:bo.push(r),Pt!==4&&(Pt=2),t===null)return!0;i=ln(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=Bf(n.stateNode,i,e),bd(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&($i===null||!$i.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=dT(s),fT(s,e,n,i),bd(n,s),!1}n=n.return}while(n!==null);return!1}var pT=Error(j(461)),ne=!1;function ae(e,t,n,i){t.child=e===null?oT(t,null,n,i):sa(t,e.child,n,i)}function Vy(e,t,n,i,s){n=n.render;var r=t.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return qs(t),i=um(e,t,n,a,r,s),o=cm(),e!==null&&!ne?(hm(e,t,s),ci(e,t,s)):(ut&&o&&nm(t),t.flags|=1,ae(e,t,i,s),t.child)}function Ly(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!em(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,mT(e,t,r,i,s)):(e=Nu(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Em(e,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:Po,n(a,i)&&e.ref===t.ref)return ci(e,t,s)}return t.flags|=1,e=si(r,i),e.ref=t.ref,e.return=t,t.child=e}function mT(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if(Po(r,i)&&e.ref===t.ref)if(ne=!1,t.pendingProps=i=r,Em(e,s))e.flags&131072&&(ne=!0);else return t.lanes=e.lanes,ci(e,t,s)}return Ff(e,t,n,i,s)}function gT(e,t,n){var i=t.pendingProps,s=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=r!==null?r.baseLanes|n:n,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return Uy(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Du(t,r!==null?r.cachePool:null),r!==null?wy(t,r):Vf(),lT(t);else return t.lanes=t.childLanes=536870912,Uy(e,t,r!==null?r.baseLanes|n:n,n)}else r!==null?(Du(t,r.cachePool),wy(t,r),Ni(),t.memoizedState=null):(e!==null&&Du(t,null),Vf(),Ni());return ae(e,t,s,n),t.child}function Uy(e,t,n,i){var s=rm();return s=s===null?null:{parent:Yt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&Du(t,null),Vf(),lT(t),e!==null&&cl(e,t,i,!0),null}function Pu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(j(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ff(e,t,n,i,s){return qs(t),n=um(e,t,n,i,void 0,s),i=cm(),e!==null&&!ne?(hm(e,t,s),ci(e,t,s)):(ut&&i&&nm(t),t.flags|=1,ae(e,t,n,s),t.child)}function jy(e,t,n,i,s,r){return qs(t),t.updateQueue=null,n=xE(t,i,n,s),CE(e),i=cm(),e!==null&&!ne?(hm(e,t,r),ci(e,t,r)):(ut&&i&&nm(t),t.flags|=1,ae(e,t,n,r),t.child)}function zy(e,t,n,i,s){if(qs(t),t.stateNode===null){var r=Pr,a=n.contextType;typeof a=="object"&&a!==null&&(r=Ee(a)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=zf,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},am(t),a=n.contextType,r.context=typeof a=="object"&&a!==null?Ee(a):Pr,r.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Sd(t,n,a,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&zf.enqueueReplaceState(r,r.state,null),yo(t,i,r,s),_o(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var o=t.memoizedProps,u=$s(n,o);r.props=u;var c=r.context,d=n.contextType;a=Pr,typeof d=="object"&&d!==null&&(a=Ee(d));var m=n.getDerivedStateFromProps;d=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function",o=t.pendingProps!==o,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o||c!==a)&&My(t,r,i,a),Ci=!1;var p=t.memoizedState;r.state=p,yo(t,i,r,s),_o(),c=t.memoizedState,o||p!==c||Ci?(typeof m=="function"&&(Sd(t,n,m,i),c=t.memoizedState),(u=Ci||ky(t,n,u,i,p,c,a))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),r.props=i,r.state=c,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,Mf(e,t),a=t.memoizedProps,d=$s(n,a),r.props=d,m=t.pendingProps,p=r.context,c=n.contextType,u=Pr,typeof c=="object"&&c!==null&&(u=Ee(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==m||p!==u)&&My(t,r,i,u),Ci=!1,p=t.memoizedState,r.state=p,yo(t,i,r,s),_o();var v=t.memoizedState;a!==m||p!==v||Ci||e!==null&&e.dependencies!==null&&ac(e.dependencies)?(typeof o=="function"&&(Sd(t,n,o,i),v=t.memoizedState),(d=Ci||ky(t,n,d,i,p,v,u)||e!==null&&e.dependencies!==null&&ac(e.dependencies))?(c||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,v,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,v,u)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=v),r.props=i,r.state=v,r.context=u,i=d):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,Pu(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=sa(t,e.child,null,s),t.child=sa(t,null,n,s)):ae(e,t,n,s),t.memoizedState=r.state,e=t.child):e=ci(e,t,s),e}function By(e,t,n,i){return ul(),t.flags|=256,ae(e,t,n,i),t.child}var wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rd(e){return{baseLanes:e,cachePool:AE()}}function Id(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=cn),e}function _T(e,t,n){var i=t.pendingProps,s=!1,r=(t.flags&128)!==0,a;if((a=r)||(a=e!==null&&e.memoizedState===null?!1:(Xt.current&2)!==0),a&&(s=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(ut){if(s?Oi(t):Ni(),ut){var o=Mt,u;if(u=o){t:{for(u=o,o=In;u.nodeType!==8;){if(!o){o=null;break t}if(u=yn(u.nextSibling),u===null){o=null;break t}}o=u}o!==null?(t.memoizedState={dehydrated:o,treeContext:Ms!==null?{id:Zn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},u=$e(18,null,null,0),u.stateNode=o,u.return=t,t.child=u,Re=t,Mt=null,u=!0):u=!1}u||Hs(t)}if(o=t.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return np(o)?t.lanes=32:t.lanes=536870912,null;ei(t)}return o=i.children,i=i.fallback,s?(Ni(),s=t.mode,o=pc({mode:"hidden",children:o},s),i=ks(i,s,n,null),o.return=t,i.return=t,o.sibling=i,t.child=o,s=t.child,s.memoizedState=Rd(n),s.childLanes=Id(e,a,n),t.memoizedState=wd,i):(Oi(t),Hf(t,o))}if(u=e.memoizedState,u!==null&&(o=u.dehydrated,o!==null)){if(r)t.flags&256?(Oi(t),t.flags&=-257,t=Cd(e,t,n)):t.memoizedState!==null?(Ni(),t.child=e.child,t.flags|=128,t=null):(Ni(),s=i.fallback,o=t.mode,i=pc({mode:"visible",children:i.children},o),s=ks(s,o,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,sa(t,e.child,null,n),i=t.child,i.memoizedState=Rd(n),i.childLanes=Id(e,a,n),t.memoizedState=wd,t=s);else if(Oi(t),np(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(j(419)),i.stack="",i.digest=a,Vo({value:i,source:null,stack:null}),t=Cd(e,t,n)}else if(ne||cl(e,t,n,!1),a=(n&e.childLanes)!==0,ne||a){if(a=Et,a!==null&&(i=n&-n,i=i&42?1:qp(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,_a(e,i),tn(a,e,i),pT;o.data==="$?"||Yf(),t=Cd(e,t,n)}else o.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Mt=yn(o.nextSibling),Re=t,ut=!0,Ps=null,In=!1,e!==null&&(rn[an++]=Zn,rn[an++]=Jn,rn[an++]=Ms,Zn=e.id,Jn=e.overflow,Ms=t),t=Hf(t,i.children),t.flags|=4096);return t}return s?(Ni(),s=i.fallback,o=t.mode,u=e.child,c=u.sibling,i=si(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,c!==null?s=si(c,s):(s=ks(s,o,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=e.child.memoizedState,o===null?o=Rd(n):(u=o.cachePool,u!==null?(c=Yt._currentValue,u=u.parent!==c?{parent:c,pool:c}:u):u=AE(),o={baseLanes:o.baseLanes|n,cachePool:u}),s.memoizedState=o,s.childLanes=Id(e,a,n),t.memoizedState=wd,i):(Oi(t),n=e.child,e=n.sibling,n=si(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Hf(e,t){return t=pc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function pc(e,t){return e=$e(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Cd(e,t,n){return sa(t,e.child,null,n),e=Hf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Of(e.return,t,n)}function xd(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function yT(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(ae(e,t,i.children,n),i=Xt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fy(e,n,t);else if(e.tag===19)Fy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(xt(Xt,i),s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&hc(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),xd(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&hc(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}xd(t,!0,n,null,r);break;case"together":xd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ci(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),is|=t.lanes,!(n&t.childLanes))if(e!==null){if(cl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(j(153));if(t.child!==null){for(e=t.child,n=si(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=si(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Em(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&ac(e)))}function ZI(e,t,n){switch(t.tag){case 3:Zu(t,t.stateNode.containerInfo),xi(t,Yt,e.memoizedState.cache),ul();break;case 27:case 5:yf(t);break;case 4:Zu(t,t.stateNode.containerInfo);break;case 10:xi(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Oi(t),t.flags|=128,null):n&t.child.childLanes?_T(e,t,n):(Oi(t),e=ci(e,t,n),e!==null?e.sibling:null);Oi(t);break;case 19:var s=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(cl(e,t,n,!1),i=(n&t.childLanes)!==0),s){if(i)return yT(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xt(Xt,Xt.current),i)break;return null;case 22:case 23:return t.lanes=0,gT(e,t,n);case 24:xi(t,Yt,e.memoizedState.cache)}return ci(e,t,n)}function vT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ne=!0;else{if(!Em(e,n)&&!(t.flags&128))return ne=!1,ZI(e,t,n);ne=!!(e.flags&131072)}else ne=!1,ut&&t.flags&1048576&&TE(t,rc,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,typeof i=="function")em(i)?(e=$s(i,e),t.tag=1,t=zy(null,t,i,e,n)):(t.tag=0,t=Ff(null,t,i,e,n));else{if(i!=null){if(s=i.$$typeof,s===Bp){t.tag=11,t=Vy(null,t,i,e,n);break t}else if(s===Fp){t.tag=14,t=Ly(null,t,i,e,n);break t}}throw t=gf(i)||i,Error(j(306,t,""))}}return t;case 0:return Ff(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,s=$s(i,t.pendingProps),zy(e,t,i,s,n);case 3:t:{if(Zu(t,t.stateNode.containerInfo),e===null)throw Error(j(387));i=t.pendingProps;var r=t.memoizedState;s=r.element,Mf(e,t),yo(t,i,null,n);var a=t.memoizedState;if(i=a.cache,xi(t,Yt,i),i!==r.cache&&Nf(t,[Yt],n,!0),_o(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=By(e,t,i,n);break t}else if(i!==s){s=ln(Error(j(424)),t),Vo(s),t=By(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Mt=yn(e.firstChild),Re=t,ut=!0,Ps=null,In=!0,n=oT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ul(),i===s){t=ci(e,t,n);break t}ae(e,t,i,n)}t=t.child}return t;case 26:return Pu(e,t),e===null?(n=rv(t.type,null,t.pendingProps,null))?t.memoizedState=n:ut||(n=t.type,e=t.pendingProps,i=Tc(Hi.current).createElement(n),i[ve]=t,i[Le]=e,he(i,n,e),ee(i),t.stateNode=i):t.memoizedState=rv(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return yf(t),e===null&&ut&&(i=t.stateNode=rb(t.type,t.pendingProps,Hi.current),Re=t,In=!0,s=Mt,fs(t.type)?(ip=s,Mt=yn(i.firstChild)):Mt=s),ae(e,t,t.pendingProps.children,n),Pu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ut&&((s=i=Mt)&&(i=R2(i,t.type,t.pendingProps,In),i!==null?(t.stateNode=i,Re=t,Mt=yn(i.firstChild),In=!1,s=!0):s=!1),s||Hs(t)),yf(t),s=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,i=r.children,tp(s,r)?i=null:a!==null&&tp(s,a)&&(t.flags|=32),t.memoizedState!==null&&(s=um(e,t,qI,null,null,n),Fo._currentValue=s),Pu(e,t),ae(e,t,i,n),t.child;case 6:return e===null&&ut&&((e=n=Mt)&&(n=I2(n,t.pendingProps,In),n!==null?(t.stateNode=n,Re=t,Mt=null,e=!0):e=!1),e||Hs(t)),null;case 13:return _T(e,t,n);case 4:return Zu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=sa(t,null,i,n):ae(e,t,i,n),t.child;case 11:return Vy(e,t,t.type,t.pendingProps,n);case 7:return ae(e,t,t.pendingProps,n),t.child;case 8:return ae(e,t,t.pendingProps.children,n),t.child;case 12:return ae(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,xi(t,t.type,i.value),ae(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,qs(t),s=Ee(s),i=i(s),t.flags|=1,ae(e,t,i,n),t.child;case 14:return Ly(e,t,t.type,t.pendingProps,n);case 15:return mT(e,t,t.type,t.pendingProps,n);case 19:return yT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=pc(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=si(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return gT(e,t,n);case 24:return qs(t),i=Ee(Yt),e===null?(s=rm(),s===null&&(s=Et,r=sm(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:i,cache:s},am(t),xi(t,Yt,s)):(e.lanes&n&&(Mf(e,t),yo(t,null,null,n),_o()),s=e.memoizedState,r=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),xi(t,Yt,i)):(i=r.cache,xi(t,Yt,i),i!==s.cache&&Nf(t,[Yt],n,!0))),ae(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(j(156,t.tag))}function Qn(e){e.flags|=4}function Hy(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!lb(t)){if(t=hn.current,t!==null&&((ot&4194048)===ot?Dn!==null:(ot&62914560)!==ot&&!(ot&536870912)||t!==Dn))throw mo=kf,SE;e.flags|=8192}}function cu(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?G1():536870912,e.lanes|=t,ra|=t)}function $a(e,t){if(!ut)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function JI(e,t,n){var i=t.pendingProps;switch(im(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(t),null;case 1:return Ot(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ri(Yt),Zr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(qa(t)?Qn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vy())),Ot(t),null;case 26:return n=t.memoizedState,e===null?(Qn(t),n!==null?(Ot(t),Hy(t,n)):(Ot(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Qn(t),Ot(t),Hy(t,n)):(Ot(t),t.flags&=-16777217):(e.memoizedProps!==i&&Qn(t),Ot(t),t.flags&=-16777217),null;case 27:Ju(t),n=Hi.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(!i){if(t.stateNode===null)throw Error(j(166));return Ot(t),null}e=On.current,qa(t)?_y(t):(e=rb(s,i,n),t.stateNode=e,Qn(t))}return Ot(t),null;case 5:if(Ju(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(!i){if(t.stateNode===null)throw Error(j(166));return Ot(t),null}if(e=On.current,qa(t))_y(t);else{switch(s=Tc(Hi.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}e[ve]=t,e[Le]=i;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;t:switch(he(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Qn(t)}}return Ot(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(j(166));if(e=Hi.current,qa(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,s=Re,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}e[ve]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||nb(e.nodeValue,n)),e||Hs(t)}else e=Tc(e).createTextNode(i),e[ve]=t,t.stateNode=e}return Ot(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=qa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(j(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[ve]=t}else ul(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ot(t),s=!1}else s=vy(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(ei(t),t):(ei(t),null)}if(ei(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),cu(t,t.updateQueue),Ot(t),null;case 4:return Zr(),e===null&&Cm(t.stateNode.containerInfo),Ot(t),null;case 10:return ri(t.type),Ot(t),null;case 19:if(ie(Xt),s=t.memoizedState,s===null)return Ot(t),null;if(i=(t.flags&128)!==0,r=s.rendering,r===null)if(i)$a(s,!1);else{if(Pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=hc(e),r!==null){for(t.flags|=128,$a(s,!1),e=r.updateQueue,t.updateQueue=e,cu(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)EE(n,e),n=n.sibling;return xt(Xt,Xt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Nn()>gc&&(t.flags|=128,i=!0,$a(s,!1),t.lanes=4194304)}else{if(!i)if(e=hc(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,cu(t,e),$a(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!ut)return Ot(t),null}else 2*Nn()-s.renderingStartTime>gc&&n!==536870912&&(t.flags|=128,i=!0,$a(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Nn(),t.sibling=null,e=Xt.current,xt(Xt,i?e&1|2:e&1),t):(Ot(t),null);case 22:case 23:return ei(t),om(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Ot(t),t.subtreeFlags&6&&(t.flags|=8192)):Ot(t),n=t.updateQueue,n!==null&&cu(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&ie(Vs),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ri(Yt),Ot(t),null;case 25:return null;case 30:return null}throw Error(j(156,t.tag))}function t2(e,t){switch(im(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ri(Yt),Zr(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ju(t),null;case 13:if(ei(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(j(340));ul()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ie(Xt),null;case 4:return Zr(),null;case 10:return ri(t.type),null;case 22:case 23:return ei(t),om(),e!==null&&ie(Vs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ri(Yt),null;case 25:return null;default:return null}}function ET(e,t){switch(im(t),t.tag){case 3:ri(Yt),Zr();break;case 26:case 27:case 5:Ju(t);break;case 4:Zr();break;case 13:ei(t);break;case 19:ie(Xt);break;case 10:ri(t.type);break;case 22:case 23:ei(t),om(),e!==null&&ie(Vs);break;case 24:ri(Yt)}}function ml(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(o){yt(t,t.return,o)}}function ns(e,t,n){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&e)===e){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,s=t;var u=n,c=o;try{c()}catch(d){yt(s,u,d)}}}i=i.next}while(i!==r)}}catch(d){yt(t,t.return,d)}}function TT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{IE(t,n)}catch(i){yt(e,e.return,i)}}}function bT(e,t,n){n.props=$s(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){yt(e,t,i)}}function Eo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(s){yt(e,t,s)}}function Cn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){yt(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){yt(e,t,s)}else n.current=null}function AT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){yt(e,e.return,s)}}function Od(e,t,n){try{var i=e.stateNode;T2(i,e.type,n,t),i[Le]=t}catch(s){yt(e,e.return,s)}}function ST(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fs(e.type)||e.tag===4}function Nd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||ST(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=dh));else if(i!==4&&(i===27&&fs(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(qf(e,t,n),e=e.sibling;e!==null;)qf(e,t,n),e=e.sibling}function mc(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&fs(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(mc(e,t,n),e=e.sibling;e!==null;)mc(e,t,n),e=e.sibling}function wT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);he(t,i,n),t[ve]=e,t[Le]=n}catch(r){yt(e,e.return,r)}}var Xn=!1,Bt=!1,Dd=!1,qy=typeof WeakSet=="function"?WeakSet:Set,te=null;function e2(e,t){if(e=e.containerInfo,Zf=wc,e=dE(e),Zp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var a=0,o=-1,u=-1,c=0,d=0,m=e,p=null;e:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(o=a+s),m!==r||i!==0&&m.nodeType!==3||(u=a+i),m.nodeType===3&&(a+=m.nodeValue.length),(v=m.firstChild)!==null;)p=m,m=v;for(;;){if(m===e)break e;if(p===n&&++c===s&&(o=a),p===r&&++d===i&&(u=a),(v=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=v}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jf={focusedElem:e,selectionRange:n},wc=!1,te=t;te!==null;)if(t=te,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,te=e;else for(;te!==null;){switch(t=te,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var R=$s(n.type,s,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(R,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(O){yt(n,n.return,O)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ep(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ep(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(j(163))}if(e=t.sibling,e!==null){e.return=t.return,te=e;break}te=t.return}}function RT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ai(e,n),i&4&&ml(5,n);break;case 1:if(Ai(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){yt(n,n.return,a)}else{var s=$s(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){yt(n,n.return,a)}}i&64&&TT(n),i&512&&Eo(n,n.return);break;case 3:if(Ai(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{IE(e,t)}catch(a){yt(n,n.return,a)}}break;case 27:t===null&&i&4&&wT(n);case 26:case 5:Ai(e,n),t===null&&i&4&&AT(n),i&512&&Eo(n,n.return);break;case 12:Ai(e,n);break;case 13:Ai(e,n),i&4&&xT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=c2.bind(null,n),C2(e,n))));break;case 22:if(i=n.memoizedState!==null||Xn,!i){t=t!==null&&t.memoizedState!==null||Bt,s=Xn;var r=Bt;Xn=i,(Bt=t)&&!r?Ri(e,n,(n.subtreeFlags&8772)!==0):Ai(e,n),Xn=s,Bt=r}break;case 30:break;default:Ai(e,n)}}function IT(e){var t=e.alternate;t!==null&&(e.alternate=null,IT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&$p(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var It=null,Ne=!1;function Yn(e,t,n){for(n=n.child;n!==null;)CT(e,t,n),n=n.sibling}function CT(e,t,n){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(sl,n)}catch{}switch(n.tag){case 26:Bt||Cn(n,t),Yn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Bt||Cn(n,t);var i=It,s=Ne;fs(n.type)&&(It=n.stateNode,Ne=!1),Yn(e,t,n),So(n.stateNode),It=i,Ne=s;break;case 5:Bt||Cn(n,t);case 6:if(i=It,s=Ne,It=null,Yn(e,t,n),It=i,Ne=s,It!==null)if(Ne)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(n.stateNode)}catch(r){yt(n,t,r)}else try{It.removeChild(n.stateNode)}catch(r){yt(n,t,r)}break;case 18:It!==null&&(Ne?(e=It,nv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Go(e)):nv(It,n.stateNode));break;case 4:i=It,s=Ne,It=n.stateNode.containerInfo,Ne=!0,Yn(e,t,n),It=i,Ne=s;break;case 0:case 11:case 14:case 15:Bt||ns(2,n,t),Bt||ns(4,n,t),Yn(e,t,n);break;case 1:Bt||(Cn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&bT(n,t,i)),Yn(e,t,n);break;case 21:Yn(e,t,n);break;case 22:Bt=(i=Bt)||n.memoizedState!==null,Yn(e,t,n),Bt=i;break;default:Yn(e,t,n)}}function xT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Go(e)}catch(n){yt(t,t.return,n)}}function n2(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new qy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new qy),t;default:throw Error(j(435,e.tag))}}function kd(e,t){var n=n2(e);t.forEach(function(i){var s=h2.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}function Fe(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=e,a=t,o=a;t:for(;o!==null;){switch(o.tag){case 27:if(fs(o.type)){It=o.stateNode,Ne=!1;break t}break;case 5:It=o.stateNode,Ne=!1;break t;case 3:case 4:It=o.stateNode.containerInfo,Ne=!0;break t}o=o.return}if(It===null)throw Error(j(160));CT(r,a,s),It=null,Ne=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)OT(t,e),t=t.sibling}var gn=null;function OT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Fe(t,e),He(e),i&4&&(ns(3,e,e.return),ml(3,e),ns(5,e,e.return));break;case 1:Fe(t,e),He(e),i&512&&(Bt||n===null||Cn(n,n.return)),i&64&&Xn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=gn;if(Fe(t,e),He(e),i&512&&(Bt||n===null||Cn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;e:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[ol]||r[ve]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),he(r,i,n),r[ve]=e,ee(r),i=r;break t;case"link":var a=ov("link","href",s).get(i+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(r=a[o],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break e}}r=s.createElement(i),he(r,i,n),s.head.appendChild(r);break;case"meta":if(a=ov("meta","content",s).get(i+(n.content||""))){for(o=0;o<a.length;o++)if(r=a[o],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break e}}r=s.createElement(i),he(r,i,n),s.head.appendChild(r);break;default:throw Error(j(468,i))}r[ve]=e,ee(r),i=r}e.stateNode=i}else lv(s,e.type,e.stateNode);else e.stateNode=av(s,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?lv(s,e.type,e.stateNode):av(s,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Od(e,e.memoizedProps,n.memoizedProps)}break;case 27:Fe(t,e),He(e),i&512&&(Bt||n===null||Cn(n,n.return)),n!==null&&i&4&&Od(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Fe(t,e),He(e),i&512&&(Bt||n===null||Cn(n,n.return)),e.flags&32){s=e.stateNode;try{ta(s,"")}catch(v){yt(e,e.return,v)}}i&4&&e.stateNode!=null&&(s=e.memoizedProps,Od(e,s,n!==null?n.memoizedProps:s)),i&1024&&(Dd=!0);break;case 6:if(Fe(t,e),He(e),i&4){if(e.stateNode===null)throw Error(j(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(v){yt(e,e.return,v)}}break;case 3:if(Uu=null,s=gn,gn=bc(t.containerInfo),Fe(t,e),gn=s,He(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Go(t.containerInfo)}catch(v){yt(e,e.return,v)}Dd&&(Dd=!1,NT(e));break;case 4:i=gn,gn=bc(e.stateNode.containerInfo),Fe(t,e),He(e),gn=i;break;case 12:Fe(t,e),He(e);break;case 13:Fe(t,e),He(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(wm=Nn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,kd(e,i)));break;case 22:s=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,c=Xn,d=Bt;if(Xn=c||s,Bt=d||u,Fe(t,e),Bt=d,Xn=c,He(e),i&8192)t:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||u||Xn||Bt||xs(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(r=u.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=u.stateNode;var m=u.memoizedProps.style,p=m!=null&&m.hasOwnProperty("display")?m.display:null;o.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(v){yt(u,u.return,v)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(v){yt(u,u.return,v)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,kd(e,n))));break;case 19:Fe(t,e),He(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,kd(e,i)));break;case 30:break;case 21:break;default:Fe(t,e),He(e)}}function He(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(ST(i)){n=i;break}i=i.return}if(n==null)throw Error(j(160));switch(n.tag){case 27:var s=n.stateNode,r=Nd(e);mc(e,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(ta(a,""),n.flags&=-33);var o=Nd(e);mc(e,o,a);break;case 3:case 4:var u=n.stateNode.containerInfo,c=Nd(e);qf(e,c,u);break;default:throw Error(j(161))}}catch(d){yt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function NT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;NT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ai(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)RT(e,t.alternate,t),t=t.sibling}function xs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ns(4,t,t.return),xs(t);break;case 1:Cn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&bT(t,t.return,n),xs(t);break;case 27:So(t.stateNode);case 26:case 5:Cn(t,t.return),xs(t);break;case 22:t.memoizedState===null&&xs(t);break;case 30:xs(t);break;default:xs(t)}e=e.sibling}}function Ri(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,s=e,r=t,a=r.flags;switch(r.tag){case 0:case 11:case 15:Ri(s,r,n),ml(4,r);break;case 1:if(Ri(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(c){yt(i,i.return,c)}if(i=r,s=i.updateQueue,s!==null){var o=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)RE(u[s],o)}catch(c){yt(i,i.return,c)}}n&&a&64&&TT(r),Eo(r,r.return);break;case 27:wT(r);case 26:case 5:Ri(s,r,n),n&&i===null&&a&4&&AT(r),Eo(r,r.return);break;case 12:Ri(s,r,n);break;case 13:Ri(s,r,n),n&&a&4&&xT(s,r);break;case 22:r.memoizedState===null&&Ri(s,r,n),Eo(r,r.return);break;case 30:break;default:Ri(s,r,n)}t=t.sibling}}function Tm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&hl(n))}function bm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hl(e))}function Sn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)DT(e,t,n,i),t=t.sibling}function DT(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Sn(e,t,n,i),s&2048&&ml(9,t);break;case 1:Sn(e,t,n,i);break;case 3:Sn(e,t,n,i),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hl(e)));break;case 12:if(s&2048){Sn(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,a=r.id,o=r.onPostCommit;typeof o=="function"&&o(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){yt(t,t.return,u)}}else Sn(e,t,n,i);break;case 13:Sn(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,a=t.alternate,t.memoizedState!==null?r._visibility&2?Sn(e,t,n,i):To(e,t):r._visibility&2?Sn(e,t,n,i):(r._visibility|=2,Tr(e,t,n,i,(t.subtreeFlags&10256)!==0)),s&2048&&Tm(a,t);break;case 24:Sn(e,t,n,i),s&2048&&bm(t.alternate,t);break;default:Sn(e,t,n,i)}}function Tr(e,t,n,i,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,a=t,o=n,u=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:Tr(r,a,o,u,s),ml(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?Tr(r,a,o,u,s):To(r,a):(d._visibility|=2,Tr(r,a,o,u,s)),s&&c&2048&&Tm(a.alternate,a);break;case 24:Tr(r,a,o,u,s),s&&c&2048&&bm(a.alternate,a);break;default:Tr(r,a,o,u,s)}t=t.sibling}}function To(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:To(n,i),s&2048&&Tm(i.alternate,i);break;case 24:To(n,i),s&2048&&bm(i.alternate,i);break;default:To(n,i)}t=t.sibling}}var eo=8192;function gr(e){if(e.subtreeFlags&eo)for(e=e.child;e!==null;)kT(e),e=e.sibling}function kT(e){switch(e.tag){case 26:gr(e),e.flags&eo&&e.memoizedState!==null&&B2(gn,e.memoizedState,e.memoizedProps);break;case 5:gr(e);break;case 3:case 4:var t=gn;gn=bc(e.stateNode.containerInfo),gr(e),gn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=eo,eo=16777216,gr(e),eo=t):gr(e));break;default:gr(e)}}function MT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ka(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];te=i,VT(i,e)}MT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)PT(e),e=e.sibling}function PT(e){switch(e.tag){case 0:case 11:case 15:Ka(e),e.flags&2048&&ns(9,e,e.return);break;case 3:Ka(e);break;case 12:Ka(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Vu(e)):Ka(e);break;default:Ka(e)}}function Vu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];te=i,VT(i,e)}MT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ns(8,t,t.return),Vu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Vu(t));break;default:Vu(t)}e=e.sibling}}function VT(e,t){for(;te!==null;){var n=te;switch(n.tag){case 0:case 11:case 15:ns(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:hl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,te=i;else t:for(n=e;te!==null;){i=te;var s=i.sibling,r=i.return;if(IT(i),i===n){te=null;break t}if(s!==null){s.return=r,te=s;break t}te=r}}}var i2={getCacheForType:function(e){var t=Ee(Yt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},s2=typeof WeakMap=="function"?WeakMap:Map,pt=0,Et=null,it=null,ot=0,ft=0,Ge=null,zi=!1,ya=!1,Am=!1,hi=0,Pt=0,is=0,Ls=0,Sm=0,cn=0,ra=0,bo=null,De=null,Gf=!1,wm=0,gc=1/0,_c=null,$i=null,le=0,Ki=null,aa=null,Kr=0,$f=0,Kf=null,LT=null,Ao=0,Qf=null;function Je(){if(pt&2&&ot!==0)return ot&-ot;if(Q.T!==null){var e=ea;return e!==0?e:Im()}return Q1()}function UT(){cn===0&&(cn=!(ot&536870912)||ut?q1():536870912);var e=hn.current;return e!==null&&(e.flags|=32),cn}function tn(e,t,n){(e===Et&&(ft===2||ft===9)||e.cancelPendingCommit!==null)&&(oa(e,0),Bi(e,ot,cn,!1)),al(e,n),(!(pt&2)||e!==Et)&&(e===Et&&(!(pt&2)&&(Ls|=n),Pt===4&&Bi(e,ot,cn,!1)),Fn(e))}function jT(e,t,n){if(pt&6)throw Error(j(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||rl(e,t),s=i?o2(e,t):Md(e,t,!0),r=i;do{if(s===0){ya&&!i&&Bi(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!r2(n)){s=Md(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var o=e;s=bo;var u=o.current.memoizedState.isDehydrated;if(u&&(oa(o,a).flags|=256),a=Md(o,a,!1),a!==2){if(Am&&!u){o.errorRecoveryDisabledLanes|=r,Ls|=r,s=4;break t}r=De,De=s,r!==null&&(De===null?De=r:De.push.apply(De,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){oa(e,0),Bi(e,t,0,!0);break}t:{switch(i=e,r=s,r){case 0:case 1:throw Error(j(345));case 4:if((t&4194048)!==t)break;case 6:Bi(i,t,cn,!zi);break t;case 2:De=null;break;case 3:case 5:break;default:throw Error(j(329))}if((t&62914560)===t&&(s=wm+300-Nn(),10<s)){if(Bi(i,t,cn,!zi),Jc(i,0,!0)!==0)break t;i.timeoutHandle=sb(Gy.bind(null,i,n,De,_c,Gf,t,cn,Ls,ra,zi,r,2,-0,0),s);break t}Gy(i,n,De,_c,Gf,t,cn,Ls,ra,zi,r,0,-0,0)}}break}while(1);Fn(e)}function Gy(e,t,n,i,s,r,a,o,u,c,d,m,p,v){if(e.timeoutHandle=-1,m=t.subtreeFlags,(m&8192||(m&16785408)===16785408)&&(Bo={stylesheets:null,count:0,unsuspend:z2},kT(t),m=F2(),m!==null)){e.cancelPendingCommit=m(Ky.bind(null,e,t,r,n,i,s,a,o,u,d,1,p,v)),Bi(e,r,a,!c);return}Ky(e,t,r,n,i,s,a,o,u)}function r2(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!en(r(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bi(e,t,n,i){t&=~Sm,t&=~Ls,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var r=31-Ze(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&$1(e,n,t)}function uh(){return pt&6?!0:(gl(0,!1),!1)}function Rm(){if(it!==null){if(ft===0)var e=it.return;else e=it,ti=sr=null,dm(e),$r=null,Uo=0,e=it;for(;e!==null;)ET(e.alternate,e),e=e.return;it=null}}function oa(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,A2(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Rm(),Et=e,it=n=si(e.current,null),ot=t,ft=0,Ge=null,zi=!1,ya=rl(e,t),Am=!1,ra=cn=Sm=Ls=is=Pt=0,De=bo=null,Gf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var s=31-Ze(i),r=1<<s;t|=e[s],i&=~r}return hi=t,ih(),n}function zT(e,t){et=null,Q.H=cc,t===dl||t===rh?(t=Ay(),ft=3):t===SE?(t=Ay(),ft=4):ft=t===pT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ge=t,it===null&&(Pt=1,fc(e,ln(t,e.current)))}function BT(){var e=Q.H;return Q.H=cc,e===null?cc:e}function FT(){var e=Q.A;return Q.A=i2,e}function Yf(){Pt=4,zi||(ot&4194048)!==ot&&hn.current!==null||(ya=!0),!(is&134217727)&&!(Ls&134217727)||Et===null||Bi(Et,ot,cn,!1)}function Md(e,t,n){var i=pt;pt|=2;var s=BT(),r=FT();(Et!==e||ot!==t)&&(_c=null,oa(e,t)),t=!1;var a=Pt;t:do try{if(ft!==0&&it!==null){var o=it,u=Ge;switch(ft){case 8:Rm(),a=6;break t;case 3:case 2:case 9:case 6:hn.current===null&&(t=!0);var c=ft;if(ft=0,Ge=null,Ur(e,o,u,c),n&&ya){a=0;break t}break;default:c=ft,ft=0,Ge=null,Ur(e,o,u,c)}}a2(),a=Pt;break}catch(d){zT(e,d)}while(1);return t&&e.shellSuspendCounter++,ti=sr=null,pt=i,Q.H=s,Q.A=r,it===null&&(Et=null,ot=0,ih()),a}function a2(){for(;it!==null;)HT(it)}function o2(e,t){var n=pt;pt|=2;var i=BT(),s=FT();Et!==e||ot!==t?(_c=null,gc=Nn()+500,oa(e,t)):ya=rl(e,t);t:do try{if(ft!==0&&it!==null){t=it;var r=Ge;e:switch(ft){case 1:ft=0,Ge=null,Ur(e,t,r,1);break;case 2:case 9:if(by(r)){ft=0,Ge=null,$y(t);break}t=function(){ft!==2&&ft!==9||Et!==e||(ft=7),Fn(e)},r.then(t,t);break t;case 3:ft=7;break t;case 4:ft=5;break t;case 7:by(r)?(ft=0,Ge=null,$y(t)):(ft=0,Ge=null,Ur(e,t,r,7));break;case 5:var a=null;switch(it.tag){case 26:a=it.memoizedState;case 5:case 27:var o=it;if(!a||lb(a)){ft=0,Ge=null;var u=o.sibling;if(u!==null)it=u;else{var c=o.return;c!==null?(it=c,ch(c)):it=null}break e}}ft=0,Ge=null,Ur(e,t,r,5);break;case 6:ft=0,Ge=null,Ur(e,t,r,6);break;case 8:Rm(),Pt=6;break t;default:throw Error(j(462))}}l2();break}catch(d){zT(e,d)}while(1);return ti=sr=null,Q.H=i,Q.A=s,pt=n,it!==null?0:(Et=null,ot=0,ih(),Pt)}function l2(){for(;it!==null&&!OR();)HT(it)}function HT(e){var t=vT(e.alternate,e,hi);e.memoizedProps=e.pendingProps,t===null?ch(e):it=t}function $y(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=jy(n,t,t.pendingProps,t.type,void 0,ot);break;case 11:t=jy(n,t,t.pendingProps,t.type.render,t.ref,ot);break;case 5:dm(t);default:ET(n,t),t=it=EE(t,hi),t=vT(n,t,hi)}e.memoizedProps=e.pendingProps,t===null?ch(e):it=t}function Ur(e,t,n,i){ti=sr=null,dm(t),$r=null,Uo=0;var s=t.return;try{if(WI(e,s,t,n,ot)){Pt=1,fc(e,ln(n,e.current)),it=null;return}}catch(r){if(s!==null)throw it=s,r;Pt=1,fc(e,ln(n,e.current)),it=null;return}t.flags&32768?(ut||i===1?e=!0:ya||ot&536870912?e=!1:(zi=e=!0,(i===2||i===9||i===3||i===6)&&(i=hn.current,i!==null&&i.tag===13&&(i.flags|=16384))),qT(t,e)):ch(t)}function ch(e){var t=e;do{if(t.flags&32768){qT(t,zi);return}e=t.return;var n=JI(t.alternate,t,hi);if(n!==null){it=n;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);Pt===0&&(Pt=5)}function qT(e,t){do{var n=t2(e.alternate,e);if(n!==null){n.flags&=32767,it=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){it=e;return}it=e=n}while(e!==null);Pt=6,it=null}function Ky(e,t,n,i,s,r,a,o,u){e.cancelPendingCommit=null;do hh();while(le!==0);if(pt&6)throw Error(j(327));if(t!==null){if(t===e.current)throw Error(j(177));if(r=t.lanes|t.childLanes,r|=Jp,zR(e,n,r,a,o,u),e===Et&&(it=Et=null,ot=0),aa=t,Ki=e,Kr=n,$f=r,Kf=s,LT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,d2(tc,function(){return YT(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Q.T,Q.T=null,s=ct.p,ct.p=2,a=pt,pt|=4;try{e2(e,t,n)}finally{pt=a,ct.p=s,Q.T=i}}le=1,GT(),$T(),KT()}}function GT(){if(le===1){le=0;var e=Ki,t=aa,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Q.T,Q.T=null;var i=ct.p;ct.p=2;var s=pt;pt|=4;try{OT(t,e);var r=Jf,a=dE(e.containerInfo),o=r.focusedElem,u=r.selectionRange;if(a!==o&&o&&o.ownerDocument&&hE(o.ownerDocument.documentElement,o)){if(u!==null&&Zp(o)){var c=u.start,d=u.end;if(d===void 0&&(d=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(d,o.value.length);else{var m=o.ownerDocument||document,p=m&&m.defaultView||window;if(p.getSelection){var v=p.getSelection(),R=o.textContent.length,O=Math.min(u.start,R),D=u.end===void 0?O:Math.min(u.end,R);!v.extend&&O>D&&(a=D,D=O,O=a);var T=py(o,O),_=py(o,D);if(T&&_&&(v.rangeCount!==1||v.anchorNode!==T.node||v.anchorOffset!==T.offset||v.focusNode!==_.node||v.focusOffset!==_.offset)){var A=m.createRange();A.setStart(T.node,T.offset),v.removeAllRanges(),O>D?(v.addRange(A),v.extend(_.node,_.offset)):(A.setEnd(_.node,_.offset),v.addRange(A))}}}}for(m=[],v=o;v=v.parentNode;)v.nodeType===1&&m.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<m.length;o++){var x=m[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}wc=!!Zf,Jf=Zf=null}finally{pt=s,ct.p=i,Q.T=n}}e.current=t,le=2}}function $T(){if(le===2){le=0;var e=Ki,t=aa,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Q.T,Q.T=null;var i=ct.p;ct.p=2;var s=pt;pt|=4;try{RT(e,t.alternate,t)}finally{pt=s,ct.p=i,Q.T=n}}le=3}}function KT(){if(le===4||le===3){le=0,NR();var e=Ki,t=aa,n=Kr,i=LT;t.subtreeFlags&10256||t.flags&10256?le=5:(le=0,aa=Ki=null,QT(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&($i=null),Gp(n),t=t.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(sl,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Q.T,s=ct.p,ct.p=2,Q.T=null;try{for(var r=e.onRecoverableError,a=0;a<i.length;a++){var o=i[a];r(o.value,{componentStack:o.stack})}}finally{Q.T=t,ct.p=s}}Kr&3&&hh(),Fn(e),s=e.pendingLanes,n&4194090&&s&42?e===Qf?Ao++:(Ao=0,Qf=e):Ao=0,gl(0,!1)}}function QT(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,hl(t)))}function hh(e){return GT(),$T(),KT(),YT()}function YT(){if(le!==5)return!1;var e=Ki,t=$f;$f=0;var n=Gp(Kr),i=Q.T,s=ct.p;try{ct.p=32>n?32:n,Q.T=null,n=Kf,Kf=null;var r=Ki,a=Kr;if(le=0,aa=Ki=null,Kr=0,pt&6)throw Error(j(331));var o=pt;if(pt|=4,PT(r.current),DT(r,r.current,a,n),pt=o,gl(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(sl,r)}catch{}return!0}finally{ct.p=s,Q.T=i,QT(e,t)}}function Qy(e,t,n){t=ln(n,t),t=Bf(e.stateNode,t,2),e=Gi(e,t,2),e!==null&&(al(e,2),Fn(e))}function yt(e,t,n){if(e.tag===3)Qy(e,e,n);else for(;t!==null;){if(t.tag===3){Qy(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($i===null||!$i.has(i))){e=ln(n,e),n=dT(2),i=Gi(t,n,2),i!==null&&(fT(n,i,t,e),al(i,2),Fn(i));break}}t=t.return}}function Pd(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new s2;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(Am=!0,s.add(n),e=u2.bind(null,e,t,n),t.then(e,e))}function u2(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Et===e&&(ot&n)===n&&(Pt===4||Pt===3&&(ot&62914560)===ot&&300>Nn()-wm?!(pt&2)&&oa(e,0):Sm|=n,ra===ot&&(ra=0)),Fn(e)}function XT(e,t){t===0&&(t=G1()),e=_a(e,t),e!==null&&(al(e,t),Fn(e))}function c2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),XT(e,n)}function h2(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(j(314))}i!==null&&i.delete(t),XT(e,n)}function d2(e,t){return Hp(e,t)}var yc=null,br=null,Xf=!1,vc=!1,Vd=!1,Us=0;function Fn(e){e!==br&&e.next===null&&(br===null?yc=br=e:br=br.next=e),vc=!0,Xf||(Xf=!0,p2())}function gl(e,t){if(!Vd&&vc){Vd=!0;do for(var n=!1,i=yc;i!==null;){if(!t)if(e!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,o=i.pingedLanes;r=(1<<31-Ze(42|e)+1)-1,r&=s&~(a&~o),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Yy(i,r))}else r=ot,r=Jc(i,i===Et?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||rl(i,r)||(n=!0,Yy(i,r));i=i.next}while(n);Vd=!1}}function f2(){WT()}function WT(){vc=Xf=!1;var e=0;Us!==0&&(b2()&&(e=Us),Us=0);for(var t=Nn(),n=null,i=yc;i!==null;){var s=i.next,r=ZT(i,t);r===0?(i.next=null,n===null?yc=s:n.next=s,s===null&&(br=n)):(n=i,(e!==0||r&3)&&(vc=!0)),i=s}gl(e,!1)}function ZT(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var a=31-Ze(r),o=1<<a,u=s[a];u===-1?(!(o&n)||o&i)&&(s[a]=jR(o,t)):u<=t&&(e.expiredLanes|=o),r&=~o}if(t=Et,n=ot,n=Jc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(ft===2||ft===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&ld(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||rl(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&ld(i),Gp(n)){case 2:case 8:n=F1;break;case 32:n=tc;break;case 268435456:n=H1;break;default:n=tc}return i=JT.bind(null,e),n=Hp(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&ld(i),e.callbackPriority=2,e.callbackNode=null,2}function JT(e,t){if(le!==0&&le!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(hh()&&e.callbackNode!==n)return null;var i=ot;return i=Jc(e,e===Et?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(jT(e,i,t),ZT(e,Nn()),e.callbackNode!=null&&e.callbackNode===n?JT.bind(null,e):null)}function Yy(e,t){if(hh())return null;jT(e,t,!0)}function p2(){S2(function(){pt&6?Hp(B1,f2):WT()})}function Im(){return Us===0&&(Us=q1()),Us}function Xy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Cu(""+e)}function Wy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function m2(e,t,n,i,s){if(t==="submit"&&n&&n.stateNode===s){var r=Xy((s[Le]||null).action),a=i.submitter;a&&(t=(t=a[Le]||null)?Xy(t.formAction):a.getAttribute("formAction"),t!==null&&(r=t,a=null));var o=new th("action","action",null,i,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Us!==0){var u=a?Wy(s,a):new FormData(s);jf(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(o.preventDefault(),u=a?Wy(s,a):new FormData(s),jf(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var Ld=0;Ld<If.length;Ld++){var Ud=If[Ld],g2=Ud.toLowerCase(),_2=Ud[0].toUpperCase()+Ud.slice(1);bn(g2,"on"+_2)}bn(pE,"onAnimationEnd");bn(mE,"onAnimationIteration");bn(gE,"onAnimationStart");bn("dblclick","onDoubleClick");bn("focusin","onFocus");bn("focusout","onBlur");bn(MI,"onTransitionRun");bn(PI,"onTransitionStart");bn(VI,"onTransitionCancel");bn(_E,"onTransitionEnd");Jr("onMouseEnter",["mouseout","mouseover"]);Jr("onMouseLeave",["mouseout","mouseover"]);Jr("onPointerEnter",["pointerout","pointerover"]);Jr("onPointerLeave",["pointerout","pointerover"]);er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));er("onBeforeInput",["compositionend","keypress","textInput","paste"]);er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jo));function tb(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==r&&s.isPropagationStopped())break t;r=o,s.currentTarget=c;try{r(s)}catch(d){dc(d)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(o=i[a],u=o.instance,c=o.currentTarget,o=o.listener,u!==r&&s.isPropagationStopped())break t;r=o,s.currentTarget=c;try{r(s)}catch(d){dc(d)}s.currentTarget=null,r=u}}}}function nt(e,t){var n=t[Ef];n===void 0&&(n=t[Ef]=new Set);var i=e+"__bubble";n.has(i)||(eb(t,e,2,!1),n.add(i))}function jd(e,t,n){var i=0;t&&(i|=4),eb(n,e,i,t)}var hu="_reactListening"+Math.random().toString(36).slice(2);function Cm(e){if(!e[hu]){e[hu]=!0,Y1.forEach(function(n){n!=="selectionchange"&&(y2.has(n)||jd(n,!1,e),jd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hu]||(t[hu]=!0,jd("selectionchange",!1,t))}}function eb(e,t,n,i){switch(fb(t)){case 2:var s=G2;break;case 8:s=$2;break;default:s=Dm}n=s.bind(null,t,n,e),s=void 0,!Sf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function zd(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;o!==null;){if(a=xr(o),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue t}o=o.parentNode}}i=i.return}iE(function(){var c=r,d=Qp(n),m=[];t:{var p=yE.get(e);if(p!==void 0){var v=th,R=e;switch(e){case"keypress":if(Ou(n)===0)break t;case"keydown":case"keyup":v=dI;break;case"focusin":R="focus",v=gd;break;case"focusout":R="blur",v=gd;break;case"beforeblur":case"afterblur":v=gd;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=sy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=tI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=mI;break;case pE:case mE:case gE:v=iI;break;case _E:v=_I;break;case"scroll":case"scrollend":v=ZR;break;case"wheel":v=vI;break;case"copy":case"cut":case"paste":v=rI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=ay;break;case"toggle":case"beforetoggle":v=TI}var O=(t&4)!==0,D=!O&&(e==="scroll"||e==="scrollend"),T=O?p!==null?p+"Capture":null:p;O=[];for(var _=c,A;_!==null;){var x=_;if(A=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||A===null||T===null||(x=ko(_,T),x!=null&&O.push(zo(_,x,A))),D)break;_=_.return}0<O.length&&(p=new v(p,R,null,n,d),m.push({event:p,listeners:O}))}}if(!(t&7)){t:{if(p=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",p&&n!==Af&&(R=n.relatedTarget||n.fromElement)&&(xr(R)||R[ma]))break t;if((v||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,v?(R=n.relatedTarget||n.toElement,v=c,R=R?xr(R):null,R!==null&&(D=il(R),O=R.tag,R!==D||O!==5&&O!==27&&O!==6)&&(R=null)):(v=null,R=c),v!==R)){if(O=sy,x="onMouseLeave",T="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(O=ay,x="onPointerLeave",T="onPointerEnter",_="pointer"),D=v==null?p:to(v),A=R==null?p:to(R),p=new O(x,_+"leave",v,n,d),p.target=D,p.relatedTarget=A,x=null,xr(d)===c&&(O=new O(T,_+"enter",R,n,d),O.target=A,O.relatedTarget=D,x=O),D=x,v&&R)e:{for(O=v,T=R,_=0,A=O;A;A=_r(A))_++;for(A=0,x=T;x;x=_r(x))A++;for(;0<_-A;)O=_r(O),_--;for(;0<A-_;)T=_r(T),A--;for(;_--;){if(O===T||T!==null&&O===T.alternate)break e;O=_r(O),T=_r(T)}O=null}else O=null;v!==null&&Zy(m,p,v,O,!1),R!==null&&D!==null&&Zy(m,D,R,O,!0)}}t:{if(p=c?to(c):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var M=cy;else if(uy(p))if(uE)M=NI;else{M=xI;var V=CI}else v=p.nodeName,!v||v.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?c&&Kp(c.elementType)&&(M=cy):M=OI;if(M&&(M=M(e,c))){lE(m,M,n,d);break t}V&&V(e,p,c),e==="focusout"&&c&&p.type==="number"&&c.memoizedProps.value!=null&&bf(p,"number",p.value)}switch(V=c?to(c):window,e){case"focusin":(uy(V)||V.contentEditable==="true")&&(Dr=V,wf=c,fo=null);break;case"focusout":fo=wf=Dr=null;break;case"mousedown":Rf=!0;break;case"contextmenu":case"mouseup":case"dragend":Rf=!1,my(m,n,d);break;case"selectionchange":if(kI)break;case"keydown":case"keyup":my(m,n,d)}var b;if(Wp)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else Nr?aE(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(rE&&n.locale!=="ko"&&(Nr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Nr&&(b=sE()):(ji=d,Yp="value"in ji?ji.value:ji.textContent,Nr=!0)),V=Ec(c,y),0<V.length&&(y=new ry(y,e,null,n,d),m.push({event:y,listeners:V}),b?y.data=b:(b=oE(n),b!==null&&(y.data=b)))),(b=AI?SI(e,n):wI(e,n))&&(y=Ec(c,"onBeforeInput"),0<y.length&&(V=new ry("onBeforeInput","beforeinput",null,n,d),m.push({event:V,listeners:y}),V.data=b)),m2(m,e,c,n,d)}tb(m,t)})}function zo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ec(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=ko(e,n),s!=null&&i.unshift(zo(e,s,r)),s=ko(e,t),s!=null&&i.push(zo(e,s,r))),e.tag===3)return i;e=e.return}return[]}function _r(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Zy(e,t,n,i,s){for(var r=t._reactName,a=[];n!==null&&n!==i;){var o=n,u=o.alternate,c=o.stateNode;if(o=o.tag,u!==null&&u===i)break;o!==5&&o!==26&&o!==27||c===null||(u=c,s?(c=ko(n,r),c!=null&&a.unshift(zo(n,c,u))):s||(c=ko(n,r),c!=null&&a.push(zo(n,c,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var v2=/\r\n?/g,E2=/\u0000|\uFFFD/g;function Jy(e){return(typeof e=="string"?e:""+e).replace(v2,`
`).replace(E2,"")}function nb(e,t){return t=Jy(t),Jy(e)===t}function dh(){}function mt(e,t,n,i,s,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ta(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ta(e,""+i);break;case"className":su(e,"class",i);break;case"tabIndex":su(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":su(e,n,i);break;case"style":nE(e,i,r);break;case"data":if(t!=="object"){su(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Cu(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&mt(e,t,"name",s.name,s,null),mt(e,t,"formEncType",s.formEncType,s,null),mt(e,t,"formMethod",s.formMethod,s,null),mt(e,t,"formTarget",s.formTarget,s,null)):(mt(e,t,"encType",s.encType,s,null),mt(e,t,"method",s.method,s,null),mt(e,t,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Cu(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=dh);break;case"onScroll":i!=null&&nt("scroll",e);break;case"onScrollEnd":i!=null&&nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(j(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(j(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Cu(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":nt("beforetoggle",e),nt("toggle",e),Iu(e,"popover",i);break;case"xlinkActuate":Kn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Kn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Kn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Kn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Kn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Kn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Kn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Kn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Kn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Iu(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=XR.get(n)||n,Iu(e,n,i))}}function Wf(e,t,n,i,s,r){switch(n){case"style":nE(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(j(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(j(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ta(e,i):(typeof i=="number"||typeof i=="bigint")&&ta(e,""+i);break;case"onScroll":i!=null&&nt("scroll",e);break;case"onScrollEnd":i!=null&&nt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=dh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!X1.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),r=e[Le]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Iu(e,n,i)}}}function he(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",e),nt("load",e);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(j(137,t));default:mt(e,t,r,a,n,null)}}s&&mt(e,t,"srcSet",n.srcSet,n,null),i&&mt(e,t,"src",n.src,n,null);return;case"input":nt("invalid",e);var o=r=a=s=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":o=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(j(137,t));break;default:mt(e,t,i,d,n,null)}}J1(e,r,o,u,c,a,s,!1),ec(e);return;case"select":nt("invalid",e),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":r=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:mt(e,t,s,o,n,null)}t=r,n=a,e.multiple=!!i,t!=null?Br(e,!!i,t,!1):n!=null&&Br(e,!!i,n,!0);return;case"textarea":nt("invalid",e),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":s=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(j(91));break;default:mt(e,t,a,o,n,null)}eE(e,i,s,r),ec(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:mt(e,t,u,i,n,null)}return;case"dialog":nt("beforetoggle",e),nt("toggle",e),nt("cancel",e),nt("close",e);break;case"iframe":case"object":nt("load",e);break;case"video":case"audio":for(i=0;i<jo.length;i++)nt(jo[i],e);break;case"image":nt("error",e),nt("load",e);break;case"details":nt("toggle",e);break;case"embed":case"source":case"link":nt("error",e),nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(j(137,t));default:mt(e,t,c,i,n,null)}return;default:if(Kp(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&Wf(e,t,d,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&mt(e,t,o,i,n,null))}function T2(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,o=null,u=null,c=null,d=null;for(v in n){var m=n[v];if(n.hasOwnProperty(v)&&m!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":u=m;default:i.hasOwnProperty(v)||mt(e,t,v,null,i,m)}}for(var p in i){var v=i[p];if(m=n[p],i.hasOwnProperty(p)&&(v!=null||m!=null))switch(p){case"type":r=v;break;case"name":s=v;break;case"checked":c=v;break;case"defaultChecked":d=v;break;case"value":a=v;break;case"defaultValue":o=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(j(137,t));break;default:v!==m&&mt(e,t,p,v,i,m)}}Tf(e,a,o,u,c,d,r,s);return;case"select":v=a=o=p=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":v=u;default:i.hasOwnProperty(r)||mt(e,t,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":p=r;break;case"defaultValue":o=r;break;case"multiple":a=r;default:r!==u&&mt(e,t,s,r,i,u)}t=o,n=a,i=v,p!=null?Br(e,!!n,p,!1):!!i!=!!n&&(t!=null?Br(e,!!n,t,!0):Br(e,!!n,n?[]:"",!1));return;case"textarea":v=p=null;for(o in n)if(s=n[o],n.hasOwnProperty(o)&&s!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:mt(e,t,o,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":p=s;break;case"defaultValue":v=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(j(91));break;default:s!==r&&mt(e,t,a,s,i,r)}tE(e,p,v);return;case"option":for(var R in n)if(p=n[R],n.hasOwnProperty(R)&&p!=null&&!i.hasOwnProperty(R))switch(R){case"selected":e.selected=!1;break;default:mt(e,t,R,null,i,p)}for(u in i)if(p=i[u],v=n[u],i.hasOwnProperty(u)&&p!==v&&(p!=null||v!=null))switch(u){case"selected":e.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:mt(e,t,u,p,i,v)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)p=n[O],n.hasOwnProperty(O)&&p!=null&&!i.hasOwnProperty(O)&&mt(e,t,O,null,i,p);for(c in i)if(p=i[c],v=n[c],i.hasOwnProperty(c)&&p!==v&&(p!=null||v!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(j(137,t));break;default:mt(e,t,c,p,i,v)}return;default:if(Kp(t)){for(var D in n)p=n[D],n.hasOwnProperty(D)&&p!==void 0&&!i.hasOwnProperty(D)&&Wf(e,t,D,void 0,i,p);for(d in i)p=i[d],v=n[d],!i.hasOwnProperty(d)||p===v||p===void 0&&v===void 0||Wf(e,t,d,p,i,v);return}}for(var T in n)p=n[T],n.hasOwnProperty(T)&&p!=null&&!i.hasOwnProperty(T)&&mt(e,t,T,null,i,p);for(m in i)p=i[m],v=n[m],!i.hasOwnProperty(m)||p===v||p==null&&v==null||mt(e,t,m,p,i,v)}var Zf=null,Jf=null;function Tc(e){return e.nodeType===9?e:e.ownerDocument}function tv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ib(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function tp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bd=null;function b2(){var e=window.event;return e&&e.type==="popstate"?e===Bd?!1:(Bd=e,!0):(Bd=null,!1)}var sb=typeof setTimeout=="function"?setTimeout:void 0,A2=typeof clearTimeout=="function"?clearTimeout:void 0,ev=typeof Promise=="function"?Promise:void 0,S2=typeof queueMicrotask=="function"?queueMicrotask:typeof ev<"u"?function(e){return ev.resolve(null).then(e).catch(w2)}:sb;function w2(e){setTimeout(function(){throw e})}function fs(e){return e==="head"}function nv(e,t){var n=t,i=0,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&So(a.documentElement),n&2&&So(a.body),n&4)for(n=a.head,So(n),a=n.firstChild;a;){var o=a.nextSibling,u=a.nodeName;a[ol]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=o}}if(s===0){e.removeChild(r),Go(t);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);Go(t)}function ep(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ep(n),$p(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function R2(e,t,n,i){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[ol])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=yn(e.nextSibling),e===null)break}return null}function I2(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=yn(e.nextSibling),e===null))return null;return e}function np(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function C2(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function yn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var ip=null;function iv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function rb(e,t,n){switch(t=Tc(n),e){case"html":if(e=t.documentElement,!e)throw Error(j(452));return e;case"head":if(e=t.head,!e)throw Error(j(453));return e;case"body":if(e=t.body,!e)throw Error(j(454));return e;default:throw Error(j(451))}}function So(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$p(e)}var dn=new Map,sv=new Set;function bc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var yi=ct.d;ct.d={f:x2,r:O2,D:N2,C:D2,L:k2,m:M2,X:V2,S:P2,M:L2};function x2(){var e=yi.f(),t=uh();return e||t}function O2(e){var t=ga(e);t!==null&&t.tag===5&&t.type==="form"?ZE(t):yi.r(e)}var va=typeof document>"u"?null:document;function ab(e,t,n){var i=va;if(i&&typeof t=="string"&&t){var s=on(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),sv.has(s)||(sv.add(s),e={rel:e,crossOrigin:n,href:t},i.querySelector(s)===null&&(t=i.createElement("link"),he(t,"link",e),ee(t),i.head.appendChild(t)))}}function N2(e){yi.D(e),ab("dns-prefetch",e,null)}function D2(e,t){yi.C(e,t),ab("preconnect",e,t)}function k2(e,t,n){yi.L(e,t,n);var i=va;if(i&&e&&t){var s='link[rel="preload"][as="'+on(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+on(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+on(n.imageSizes)+'"]')):s+='[href="'+on(e)+'"]';var r=s;switch(t){case"style":r=la(e);break;case"script":r=Ea(e)}dn.has(r)||(e=St({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),dn.set(r,e),i.querySelector(s)!==null||t==="style"&&i.querySelector(_l(r))||t==="script"&&i.querySelector(yl(r))||(t=i.createElement("link"),he(t,"link",e),ee(t),i.head.appendChild(t)))}}function M2(e,t){yi.m(e,t);var n=va;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+on(i)+'"][href="'+on(e)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Ea(e)}if(!dn.has(r)&&(e=St({rel:"modulepreload",href:e},t),dn.set(r,e),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(yl(r)))return}i=n.createElement("link"),he(i,"link",e),ee(i),n.head.appendChild(i)}}}function P2(e,t,n){yi.S(e,t,n);var i=va;if(i&&e){var s=zr(i).hoistableStyles,r=la(e);t=t||"default";var a=s.get(r);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(_l(r)))o.loading=5;else{e=St({rel:"stylesheet",href:e,"data-precedence":t},n),(n=dn.get(r))&&xm(e,n);var u=a=i.createElement("link");ee(u),he(u,"link",e),u._p=new Promise(function(c,d){u.onload=c,u.onerror=d}),u.addEventListener("load",function(){o.loading|=1}),u.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Lu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(r,a)}}}function V2(e,t){yi.X(e,t);var n=va;if(n&&e){var i=zr(n).hoistableScripts,s=Ea(e),r=i.get(s);r||(r=n.querySelector(yl(s)),r||(e=St({src:e,async:!0},t),(t=dn.get(s))&&Om(e,t),r=n.createElement("script"),ee(r),he(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function L2(e,t){yi.M(e,t);var n=va;if(n&&e){var i=zr(n).hoistableScripts,s=Ea(e),r=i.get(s);r||(r=n.querySelector(yl(s)),r||(e=St({src:e,async:!0,type:"module"},t),(t=dn.get(s))&&Om(e,t),r=n.createElement("script"),ee(r),he(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function rv(e,t,n,i){var s=(s=Hi.current)?bc(s):null;if(!s)throw Error(j(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=la(n.href),n=zr(s).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=la(n.href);var r=zr(s).hoistableStyles,a=r.get(e);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,a),(r=s.querySelector(_l(e)))&&!r._p&&(a.instance=r,a.state.loading=5),dn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},dn.set(e,n),r||U2(s,e,n,a.state))),t&&i===null)throw Error(j(528,""));return a}if(t&&i!==null)throw Error(j(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ea(n),n=zr(s).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(j(444,e))}}function la(e){return'href="'+on(e)+'"'}function _l(e){return'link[rel="stylesheet"]['+e+"]"}function ob(e){return St({},e,{"data-precedence":e.precedence,precedence:null})}function U2(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),he(t,"link",n),ee(t),e.head.appendChild(t))}function Ea(e){return'[src="'+on(e)+'"]'}function yl(e){return"script[async]"+e}function av(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+on(n.href)+'"]');if(i)return t.instance=i,ee(i),i;var s=St({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ee(i),he(i,"style",s),Lu(i,n.precedence,e),t.instance=i;case"stylesheet":s=la(n.href);var r=e.querySelector(_l(s));if(r)return t.state.loading|=4,t.instance=r,ee(r),r;i=ob(n),(s=dn.get(s))&&xm(i,s),r=(e.ownerDocument||e).createElement("link"),ee(r);var a=r;return a._p=new Promise(function(o,u){a.onload=o,a.onerror=u}),he(r,"link",i),t.state.loading|=4,Lu(r,n.precedence,e),t.instance=r;case"script":return r=Ea(n.src),(s=e.querySelector(yl(r)))?(t.instance=s,ee(s),s):(i=n,(s=dn.get(r))&&(i=St({},n),Om(i,s)),e=e.ownerDocument||e,s=e.createElement("script"),ee(s),he(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(j(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Lu(i,n.precedence,e));return t.instance}function Lu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===t)r=o;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function xm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Om(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Uu=null;function ov(e,t,n){if(Uu===null){var i=new Map,s=Uu=new Map;s.set(n,i)}else s=Uu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[ol]||r[ve]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(t)||"";a=e+a;var o=i.get(a);o?o.push(r):i.set(a,[r])}}return i}function lv(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function j2(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function lb(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Bo=null;function z2(){}function B2(e,t,n){if(Bo===null)throw Error(j(475));var i=Bo;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=la(n.href),r=e.querySelector(_l(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Ac.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,ee(r);return}r=e.ownerDocument||e,n=ob(n),(s=dn.get(s))&&xm(n,s),r=r.createElement("link"),ee(r);var a=r;a._p=new Promise(function(o,u){a.onload=o,a.onerror=u}),he(r,"link",n),t.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Ac.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function F2(){if(Bo===null)throw Error(j(475));var e=Bo;return e.stylesheets&&e.count===0&&sp(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&sp(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Ac(){if(this.count--,this.count===0){if(this.stylesheets)sp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Sc=null;function sp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Sc=new Map,t.forEach(H2,e),Sc=null,Ac.call(e))}function H2(e,t){if(!(t.state.loading&4)){var n=Sc.get(e);if(n)var i=n.get(null);else{n=new Map,Sc.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=t.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=Ac.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var Fo={$$typeof:Wn,Provider:null,Consumer:null,_currentValue:Ds,_currentValue2:Ds,_threadCount:0};function q2(e,t,n,i,s,r,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ud(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ud(0),this.hiddenUpdates=ud(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function ub(e,t,n,i,s,r,a,o,u,c,d,m){return e=new q2(e,t,n,a,o,u,c,m),t=1,r===!0&&(t|=24),r=$e(3,null,null,t),e.current=r,r.stateNode=e,t=sm(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},am(r),e}function cb(e){return e?(e=Pr,e):Pr}function hb(e,t,n,i,s,r){s=cb(s),i.context===null?i.context=s:i.pendingContext=s,i=qi(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=Gi(e,i,t),n!==null&&(tn(n,e,t),go(n,e,t))}function uv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nm(e,t){uv(e,t),(e=e.alternate)&&uv(e,t)}function db(e){if(e.tag===13){var t=_a(e,67108864);t!==null&&tn(t,e,67108864),Nm(e,67108864)}}var wc=!0;function G2(e,t,n,i){var s=Q.T;Q.T=null;var r=ct.p;try{ct.p=2,Dm(e,t,n,i)}finally{ct.p=r,Q.T=s}}function $2(e,t,n,i){var s=Q.T;Q.T=null;var r=ct.p;try{ct.p=8,Dm(e,t,n,i)}finally{ct.p=r,Q.T=s}}function Dm(e,t,n,i){if(wc){var s=rp(i);if(s===null)zd(e,t,i,Rc,n),cv(e,i);else if(Q2(s,e,t,n,i))i.stopPropagation();else if(cv(e,i),t&4&&-1<K2.indexOf(e)){for(;s!==null;){var r=ga(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Is(r.pendingLanes);if(a!==0){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var u=1<<31-Ze(a);o.entanglements[1]|=u,a&=~u}Fn(r),!(pt&6)&&(gc=Nn()+500,gl(0,!1))}}break;case 13:o=_a(r,2),o!==null&&tn(o,r,2),uh(),Nm(r,2)}if(r=rp(i),r===null&&zd(e,t,i,Rc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else zd(e,t,i,null,n)}}function rp(e){return e=Qp(e),km(e)}var Rc=null;function km(e){if(Rc=null,e=xr(e),e!==null){var t=il(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=L1(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Rc=e,null}function fb(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(DR()){case B1:return 2;case F1:return 8;case tc:case kR:return 32;case H1:return 268435456;default:return 32}default:return 32}}var ap=!1,Qi=null,Yi=null,Xi=null,Ho=new Map,qo=new Map,Di=[],K2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cv(e,t){switch(e){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":Ho.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(t.pointerId)}}function Qa(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=ga(t),t!==null&&db(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Q2(e,t,n,i,s){switch(t){case"focusin":return Qi=Qa(Qi,e,t,n,i,s),!0;case"dragenter":return Yi=Qa(Yi,e,t,n,i,s),!0;case"mouseover":return Xi=Qa(Xi,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return Ho.set(r,Qa(Ho.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,qo.set(r,Qa(qo.get(r)||null,e,t,n,i,s)),!0}return!1}function pb(e){var t=xr(e.target);if(t!==null){var n=il(t);if(n!==null){if(t=n.tag,t===13){if(t=L1(n),t!==null){e.blockedOn=t,BR(e.priority,function(){if(n.tag===13){var i=Je();i=qp(i);var s=_a(n,i);s!==null&&tn(s,n,i),Nm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ju(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=rp(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Af=i,n.target.dispatchEvent(i),Af=null}else return t=ga(n),t!==null&&db(t),e.blockedOn=n,!1;t.shift()}return!0}function hv(e,t,n){ju(e)&&n.delete(t)}function Y2(){ap=!1,Qi!==null&&ju(Qi)&&(Qi=null),Yi!==null&&ju(Yi)&&(Yi=null),Xi!==null&&ju(Xi)&&(Xi=null),Ho.forEach(hv),qo.forEach(hv)}function du(e,t){e.blockedOn===t&&(e.blockedOn=null,ap||(ap=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,Y2)))}var fu=null;function dv(e){fu!==e&&(fu=e,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,function(){fu===e&&(fu=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if(typeof i!="function"){if(km(i||n)===null)continue;break}var r=ga(n);r!==null&&(e.splice(t,3),t-=3,jf(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Go(e){function t(u){return du(u,e)}Qi!==null&&du(Qi,e),Yi!==null&&du(Yi,e),Xi!==null&&du(Xi,e),Ho.forEach(t),qo.forEach(t);for(var n=0;n<Di.length;n++){var i=Di[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Di.length&&(n=Di[0],n.blockedOn===null);)pb(n),n.blockedOn===null&&Di.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[Le]||null;if(typeof r=="function")a||dv(n);else if(a){var o=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[Le]||null)o=a.formAction;else if(km(s)!==null)continue}else o=a.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),dv(n)}}}function Mm(e){this._internalRoot=e}fh.prototype.render=Mm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(j(409));var n=t.current,i=Je();hb(n,i,e,t,null,null)};fh.prototype.unmount=Mm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hb(e.current,2,null,e,null,null),uh(),t[ma]=null}};function fh(e){this._internalRoot=e}fh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Q1();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Di.length&&t!==0&&t<Di[n].priority;n++);Di.splice(n,0,e),n===0&&pb(e)}};var fv=P1.version;if(fv!=="19.1.0")throw Error(j(527,fv,"19.1.0"));ct.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=wR(t),e=e!==null?U1(e):null,e=e===null?null:e.stateNode,e};var X2={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pu.isDisabled&&pu.supportsFiber)try{sl=pu.inject(X2),We=pu}catch{}}Wc.createRoot=function(e,t){if(!V1(e))throw Error(j(299));var n=!1,i="",s=uT,r=cT,a=hT,o=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(o=t.unstable_transitionCallbacks)),t=ub(e,1,!1,null,null,n,i,s,r,a,o,null),e[ma]=t.current,Cm(e),new Mm(t)};Wc.hydrateRoot=function(e,t,n){if(!V1(e))throw Error(j(299));var i=!1,s="",r=uT,a=cT,o=hT,u=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),t=ub(e,1,!0,t,n??null,i,s,r,a,o,u,c),t.context=cb(null),n=t.current,i=Je(),i=qp(i),s=qi(i),s.callback=null,Gi(n,s,i),n=i,t.current.lanes=n,al(t,n),Fn(t),e[ma]=t.current,Cm(e),new fh(t)};Wc.version="19.1.0";function mb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mb)}catch(e){console.error(e)}}mb(),x1.exports=Wc;var W2=x1.exports;const Z2=v1(W2),J2=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},tC=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],a=e[n++],o=e[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|o&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},_b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],a=s+1<e.length,o=a?e[s+1]:0,u=s+2<e.length,c=u?e[s+2]:0,d=r>>2,m=(r&3)<<4|o>>4;let p=(o&15)<<2|c>>6,v=c&63;u||(v=64,a||(p=64)),i.push(n[d],n[m],n[p],n[v])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(gb(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):tC(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],o=s<e.length?n[e.charAt(s)]:0;++s;const c=s<e.length?n[e.charAt(s)]:64;++s;const m=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||o==null||c==null||m==null)throw new eC;const p=r<<2|o>>4;if(i.push(p),c!==64){const v=o<<4&240|c>>2;if(i.push(v),m!==64){const R=c<<6&192|m;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class eC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nC=function(e){const t=gb(e);return _b.encodeByteArray(t,!0)},Ic=function(e){return nC(e).replace(/\./g,"")},yb=function(e){try{return _b.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=()=>iC().__FIREBASE_DEFAULTS__,rC=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},aC=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&yb(e[1]);return t&&JSON.parse(t)},ph=()=>{try{return J2()||sC()||rC()||aC()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},vb=e=>{var t,n;return(n=(t=ph())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Eb=e=>{const t=vb(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},Tb=()=>{var e;return(e=ph())===null||e===void 0?void 0:e.config},bb=e=>{var t;return(t=ph())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Pm(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e),o="";return[Ic(JSON.stringify(n)),Ic(JSON.stringify(a)),o].join(".")}const wo={};function lC(){const e={prod:[],emulator:[]};for(const t of Object.keys(wo))wo[t]?e.emulator.push(t):e.prod.push(t);return e}function uC(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let pv=!1;function Vm(e,t){if(typeof window>"u"||typeof document>"u"||!ps(window.location.host)||wo[e]===t||wo[e]||pv)return;wo[e]=t;function n(p){return`__firebase__banner__${p}`}const i="__firebase__banner",r=lC().prod.length>0;function a(){const p=document.getElementById(i);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,v){p.setAttribute("width","24"),p.setAttribute("id",v),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{pv=!0,a()},p}function d(p,v){p.setAttribute("id",v),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=uC(i),v=n("text"),R=document.getElementById(v)||document.createElement("span"),O=n("learnmore"),D=document.getElementById(O)||document.createElement("a"),T=n("preprendIcon"),_=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const A=p.element;o(A),d(D,O);const x=c();u(_,T),A.append(_,R,D,x),document.body.appendChild(A)}r?(R.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function hC(){var e;const t=(e=ph())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fC(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function pC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mC(){const e=Te();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function gC(){return!hC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _C(){try{return typeof indexedDB=="object"}catch{return!1}}function yC(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="FirebaseError";class Hn extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=vC,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vl.prototype.create)}}class vl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?EC(r,i):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new Hn(s,o,i)}}function EC(e,t){return e.replace(TC,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const TC=/\{\$([^}]+)}/g;function bC(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ks(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],a=t[s];if(mv(r)&&mv(a)){if(!Ks(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function mv(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function no(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(r)}}),t}function io(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function AC(e,t){const n=new SC(e,t);return n.subscribe.bind(n)}class SC{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");wC(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=Fd),s.error===void 0&&(s.error=Fd),s.complete===void 0&&(s.complete=Fd);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wC(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Fd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(e){return e&&e._delegate?e._delegate:e}class ss{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new oC;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(CC(t))try{this.getOrInitializeService({instanceIdentifier:Os})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=Os){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Os){return this.instances.has(t)}getOptions(t=Os){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(r);i===o&&a.resolve(s)}return s}onInit(t,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(t),this.onInitCallbacks.set(s,r);const a=this.instances.get(s);return a&&t(a,s),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:IC(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Os){return this.component?this.component.multipleInstances?t:Os:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IC(e){return e===Os?void 0:e}function CC(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new RC(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(st||(st={}));const OC={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},NC=st.INFO,DC={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},kC=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=DC[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Lm{constructor(t){this.name=t,this._logLevel=NC,this._logHandler=kC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in st))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?OC[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...t),this._logHandler(this,st.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...t),this._logHandler(this,st.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,st.INFO,...t),this._logHandler(this,st.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,st.WARN,...t),this._logHandler(this,st.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...t),this._logHandler(this,st.ERROR,...t)}}const MC=(e,t)=>t.some(n=>e instanceof n);let gv,_v;function PC(){return gv||(gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VC(){return _v||(_v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sb=new WeakMap,op=new WeakMap,wb=new WeakMap,Hd=new WeakMap,Um=new WeakMap;function LC(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n(Wi(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Sb.set(n,e)}).catch(()=>{}),Um.set(t,e),t}function UC(e){if(op.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});op.set(e,t)}let lp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return op.get(e);if(t==="objectStoreNames")return e.objectStoreNames||wb.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function jC(e){lp=e(lp)}function zC(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(qd(this),t,...n);return wb.set(i,t.sort?t.sort():[t]),Wi(i)}:VC().includes(e)?function(...t){return e.apply(qd(this),t),Wi(Sb.get(this))}:function(...t){return Wi(e.apply(qd(this),t))}}function BC(e){return typeof e=="function"?zC(e):(e instanceof IDBTransaction&&UC(e),MC(e,PC())?new Proxy(e,lp):e)}function Wi(e){if(e instanceof IDBRequest)return LC(e);if(Hd.has(e))return Hd.get(e);const t=BC(e);return t!==e&&(Hd.set(e,t),Um.set(t,e)),t}const qd=e=>Um.get(e);function FC(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),o=Wi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Wi(a.result),u.oldVersion,u.newVersion,Wi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),o.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const HC=["get","getKey","getAll","getAllKeys","count"],qC=["put","add","delete","clear"],Gd=new Map;function yv(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Gd.get(t))return Gd.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=qC.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||HC.includes(n)))return;const r=async function(a,...o){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),s&&u.done]))[0]};return Gd.set(t,r),r}jC(e=>({...e,get:(t,n,i)=>yv(t,n)||e.get(t,n,i),has:(t,n)=>!!yv(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($C(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function $C(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const up="@firebase/app",vv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new Lm("@firebase/app"),KC="@firebase/app-compat",QC="@firebase/analytics-compat",YC="@firebase/analytics",XC="@firebase/app-check-compat",WC="@firebase/app-check",ZC="@firebase/auth",JC="@firebase/auth-compat",tx="@firebase/database",ex="@firebase/data-connect",nx="@firebase/database-compat",ix="@firebase/functions",sx="@firebase/functions-compat",rx="@firebase/installations",ax="@firebase/installations-compat",ox="@firebase/messaging",lx="@firebase/messaging-compat",ux="@firebase/performance",cx="@firebase/performance-compat",hx="@firebase/remote-config",dx="@firebase/remote-config-compat",fx="@firebase/storage",px="@firebase/storage-compat",mx="@firebase/firestore",gx="@firebase/ai",_x="@firebase/firestore-compat",yx="firebase",vx="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",Ex={[up]:"fire-core",[KC]:"fire-core-compat",[YC]:"fire-analytics",[QC]:"fire-analytics-compat",[WC]:"fire-app-check",[XC]:"fire-app-check-compat",[ZC]:"fire-auth",[JC]:"fire-auth-compat",[tx]:"fire-rtdb",[ex]:"fire-data-connect",[nx]:"fire-rtdb-compat",[ix]:"fire-fn",[sx]:"fire-fn-compat",[rx]:"fire-iid",[ax]:"fire-iid-compat",[ox]:"fire-fcm",[lx]:"fire-fcm-compat",[ux]:"fire-perf",[cx]:"fire-perf-compat",[hx]:"fire-rc",[dx]:"fire-rc-compat",[fx]:"fire-gcs",[px]:"fire-gcs-compat",[mx]:"fire-fst",[_x]:"fire-fst-compat",[gx]:"fire-vertex","fire-js":"fire-js",[yx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Map,Tx=new Map,hp=new Map;function Ev(e,t){try{e.container.addComponent(t)}catch(n){di.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Qs(e){const t=e.name;if(hp.has(t))return di.debug(`There were multiple attempts to register component ${t}.`),!1;hp.set(t,e);for(const n of Cc.values())Ev(n,e);for(const n of Tx.values())Ev(n,e);return!0}function mh(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ke(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new vl("app","Firebase",bx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=vx;function Rb(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:cp,automaticDataCollectionEnabled:!0},t),s=i.name;if(typeof s!="string"||!s)throw Zi.create("bad-app-name",{appName:String(s)});if(n||(n=Tb()),!n)throw Zi.create("no-options");const r=Cc.get(s);if(r){if(Ks(n,r.options)&&Ks(i,r.config))return r;throw Zi.create("duplicate-app",{appName:s})}const a=new xC(s);for(const u of hp.values())a.addComponent(u);const o=new Ax(n,i,a);return Cc.set(s,o),o}function jm(e=cp){const t=Cc.get(e);if(!t&&e===cp&&Tb())return Rb();if(!t)throw Zi.create("no-app",{appName:e});return t}function kn(e,t,n){var i;let s=(i=Ex[e])!==null&&i!==void 0?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const o=[`Unable to register library "${s}" with version "${t}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&o.push("and"),a&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),di.warn(o.join(" "));return}Qs(new ss(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="firebase-heartbeat-database",wx=1,$o="firebase-heartbeat-store";let $d=null;function Ib(){return $d||($d=FC(Sx,wx,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore($o)}catch(n){console.warn(n)}}}}).catch(e=>{throw Zi.create("idb-open",{originalErrorMessage:e.message})})),$d}async function Rx(e){try{const n=(await Ib()).transaction($o),i=await n.objectStore($o).get(Cb(e));return await n.done,i}catch(t){if(t instanceof Hn)di.warn(t.message);else{const n=Zi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});di.warn(n.message)}}}async function Tv(e,t){try{const i=(await Ib()).transaction($o,"readwrite");await i.objectStore($o).put(t,Cb(e)),await i.done}catch(n){if(n instanceof Hn)di.warn(n.message);else{const i=Zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});di.warn(i.message)}}}function Cb(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=1024,Cx=30;class xx{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Nx(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=bv();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>Cx){const a=Dx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){di.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bv(),{heartbeatsToSend:i,unsentEntries:s}=Ox(this._heartbeatsCache.heartbeats),r=Ic(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return di.warn(n),""}}}function bv(){return new Date().toISOString().substring(0,10)}function Ox(e,t=Ix){const n=[];let i=e.slice();for(const s of e){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),Av(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Av(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Nx{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _C()?yC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Rx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Av(e){return Ic(JSON.stringify({version:2,heartbeats:e})).length}function Dx(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(e){Qs(new ss("platform-logger",t=>new GC(t),"PRIVATE")),Qs(new ss("heartbeat",t=>new xx(t),"PRIVATE")),kn(up,vv,e),kn(up,vv,"esm2017"),kn("fire-js","")}kx("");var Mx="firebase",Px="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn(Mx,Px,"app");function zm(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]]);return n}function xb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Vx=xb,Ob=new vl("auth","Firebase",xb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Lm("@firebase/auth");function Lx(e,...t){xc.logLevel<=st.WARN&&xc.warn(`Auth (${rr}): ${e}`,...t)}function zu(e,...t){xc.logLevel<=st.ERROR&&xc.error(`Auth (${rr}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(e,...t){throw Bm(e,...t)}function Mn(e,...t){return Bm(e,...t)}function Nb(e,t,n){const i=Object.assign(Object.assign({},Vx()),{[t]:n});return new vl("auth","Firebase",i).create(t,{appName:e.name})}function ai(e){return Nb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bm(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return Ob.create(e,...t)}function $(e,t,...n){if(!e)throw Bm(t,...n)}function ni(e){const t="INTERNAL ASSERTION FAILED: "+e;throw zu(t),new Error(t)}function fi(e,t){e||ni(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Ux(){return Sv()==="http:"||Sv()==="https:"}function Sv(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ux()||fC()||"connection"in navigator)?navigator.onLine:!0}function zx(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t,n){this.shortDelay=t,this.longDelay=n,fi(n>t,"Short delay should be less than long delay!"),this.isMobile=cC()||pC()}get(){return jx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(e,t){fi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Hx=new Tl(3e4,6e4);function ms(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function gs(e,t,n,i,s={}){return kb(e,s,async()=>{let r={},a={};i&&(t==="GET"?a=i:r={body:JSON.stringify(i)});const o=El(Object.assign({key:e.config.apiKey},a)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:u},r);return dC()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&ps(e.emulatorConfig.host)&&(c.credentials="include"),Db.fetch()(await Mb(e,e.config.apiHost,n,o),c)})}async function kb(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Bx),t);try{const s=new Gx(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw mu(e,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const o=r.ok?a.errorMessage:a.error.message,[u,c]=o.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw mu(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw mu(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw mu(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Nb(e,d,c);vn(e,d)}}catch(s){if(s instanceof Hn)throw s;vn(e,"network-request-failed",{message:String(s)})}}async function bl(e,t,n,i,s={}){const r=await gs(e,t,n,i,s);return"mfaPendingCredential"in r&&vn(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function Mb(e,t,n,i){const s=`${t}${n}?${i}`,r=e,a=r.config.emulator?Fm(e.config,s):`${e.config.apiScheme}://${s}`;return Fx.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function qx(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Gx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Mn(this.auth,"network-request-failed")),Hx.get())})}}function mu(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Mn(e,t,i);return s.customData._tokenResponse=n,s}function wv(e){return e!==void 0&&e.enterprise!==void 0}class $x{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return qx(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Kx(e,t){return gs(e,"GET","/v2/recaptchaConfig",ms(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(e,t){return gs(e,"POST","/v1/accounts:delete",t)}async function Oc(e,t){return gs(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Yx(e,t=!1){const n=wt(e),i=await n.getIdToken(t),s=Hm(i);$(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Ro(Kd(s.auth_time)),issuedAtTime:Ro(Kd(s.iat)),expirationTime:Ro(Kd(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Kd(e){return Number(e)*1e3}function Hm(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return zu("JWT malformed, contained fewer than 3 sections"),null;try{const s=yb(n);return s?JSON.parse(s):(zu("Failed to decode base64 JWT payload"),null)}catch(s){return zu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Rv(e){const t=Hm(e);return $(t,"internal-error"),$(typeof t.exp<"u","internal-error"),$(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Hn&&Xx(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function Xx({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ro(this.lastLoginAt),this.creationTime=Ro(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(e){var t;const n=e.auth,i=await e.getIdToken(),s=await Ko(e,Oc(n,{idToken:i}));$(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];e._notifyReloadListener(r);const a=!((t=r.providerUserInfo)===null||t===void 0)&&t.length?Pb(r.providerUserInfo):[],o=Jx(e.providerData,a),u=e.isAnonymous,c=!(e.email&&r.passwordHash)&&!(o!=null&&o.length),d=u?c:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new fp(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(e,m)}async function Zx(e){const t=wt(e);await Nc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Jx(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function Pb(e){return e.map(t=>{var{providerId:n}=t,i=zm(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO(e,t){const n=await kb(e,{},async()=>{const i=El({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,a=await Mb(e,s,"/v1/token",`key=${r}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:o,body:i};return e.emulatorConfig&&ps(e.emulatorConfig.host)&&(u.credentials="include"),Db.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eO(e,t){return gs(e,"POST","/v2/accounts:revokeToken",ms(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){$(t.idToken,"internal-error"),$(typeof t.idToken<"u","internal-error"),$(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Rv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){$(t.length!==0,"internal-error");const n=Rv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:($(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await tO(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Qr;return i&&($(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),s&&($(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&($(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Qr,this.toJSON())}_performRefresh(){return ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(e,t){$(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class _n{constructor(t){var{uid:n,auth:i,stsTokenManager:s}=t,r=zm(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new fp(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Ko(this,this.stsTokenManager.getToken(this.auth,t));return $(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Yx(this,t)}reload(){return Zx(this)}_assign(t){this!==t&&($(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new _n(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Nc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ke(this.auth.app))return Promise.reject(ai(this.auth));const t=await this.getIdToken();return await Ko(this,Qx(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,s,r,a,o,u,c,d;const m=(i=n.displayName)!==null&&i!==void 0?i:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,v=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,R=(a=n.photoURL)!==null&&a!==void 0?a:void 0,O=(o=n.tenantId)!==null&&o!==void 0?o:void 0,D=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:A,emailVerified:x,isAnonymous:M,providerData:V,stsTokenManager:b}=n;$(A&&b,t,"internal-error");const y=Qr.fromJSON(this.name,b);$(typeof A=="string",t,"internal-error"),Si(m,t.name),Si(p,t.name),$(typeof x=="boolean",t,"internal-error"),$(typeof M=="boolean",t,"internal-error"),Si(v,t.name),Si(R,t.name),Si(O,t.name),Si(D,t.name),Si(T,t.name),Si(_,t.name);const S=new _n({uid:A,auth:t,email:p,emailVerified:x,displayName:m,isAnonymous:M,photoURL:R,phoneNumber:v,tenantId:O,stsTokenManager:y,createdAt:T,lastLoginAt:_});return V&&Array.isArray(V)&&(S.providerData=V.map(w=>Object.assign({},w))),D&&(S._redirectEventId=D),S}static async _fromIdTokenResponse(t,n,i=!1){const s=new Qr;s.updateFromServerResponse(n);const r=new _n({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Nc(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];$(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?Pb(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),o=new Qr;o.updateFromIdToken(i);const u=new _n({uid:s.localId,auth:t,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new fp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=new Map;function ii(e){fi(e instanceof Function,"Expected a class definition");let t=Iv.get(e);return t?(fi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Iv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Vb.type="NONE";const Cv=Vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(e,t,n){return`firebase:${e}:${t}:${n}`}class Yr{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Bu(this.userKey,s.apiKey,r),this.fullPersistenceKey=Bu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Oc(this.auth,{idToken:t}).catch(()=>{});return n?_n._fromGetAccountInfoResponse(this.auth,n,t):null}return _n._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Yr(ii(Cv),t,i);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||ii(Cv);const a=Bu(i,t.config.apiKey,t.name);let o=null;for(const c of n)try{const d=await c._get(a);if(d){let m;if(typeof d=="string"){const p=await Oc(t,{idToken:d}).catch(()=>{});if(!p)break;m=await _n._fromGetAccountInfoResponse(t,p,d)}else m=_n._fromJSON(t,d);c!==r&&(o=m),r=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new Yr(r,t,i):(r=u[0],o&&await r._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(a)}catch{}})),new Yr(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(zb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Lb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Fb(t))return"Blackberry";if(Hb(t))return"Webos";if(Ub(t))return"Safari";if((t.includes("chrome/")||jb(t))&&!t.includes("edge/"))return"Chrome";if(Bb(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Lb(e=Te()){return/firefox\//i.test(e)}function Ub(e=Te()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function jb(e=Te()){return/crios\//i.test(e)}function zb(e=Te()){return/iemobile/i.test(e)}function Bb(e=Te()){return/android/i.test(e)}function Fb(e=Te()){return/blackberry/i.test(e)}function Hb(e=Te()){return/webos/i.test(e)}function qm(e=Te()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function nO(e=Te()){var t;return qm(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function iO(){return mC()&&document.documentMode===10}function qb(e=Te()){return qm(e)||Bb(e)||Hb(e)||Fb(e)||/windows phone/i.test(e)||zb(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(e,t=[]){let n;switch(e){case"Browser":n=xv(Te());break;case"Worker":n=`${xv(Te())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${rr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((a,o)=>{try{const u=t(r);a(u)}catch(u){o(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(e,t={}){return gs(e,"GET","/v2/passwordPolicy",ms(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=6;class oO{constructor(t){var n,i,s,r;const a=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:aO,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=t.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,i,s,r,a,o;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.containsUppercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),u}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ov(this),this.idTokenSubscription=new Ov(this),this.beforeStateQueue=new sO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ob,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ii(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Yr.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Oc(this,{idToken:t}),i=await _n._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Ke(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===o)&&(u!=null&&u.user)&&(s=u.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Nc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=zx()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ke(this.app))return Promise.reject(ai(this));const n=t?wt(t):null;return n&&$(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&$(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ke(this.app)?Promise.reject(ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ke(this.app)?Promise.reject(ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ii(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await rO(this),n=new oO(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new vl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await eO(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ii(t)||this._popupRedirectResolver;$(n,this,"argument-error"),this.redirectPersistenceManager=await Yr.create(this,[ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if($(o,this,"internal-error"),o.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Gb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var t;if(Ke(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Lx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ar(e){return wt(e)}class Ov{constructor(t){this.auth=t,this.observer=null,this.addObserver=AC(n=>this.observer=n)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uO(e){gh=e}function $b(e){return gh.loadJS(e)}function cO(){return gh.recaptchaEnterpriseScript}function hO(){return gh.gapiScript}function dO(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class fO{constructor(){this.enterprise=new pO}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class pO{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const mO="recaptcha-enterprise",Kb="NO_RECAPTCHA";class gO{constructor(t){this.type=mO,this.auth=ar(t)}async verify(t="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,o)=>{Kx(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new $x(u);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,a(c.siteKey)}}).catch(u=>{o(u)})})}function s(r,a,o){const u=window.grecaptcha;wv(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:t}).then(c=>{a(c)}).catch(()=>{a(Kb)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fO().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(o=>{if(!n&&wv(window.grecaptcha))s(o,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=cO();u.length!==0&&(u+=o),$b(u).then(()=>{s(o,r,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function Ya(e,t,n,i=!1,s=!1){const r=new gO(e);let a;if(s)a=Kb;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const o=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const u=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const u=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return i?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function pp(e,t,n,i,s){var r,a;if(s==="EMAIL_PASSWORD_PROVIDER")if(!((r=e._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ya(e,t,n,n==="getOobCode");return i(e,o)}else return i(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Ya(e,t,n,n==="getOobCode");return i(e,u)}else return Promise.reject(o)});else if(s==="PHONE_PROVIDER")if(!((a=e._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("PHONE_PROVIDER")){const o=await Ya(e,t,n);return i(e,o).catch(async u=>{var c;if(((c=e._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await Ya(e,t,n,!1,!0);return i(e,d)}return Promise.reject(u)})}else{const o=await Ya(e,t,n,!1,!0);return i(e,o)}else return Promise.reject(s+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(e,t){const n=mh(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Ks(r,t??{}))return s;vn(s,"already-initialized")}return n.initialize({options:t})}function yO(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ii);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function vO(e,t,n){const i=ar(e);$(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),r=Qb(t),{host:a,port:o}=EO(t),u=o===null?"":`:${o}`,c={url:`${r}//${a}${u}/`},d=Object.freeze({host:a,port:o,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){$(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),$(Ks(c,i.config.emulator)&&Ks(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,ps(a)?(Pm(`${r}//${a}${u}`),Vm("Auth",!0)):s||TO()}function Qb(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function EO(e){const t=Qb(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Nv(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:Nv(a)}}}function Nv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function TO(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ni("not implemented")}_getIdTokenResponse(t){return ni("not implemented")}_linkToIdToken(t,n){return ni("not implemented")}_getReauthenticationResolver(t){return ni("not implemented")}}async function bO(e,t){return gs(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(e,t){return bl(e,"POST","/v1/accounts:signInWithPassword",ms(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO(e,t){return bl(e,"POST","/v1/accounts:signInWithEmailLink",ms(e,t))}async function wO(e,t){return bl(e,"POST","/v1/accounts:signInWithEmailLink",ms(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends Gm{constructor(t,n,i,s=null){super("password",i),this._email=t,this._password=n,this._tenantId=s}static _fromEmailAndPassword(t,n){return new Qo(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new Qo(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pp(t,n,"signInWithPassword",AO,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return SO(t,{email:this._email,oobCode:this._password});default:vn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pp(t,i,"signUpPassword",bO,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return wO(t,{idToken:n,email:this._email,oobCode:this._password});default:vn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xr(e,t){return bl(e,"POST","/v1/accounts:signInWithIdp",ms(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="http://localhost";class Ys extends Gm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ys(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s}=n,r=zm(n,["providerId","signInMethod"]);if(!i||!s)return null;const a=new Ys(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Xr(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Xr(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Xr(t,n)}buildRequest(){const t={requestUri:RO,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=El(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CO(e){const t=no(io(e)).link,n=t?no(io(t)).deep_link_id:null,i=no(io(e)).deep_link_id;return(i?no(io(i)).link:null)||i||n||t||e}class $m{constructor(t){var n,i,s,r,a,o;const u=no(io(t)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(i=u.oobCode)!==null&&i!==void 0?i:null,m=IO((s=u.mode)!==null&&s!==void 0?s:null);$(c&&d&&m,"argument-error"),this.apiKey=c,this.operation=m,this.code=d,this.continueUrl=(r=u.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(a=u.lang)!==null&&a!==void 0?a:null,this.tenantId=(o=u.tenantId)!==null&&o!==void 0?o:null}static parseLink(t){const n=CO(t);try{return new $m(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.providerId=Ta.PROVIDER_ID}static credential(t,n){return Qo._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=$m.parseLink(n);return $(i,"argument-error"),Qo._fromEmailAndCode(t,i.code,i.tenantId)}}Ta.PROVIDER_ID="password";Ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends Yb{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Al{constructor(){super("facebook.com")}static credential(t){return Ys._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ki.credentialFromTaggedObject(t)}static credentialFromError(t){return ki.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ki.credential(t.oauthAccessToken)}catch{return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Al{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ys._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Mi.credentialFromTaggedObject(t)}static credentialFromError(t){return Mi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Mi.credential(n,i)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Al{constructor(){super("github.com")}static credential(t){return Ys._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pi.credentialFromTaggedObject(t)}static credentialFromError(t){return Pi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Pi.credential(t.oauthAccessToken)}catch{return null}}}Pi.GITHUB_SIGN_IN_METHOD="github.com";Pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Al{constructor(){super("twitter.com")}static credential(t,n){return Ys._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Vi.credentialFromTaggedObject(t)}static credentialFromError(t){return Vi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Vi.credential(n,i)}catch{return null}}}Vi.TWITTER_SIGN_IN_METHOD="twitter.com";Vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(e,t){return bl(e,"POST","/v1/accounts:signUp",ms(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await _n._fromIdTokenResponse(t,i,s),a=Dv(i);return new Xs({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=Dv(i);return new Xs({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function Dv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends Hn{constructor(t,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Dc.prototype),this.customData={appName:t.name,tenantId:(r=t.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new Dc(t,n,i,s)}}function Xb(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Dc._fromErrorAndOperation(e,r,t,i):r})}async function OO(e,t,n=!1){const i=await Ko(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Xs._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(e,t,n=!1){const{auth:i}=e;if(Ke(i.app))return Promise.reject(ai(i));const s="reauthenticate";try{const r=await Ko(e,Xb(i,s,t,e),n);$(r.idToken,i,"internal-error");const a=Hm(r.idToken);$(a,i,"internal-error");const{sub:o}=a;return $(e.uid===o,i,"user-mismatch"),Xs._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&vn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wb(e,t,n=!1){if(Ke(e.app))return Promise.reject(ai(e));const i="signIn",s=await Xb(e,i,t),r=await Xs._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}async function DO(e,t){return Wb(ar(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(e){const t=ar(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function kO(e,t,n){if(Ke(e.app))return Promise.reject(ai(e));const i=ar(e),a=await pp(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xO,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Zb(e),u}),o=await Xs._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(o.user),o}function MO(e,t,n){return Ke(e.app)?Promise.reject(ai(e)):DO(wt(e),Ta.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Zb(e),i})}function PO(e,t,n,i){return wt(e).onIdTokenChanged(t,n,i)}function VO(e,t,n){return wt(e).beforeAuthStateChanged(t,n)}function LO(e,t,n,i){return wt(e).onAuthStateChanged(t,n,i)}function kv(e){return wt(e).signOut()}const kc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kc,"1"),this.storage.removeItem(kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=1e3,jO=10;class tA extends Jb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,o,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);iO()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,jO):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},UO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}tA.type="LOCAL";const zO=tA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends Jb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}eA.type="SESSION";const nA=eA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new _h(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const o=Array.from(a).map(async c=>c(n.origin,r)),u=await BO(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((o,u)=>{const c=Km("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(p.data.response);break;default:clearTimeout(d),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return window}function HO(e){Pn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function qO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GO(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function $O(){return iA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="firebaseLocalStorageDb",KO=1,Mc="firebaseLocalStorage",rA="fbase_key";class Sl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yh(e,t){return e.transaction([Mc],t?"readwrite":"readonly").objectStore(Mc)}function QO(){const e=indexedDB.deleteDatabase(sA);return new Sl(e).toPromise()}function mp(){const e=indexedDB.open(sA,KO);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Mc,{keyPath:rA})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Mc)?t(i):(i.close(),await QO(),t(await mp()))})})}async function Mv(e,t,n){const i=yh(e,!0).put({[rA]:t,value:n});return new Sl(i).toPromise()}async function YO(e,t){const n=yh(e,!1).get(t),i=await new Sl(n).toPromise();return i===void 0?null:i.value}function Pv(e,t){const n=yh(e,!0).delete(t);return new Sl(n).toPromise()}const XO=800,WO=3;class aA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mp(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>WO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_h._getInstance($O()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await qO(),!this.activeServiceWorker)return;this.sender=new FO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||GO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await mp();return await Mv(t,kc,"1"),await Pv(t,kc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Mv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>YO(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=yh(s,!1).getAll();return new Sl(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aA.type="LOCAL";const ZO=aA;new Tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(e,t){return t?ii(t):($(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends Gm{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Xr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Xr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Xr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function tN(e){return Wb(e.auth,new Qm(e),e.bypassAuthState)}function eN(e){const{auth:t,user:n}=e;return $(n,t,"internal-error"),NO(n,new Qm(e),e.bypassAuthState)}async function nN(e){const{auth:t,user:n}=e;return $(n,t,"internal-error"),OO(n,new Qm(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:o}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(u))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return tN;case"linkViaPopup":case"linkViaRedirect":return nN;case"reauthViaPopup":case"reauthViaRedirect":return eN;default:vn(this.auth,"internal-error")}}resolve(t){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=new Tl(2e3,1e4);class jr extends oA{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,jr.currentPopupAction&&jr.currentPopupAction.cancel(),jr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return $(t,this.auth,"internal-error"),t}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");const t=Km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,iN.get())};t()}}jr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="pendingRedirect",Fu=new Map;class rN extends oA{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Fu.get(this.auth._key());if(!t){try{const i=await aN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Fu.set(this.auth._key(),t)}return this.bypassAuthState||Fu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aN(e,t){const n=uN(t),i=lN(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function oN(e,t){Fu.set(e._key(),t)}function lN(e){return ii(e._redirectPersistence)}function uN(e){return Bu(sN,e.config.apiKey,e.name)}async function cN(e,t,n=!1){if(Ke(e.app))return Promise.reject(ai(e));const i=ar(e),s=JO(i,t),a=await new rN(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=10*60*1e3;class dN{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!fN(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!lA(t)){const s=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Mn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=hN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vv(t))}saveEventToCache(t){this.cachedEventUids.add(Vv(t)),this.lastProcessedEventTime=Date.now()}}function Vv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function lA({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function fN(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lA(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(e,t={}){return gs(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gN=/^https?/;async function _N(e){if(e.config.emulator)return;const{authorizedDomains:t}=await pN(e);for(const n of t)try{if(yN(n))return}catch{}vn(e,"unauthorized-domain")}function yN(e){const t=dp(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!gN.test(n))return!1;if(mN.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=new Tl(3e4,6e4);function Lv(){const e=Pn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function EN(e){return new Promise((t,n)=>{var i,s,r;function a(){Lv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Lv(),n(Mn(e,"network-request-failed"))},timeout:vN.get()})}if(!((s=(i=Pn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((r=Pn().gapi)===null||r===void 0)&&r.load)a();else{const o=dO("iframefcb");return Pn()[o]=()=>{gapi.load?a():n(Mn(e,"network-request-failed"))},$b(`${hO()}?onload=${o}`).catch(u=>n(u))}}).catch(t=>{throw Hu=null,t})}let Hu=null;function TN(e){return Hu=Hu||EN(e),Hu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=new Tl(5e3,15e3),AN="__/auth/iframe",SN="emulator/auth/iframe",wN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IN(e){const t=e.config;$(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Fm(t,SN):`https://${e.config.authDomain}/${AN}`,i={apiKey:t.apiKey,appName:e.name,v:rr},s=RN.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${El(i).slice(1)}`}async function CN(e){const t=await TN(e),n=Pn().gapi;return $(n,e,"internal-error"),t.open({where:document.body,url:IN(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wN,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=Mn(e,"network-request-failed"),o=Pn().setTimeout(()=>{r(a)},bN.get());function u(){Pn().clearTimeout(o),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ON=500,NN=600,DN="_blank",kN="http://localhost";class Uv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MN(e,t,n,i=ON,s=NN){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const u=Object.assign(Object.assign({},xN),{width:i.toString(),height:s.toString(),top:r,left:a}),c=Te().toLowerCase();n&&(o=jb(c)?DN:n),Lb(c)&&(t=t||kN,u.scrollbars="yes");const d=Object.entries(u).reduce((p,[v,R])=>`${p}${v}=${R},`,"");if(nO(c)&&o!=="_self")return PN(t||"",o),new Uv(null);const m=window.open(t||"",o,d);$(m,e,"popup-blocked");try{m.focus()}catch{}return new Uv(m)}function PN(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="__/auth/handler",LN="emulator/auth/handler",UN=encodeURIComponent("fac");async function jv(e,t,n,i,s,r){$(e.config.authDomain,e,"auth-domain-config-required"),$(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:rr,eventId:s};if(t instanceof Yb){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",bC(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,m]of Object.entries(r||{}))a[d]=m}if(t instanceof Al){const d=t.getScopes().filter(m=>m!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const u=await e._getAppCheckToken(),c=u?`#${UN}=${encodeURIComponent(u)}`:"";return`${jN(e)}?${El(o).slice(1)}${c}`}function jN({config:e}){return e.emulator?Fm(e,LN):`https://${e.authDomain}/${VN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="webStorageSupport";class zN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nA,this._completeRedirectFn=cN,this._overrideRedirectResult=oN}async _openPopup(t,n,i,s){var r;fi((r=this.eventManagers[t._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const a=await jv(t,n,i,dp(),s);return MN(t,a,Km())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await jv(t,n,i,dp(),s);return HO(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(fi(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await CN(t),i=new dN(t);return n.register("authEvent",s=>($(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Qd,{type:Qd},s=>{var r;const a=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[Qd];a!==void 0&&n(!!a),vn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_N(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return qb()||Ub()||qm()}}const BN=zN;var zv="@firebase/auth",Bv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qN(e){Qs(new ss("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;$(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gb(e)},c=new lO(i,s,r,u);return yO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Qs(new ss("auth-internal",t=>{const n=ar(t.getProvider("auth").getImmediate());return(i=>new FN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kn(zv,Bv,HN(e)),kn(zv,Bv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=5*60,$N=bb("authIdTokenMaxAge")||GN;let Fv=null;const KN=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>$N)return;const s=n==null?void 0:n.token;Fv!==s&&(Fv=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function QN(e=jm()){const t=mh(e,"auth");if(t.isInitialized())return t.getImmediate();const n=_O(e,{popupRedirectResolver:BN,persistence:[ZO,zO,nA]}),i=bb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=KN(r.toString());VO(n,a,()=>a(n.currentUser)),PO(n,o=>a(o))}}const s=vb("auth");return s&&vO(n,`http://${s}`),n}function YN(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}uO({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=Mn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",YN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qN("Browser");var Hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ji,uA;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(b,y){function S(){}S.prototype=y.prototype,b.D=y.prototype,b.prototype=new S,b.prototype.constructor=b,b.C=function(w,I,N){for(var C=Array(arguments.length-2),je=2;je<arguments.length;je++)C[je-2]=arguments[je];return y.prototype[I].apply(w,C)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,y,S){S||(S=0);var w=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)w[I]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(I=0;16>I;++I)w[I]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=b.g[0],S=b.g[1],I=b.g[2];var N=b.g[3],C=y+(N^S&(I^N))+w[0]+3614090360&4294967295;y=S+(C<<7&4294967295|C>>>25),C=N+(I^y&(S^I))+w[1]+3905402710&4294967295,N=y+(C<<12&4294967295|C>>>20),C=I+(S^N&(y^S))+w[2]+606105819&4294967295,I=N+(C<<17&4294967295|C>>>15),C=S+(y^I&(N^y))+w[3]+3250441966&4294967295,S=I+(C<<22&4294967295|C>>>10),C=y+(N^S&(I^N))+w[4]+4118548399&4294967295,y=S+(C<<7&4294967295|C>>>25),C=N+(I^y&(S^I))+w[5]+1200080426&4294967295,N=y+(C<<12&4294967295|C>>>20),C=I+(S^N&(y^S))+w[6]+2821735955&4294967295,I=N+(C<<17&4294967295|C>>>15),C=S+(y^I&(N^y))+w[7]+4249261313&4294967295,S=I+(C<<22&4294967295|C>>>10),C=y+(N^S&(I^N))+w[8]+1770035416&4294967295,y=S+(C<<7&4294967295|C>>>25),C=N+(I^y&(S^I))+w[9]+2336552879&4294967295,N=y+(C<<12&4294967295|C>>>20),C=I+(S^N&(y^S))+w[10]+4294925233&4294967295,I=N+(C<<17&4294967295|C>>>15),C=S+(y^I&(N^y))+w[11]+2304563134&4294967295,S=I+(C<<22&4294967295|C>>>10),C=y+(N^S&(I^N))+w[12]+1804603682&4294967295,y=S+(C<<7&4294967295|C>>>25),C=N+(I^y&(S^I))+w[13]+4254626195&4294967295,N=y+(C<<12&4294967295|C>>>20),C=I+(S^N&(y^S))+w[14]+2792965006&4294967295,I=N+(C<<17&4294967295|C>>>15),C=S+(y^I&(N^y))+w[15]+1236535329&4294967295,S=I+(C<<22&4294967295|C>>>10),C=y+(I^N&(S^I))+w[1]+4129170786&4294967295,y=S+(C<<5&4294967295|C>>>27),C=N+(S^I&(y^S))+w[6]+3225465664&4294967295,N=y+(C<<9&4294967295|C>>>23),C=I+(y^S&(N^y))+w[11]+643717713&4294967295,I=N+(C<<14&4294967295|C>>>18),C=S+(N^y&(I^N))+w[0]+3921069994&4294967295,S=I+(C<<20&4294967295|C>>>12),C=y+(I^N&(S^I))+w[5]+3593408605&4294967295,y=S+(C<<5&4294967295|C>>>27),C=N+(S^I&(y^S))+w[10]+38016083&4294967295,N=y+(C<<9&4294967295|C>>>23),C=I+(y^S&(N^y))+w[15]+3634488961&4294967295,I=N+(C<<14&4294967295|C>>>18),C=S+(N^y&(I^N))+w[4]+3889429448&4294967295,S=I+(C<<20&4294967295|C>>>12),C=y+(I^N&(S^I))+w[9]+568446438&4294967295,y=S+(C<<5&4294967295|C>>>27),C=N+(S^I&(y^S))+w[14]+3275163606&4294967295,N=y+(C<<9&4294967295|C>>>23),C=I+(y^S&(N^y))+w[3]+4107603335&4294967295,I=N+(C<<14&4294967295|C>>>18),C=S+(N^y&(I^N))+w[8]+1163531501&4294967295,S=I+(C<<20&4294967295|C>>>12),C=y+(I^N&(S^I))+w[13]+2850285829&4294967295,y=S+(C<<5&4294967295|C>>>27),C=N+(S^I&(y^S))+w[2]+4243563512&4294967295,N=y+(C<<9&4294967295|C>>>23),C=I+(y^S&(N^y))+w[7]+1735328473&4294967295,I=N+(C<<14&4294967295|C>>>18),C=S+(N^y&(I^N))+w[12]+2368359562&4294967295,S=I+(C<<20&4294967295|C>>>12),C=y+(S^I^N)+w[5]+4294588738&4294967295,y=S+(C<<4&4294967295|C>>>28),C=N+(y^S^I)+w[8]+2272392833&4294967295,N=y+(C<<11&4294967295|C>>>21),C=I+(N^y^S)+w[11]+1839030562&4294967295,I=N+(C<<16&4294967295|C>>>16),C=S+(I^N^y)+w[14]+4259657740&4294967295,S=I+(C<<23&4294967295|C>>>9),C=y+(S^I^N)+w[1]+2763975236&4294967295,y=S+(C<<4&4294967295|C>>>28),C=N+(y^S^I)+w[4]+1272893353&4294967295,N=y+(C<<11&4294967295|C>>>21),C=I+(N^y^S)+w[7]+4139469664&4294967295,I=N+(C<<16&4294967295|C>>>16),C=S+(I^N^y)+w[10]+3200236656&4294967295,S=I+(C<<23&4294967295|C>>>9),C=y+(S^I^N)+w[13]+681279174&4294967295,y=S+(C<<4&4294967295|C>>>28),C=N+(y^S^I)+w[0]+3936430074&4294967295,N=y+(C<<11&4294967295|C>>>21),C=I+(N^y^S)+w[3]+3572445317&4294967295,I=N+(C<<16&4294967295|C>>>16),C=S+(I^N^y)+w[6]+76029189&4294967295,S=I+(C<<23&4294967295|C>>>9),C=y+(S^I^N)+w[9]+3654602809&4294967295,y=S+(C<<4&4294967295|C>>>28),C=N+(y^S^I)+w[12]+3873151461&4294967295,N=y+(C<<11&4294967295|C>>>21),C=I+(N^y^S)+w[15]+530742520&4294967295,I=N+(C<<16&4294967295|C>>>16),C=S+(I^N^y)+w[2]+3299628645&4294967295,S=I+(C<<23&4294967295|C>>>9),C=y+(I^(S|~N))+w[0]+4096336452&4294967295,y=S+(C<<6&4294967295|C>>>26),C=N+(S^(y|~I))+w[7]+1126891415&4294967295,N=y+(C<<10&4294967295|C>>>22),C=I+(y^(N|~S))+w[14]+2878612391&4294967295,I=N+(C<<15&4294967295|C>>>17),C=S+(N^(I|~y))+w[5]+4237533241&4294967295,S=I+(C<<21&4294967295|C>>>11),C=y+(I^(S|~N))+w[12]+1700485571&4294967295,y=S+(C<<6&4294967295|C>>>26),C=N+(S^(y|~I))+w[3]+2399980690&4294967295,N=y+(C<<10&4294967295|C>>>22),C=I+(y^(N|~S))+w[10]+4293915773&4294967295,I=N+(C<<15&4294967295|C>>>17),C=S+(N^(I|~y))+w[1]+2240044497&4294967295,S=I+(C<<21&4294967295|C>>>11),C=y+(I^(S|~N))+w[8]+1873313359&4294967295,y=S+(C<<6&4294967295|C>>>26),C=N+(S^(y|~I))+w[15]+4264355552&4294967295,N=y+(C<<10&4294967295|C>>>22),C=I+(y^(N|~S))+w[6]+2734768916&4294967295,I=N+(C<<15&4294967295|C>>>17),C=S+(N^(I|~y))+w[13]+1309151649&4294967295,S=I+(C<<21&4294967295|C>>>11),C=y+(I^(S|~N))+w[4]+4149444226&4294967295,y=S+(C<<6&4294967295|C>>>26),C=N+(S^(y|~I))+w[11]+3174756917&4294967295,N=y+(C<<10&4294967295|C>>>22),C=I+(y^(N|~S))+w[2]+718787259&4294967295,I=N+(C<<15&4294967295|C>>>17),C=S+(N^(I|~y))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(I+(C<<21&4294967295|C>>>11))&4294967295,b.g[2]=b.g[2]+I&4294967295,b.g[3]=b.g[3]+N&4294967295}i.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var S=y-this.blockSize,w=this.B,I=this.h,N=0;N<y;){if(I==0)for(;N<=S;)s(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<y;)if(w[I++]=b.charCodeAt(N++),I==this.blockSize){s(this,w),I=0;break}}else for(;N<y;)if(w[I++]=b[N++],I==this.blockSize){s(this,w),I=0;break}}this.h=I,this.o+=y},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var S=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=S&255,S/=256;for(this.u(b),b=Array(16),y=S=0;4>y;++y)for(var w=0;32>w;w+=8)b[S++]=this.g[y]>>>w&255;return b};function r(b,y){var S=o;return Object.prototype.hasOwnProperty.call(S,b)?S[b]:S[b]=y(b)}function a(b,y){this.h=y;for(var S=[],w=!0,I=b.length-1;0<=I;I--){var N=b[I]|0;w&&N==y||(S[I]=N,w=!1)}this.g=S}var o={};function u(b){return-128<=b&&128>b?r(b,function(y){return new a([y|0],0>y?-1:0)}):new a([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return m;if(0>b)return D(c(-b));for(var y=[],S=1,w=0;b>=S;w++)y[w]=b/S|0,S*=4294967296;return new a(y,0)}function d(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return D(d(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(y,8)),w=m,I=0;I<b.length;I+=8){var N=Math.min(8,b.length-I),C=parseInt(b.substring(I,I+N),y);8>N?(N=c(Math.pow(y,N)),w=w.j(N).add(c(C))):(w=w.j(S),w=w.add(c(C)))}return w}var m=u(0),p=u(1),v=u(16777216);e=a.prototype,e.m=function(){if(O(this))return-D(this).m();for(var b=0,y=1,S=0;S<this.g.length;S++){var w=this.i(S);b+=(0<=w?w:4294967296+w)*y,y*=4294967296}return b},e.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(O(this))return"-"+D(this).toString(b);for(var y=c(Math.pow(b,6)),S=this,w="";;){var I=x(S,y).g;S=T(S,I.j(y));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(b);if(S=I,R(S))return N+w;for(;6>N.length;)N="0"+N;w=N+w}},e.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function O(b){return b.h==-1}e.l=function(b){return b=T(this,b),O(b)?-1:R(b)?0:1};function D(b){for(var y=b.g.length,S=[],w=0;w<y;w++)S[w]=~b.g[w];return new a(S,~b.h).add(p)}e.abs=function(){return O(this)?D(this):this},e.add=function(b){for(var y=Math.max(this.g.length,b.g.length),S=[],w=0,I=0;I<=y;I++){var N=w+(this.i(I)&65535)+(b.i(I)&65535),C=(N>>>16)+(this.i(I)>>>16)+(b.i(I)>>>16);w=C>>>16,N&=65535,C&=65535,S[I]=C<<16|N}return new a(S,S[S.length-1]&-2147483648?-1:0)};function T(b,y){return b.add(D(y))}e.j=function(b){if(R(this)||R(b))return m;if(O(this))return O(b)?D(this).j(D(b)):D(D(this).j(b));if(O(b))return D(this.j(D(b)));if(0>this.l(v)&&0>b.l(v))return c(this.m()*b.m());for(var y=this.g.length+b.g.length,S=[],w=0;w<2*y;w++)S[w]=0;for(w=0;w<this.g.length;w++)for(var I=0;I<b.g.length;I++){var N=this.i(w)>>>16,C=this.i(w)&65535,je=b.i(I)>>>16,fn=b.i(I)&65535;S[2*w+2*I]+=C*fn,_(S,2*w+2*I),S[2*w+2*I+1]+=N*fn,_(S,2*w+2*I+1),S[2*w+2*I+1]+=C*je,_(S,2*w+2*I+1),S[2*w+2*I+2]+=N*je,_(S,2*w+2*I+2)}for(w=0;w<y;w++)S[w]=S[2*w+1]<<16|S[2*w];for(w=y;w<2*y;w++)S[w]=0;return new a(S,0)};function _(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function A(b,y){this.g=b,this.h=y}function x(b,y){if(R(y))throw Error("division by zero");if(R(b))return new A(m,m);if(O(b))return y=x(D(b),y),new A(D(y.g),D(y.h));if(O(y))return y=x(b,D(y)),new A(D(y.g),y.h);if(30<b.g.length){if(O(b)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var S=p,w=y;0>=w.l(b);)S=M(S),w=M(w);var I=V(S,1),N=V(w,1);for(w=V(w,2),S=V(S,2);!R(w);){var C=N.add(w);0>=C.l(b)&&(I=I.add(S),N=C),w=V(w,1),S=V(S,1)}return y=T(b,I.j(y)),new A(I,y)}for(I=m;0<=b.l(y);){for(S=Math.max(1,Math.floor(b.m()/y.m())),w=Math.ceil(Math.log(S)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),N=c(S),C=N.j(y);O(C)||0<C.l(b);)S-=w,N=c(S),C=N.j(y);R(N)&&(N=p),I=I.add(N),b=T(b,C)}return new A(I,b)}e.A=function(b){return x(this,b).h},e.and=function(b){for(var y=Math.max(this.g.length,b.g.length),S=[],w=0;w<y;w++)S[w]=this.i(w)&b.i(w);return new a(S,this.h&b.h)},e.or=function(b){for(var y=Math.max(this.g.length,b.g.length),S=[],w=0;w<y;w++)S[w]=this.i(w)|b.i(w);return new a(S,this.h|b.h)},e.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),S=[],w=0;w<y;w++)S[w]=this.i(w)^b.i(w);return new a(S,this.h^b.h)};function M(b){for(var y=b.g.length+1,S=[],w=0;w<y;w++)S[w]=b.i(w)<<1|b.i(w-1)>>>31;return new a(S,b.h)}function V(b,y){var S=y>>5;y%=32;for(var w=b.g.length-S,I=[],N=0;N<w;N++)I[N]=0<y?b.i(N+S)>>>y|b.i(N+S+1)<<32-y:b.i(N+S);return new a(I,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,uA=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,Ji=a}).apply(typeof Hv<"u"?Hv:typeof self<"u"?self:typeof window<"u"?window:{});var gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cA,so,hA,qu,gp,dA,fA,pA;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,f){return l==Array.prototype||l==Object.prototype||(l[h]=f.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof gu=="object"&&gu];for(var h=0;h<l.length;++h){var f=l[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function s(l,h){if(h)t:{var f=i;l=l.split(".");for(var E=0;E<l.length-1;E++){var k=l[E];if(!(k in f))break t;f=f[k]}l=l[l.length-1],E=f[l],h=h(E),h!=E&&h!=null&&t(f,l,{configurable:!0,writable:!0,value:h})}}function r(l,h){l instanceof String&&(l+="");var f=0,E=!1,k={next:function(){if(!E&&f<l.length){var P=f++;return{value:h(P,l[P]),done:!1}}return E=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}s("Array.prototype.values",function(l){return l||function(){return r(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,f){return l.call.apply(l.bind,arguments)}function m(l,h,f){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,E),l.apply(h,k)}}return function(){return l.apply(h,arguments)}}function p(l,h,f){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,p.apply(null,arguments)}function v(l,h){var f=Array.prototype.slice.call(arguments,1);return function(){var E=f.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function R(l,h){function f(){}f.prototype=h.prototype,l.aa=h.prototype,l.prototype=new f,l.prototype.constructor=l,l.Qb=function(E,k,P){for(var z=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)z[_t-2]=arguments[_t];return h.prototype[k].apply(E,z)}}function O(l){const h=l.length;if(0<h){const f=Array(h);for(let E=0;E<h;E++)f[E]=l[E];return f}return[]}function D(l,h){for(let f=1;f<arguments.length;f++){const E=arguments[f];if(u(E)){const k=l.length||0,P=E.length||0;l.length=k+P;for(let z=0;z<P;z++)l[k+z]=E[z]}else l.push(E)}}class T{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(l){return/^[\s\xa0]*$/.test(l)}function A(){var l=o.navigator;return l&&(l=l.userAgent)?l:""}function x(l){return x[" "](l),l}x[" "]=function(){};var M=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function V(l,h,f){for(const E in l)h.call(f,l[E],E,l)}function b(l,h){for(const f in l)h.call(void 0,l[f],f,l)}function y(l){const h={};for(const f in l)h[f]=l[f];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(l,h){let f,E;for(let k=1;k<arguments.length;k++){E=arguments[k];for(f in E)l[f]=E[f];for(let P=0;P<S.length;P++)f=S[P],Object.prototype.hasOwnProperty.call(E,f)&&(l[f]=E[f])}}function I(l){var h=1;l=l.split(":");const f=[];for(;0<h&&l.length;)f.push(l.shift()),h--;return l.length&&f.push(l.join(":")),f}function N(l){o.setTimeout(()=>{throw l},0)}function C(){var l=Tt;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class je{constructor(){this.h=this.g=null}add(h,f){const E=fn.get();E.set(h,f),this.h?this.h.next=E:this.g=E,this.h=E}}var fn=new T(()=>new H,l=>l.reset());class H{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,X=!1,Tt=new je,jt=()=>{const l=o.Promise.resolve(void 0);Z=()=>{l.then(hr)}};var hr=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(f){N(f)}var h=fn;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}X=!1};function ze(){this.s=this.s,this.C=this.C}ze.prototype.s=!1,ze.prototype.ma=function(){this.s||(this.s=!0,this.N())},ze.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ht(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Ht.prototype.h=function(){this.defaultPrevented=!0};var qn=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const f=()=>{};o.addEventListener("test",f,h),o.removeEventListener("test",f,h)}catch{}return l}();function An(l,h){if(Ht.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var f=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(M){t:{try{x(h.nodeName);var k=!0;break t}catch{}k=!1}k||(h=null)}}else f=="mouseover"?h=l.fromElement:f=="mouseout"&&(h=l.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:bw[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&An.aa.h.call(this)}}R(An,Ht);var bw={2:"touch",3:"pen",4:"mouse"};An.prototype.h=function(){An.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ia="closure_listenable_"+(1e6*Math.random()|0),Aw=0;function Sw(l,h,f,E,k){this.listener=l,this.proxy=null,this.src=h,this.type=f,this.capture=!!E,this.ha=k,this.key=++Aw,this.da=this.fa=!1}function Vl(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ll(l){this.src=l,this.g={},this.h=0}Ll.prototype.add=function(l,h,f,E,k){var P=l.toString();l=this.g[P],l||(l=this.g[P]=[],this.h++);var z=Uh(l,h,E,k);return-1<z?(h=l[z],f||(h.fa=!1)):(h=new Sw(h,this.src,P,!!E,k),h.fa=f,l.push(h)),h};function Lh(l,h){var f=h.type;if(f in l.g){var E=l.g[f],k=Array.prototype.indexOf.call(E,h,void 0),P;(P=0<=k)&&Array.prototype.splice.call(E,k,1),P&&(Vl(h),l.g[f].length==0&&(delete l.g[f],l.h--))}}function Uh(l,h,f,E){for(var k=0;k<l.length;++k){var P=l[k];if(!P.da&&P.listener==h&&P.capture==!!f&&P.ha==E)return k}return-1}var jh="closure_lm_"+(1e6*Math.random()|0),zh={};function Hg(l,h,f,E,k){if(E&&E.once)return Gg(l,h,f,E,k);if(Array.isArray(h)){for(var P=0;P<h.length;P++)Hg(l,h[P],f,E,k);return null}return f=qh(f),l&&l[Ia]?l.K(h,f,c(E)?!!E.capture:!!E,k):qg(l,h,f,!1,E,k)}function qg(l,h,f,E,k,P){if(!h)throw Error("Invalid event type");var z=c(k)?!!k.capture:!!k,_t=Fh(l);if(_t||(l[jh]=_t=new Ll(l)),f=_t.add(h,f,E,z,P),f.proxy)return f;if(E=ww(),f.proxy=E,E.src=l,E.listener=f,l.addEventListener)qn||(k=z),k===void 0&&(k=!1),l.addEventListener(h.toString(),E,k);else if(l.attachEvent)l.attachEvent(Kg(h.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ww(){function l(f){return h.call(l.src,l.listener,f)}const h=Rw;return l}function Gg(l,h,f,E,k){if(Array.isArray(h)){for(var P=0;P<h.length;P++)Gg(l,h[P],f,E,k);return null}return f=qh(f),l&&l[Ia]?l.L(h,f,c(E)?!!E.capture:!!E,k):qg(l,h,f,!0,E,k)}function $g(l,h,f,E,k){if(Array.isArray(h))for(var P=0;P<h.length;P++)$g(l,h[P],f,E,k);else E=c(E)?!!E.capture:!!E,f=qh(f),l&&l[Ia]?(l=l.i,h=String(h).toString(),h in l.g&&(P=l.g[h],f=Uh(P,f,E,k),-1<f&&(Vl(P[f]),Array.prototype.splice.call(P,f,1),P.length==0&&(delete l.g[h],l.h--)))):l&&(l=Fh(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Uh(h,f,E,k)),(f=-1<l?h[l]:null)&&Bh(f))}function Bh(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Ia])Lh(h.i,l);else{var f=l.type,E=l.proxy;h.removeEventListener?h.removeEventListener(f,E,l.capture):h.detachEvent?h.detachEvent(Kg(f),E):h.addListener&&h.removeListener&&h.removeListener(E),(f=Fh(h))?(Lh(f,l),f.h==0&&(f.src=null,h[jh]=null)):Vl(l)}}}function Kg(l){return l in zh?zh[l]:zh[l]="on"+l}function Rw(l,h){if(l.da)l=!0;else{h=new An(h,this);var f=l.listener,E=l.ha||l.src;l.fa&&Bh(l),l=f.call(E,h)}return l}function Fh(l){return l=l[jh],l instanceof Ll?l:null}var Hh="__closure_events_fn_"+(1e9*Math.random()>>>0);function qh(l){return typeof l=="function"?l:(l[Hh]||(l[Hh]=function(h){return l.handleEvent(h)}),l[Hh])}function fe(){ze.call(this),this.i=new Ll(this),this.M=this,this.F=null}R(fe,ze),fe.prototype[Ia]=!0,fe.prototype.removeEventListener=function(l,h,f,E){$g(this,l,h,f,E)};function be(l,h){var f,E=l.F;if(E)for(f=[];E;E=E.F)f.push(E);if(l=l.M,E=h.type||h,typeof h=="string")h=new Ht(h,l);else if(h instanceof Ht)h.target=h.target||l;else{var k=h;h=new Ht(E,l),w(h,k)}if(k=!0,f)for(var P=f.length-1;0<=P;P--){var z=h.g=f[P];k=Ul(z,E,!0,h)&&k}if(z=h.g=l,k=Ul(z,E,!0,h)&&k,k=Ul(z,E,!1,h)&&k,f)for(P=0;P<f.length;P++)z=h.g=f[P],k=Ul(z,E,!1,h)&&k}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var f=l.g[h],E=0;E<f.length;E++)Vl(f[E]);delete l.g[h],l.h--}}this.F=null},fe.prototype.K=function(l,h,f,E){return this.i.add(String(l),h,!1,f,E)},fe.prototype.L=function(l,h,f,E){return this.i.add(String(l),h,!0,f,E)};function Ul(l,h,f,E){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var k=!0,P=0;P<h.length;++P){var z=h[P];if(z&&!z.da&&z.capture==f){var _t=z.listener,se=z.ha||z.src;z.fa&&Lh(l.i,z),k=_t.call(se,E)!==!1&&k}}return k&&!E.defaultPrevented}function Qg(l,h,f){if(typeof l=="function")f&&(l=p(l,f));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:o.setTimeout(l,h||0)}function Yg(l){l.g=Qg(()=>{l.g=null,l.i&&(l.i=!1,Yg(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Iw extends ze{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Yg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ca(l){ze.call(this),this.h=l,this.g={}}R(Ca,ze);var Xg=[];function Wg(l){V(l.g,function(h,f){this.g.hasOwnProperty(f)&&Bh(h)},l),l.g={}}Ca.prototype.N=function(){Ca.aa.N.call(this),Wg(this)},Ca.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gh=o.JSON.stringify,Cw=o.JSON.parse,xw=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function $h(){}$h.prototype.h=null;function Zg(l){return l.h||(l.h=l.i())}function Jg(){}var xa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kh(){Ht.call(this,"d")}R(Kh,Ht);function Qh(){Ht.call(this,"c")}R(Qh,Ht);var vs={},t_=null;function jl(){return t_=t_||new fe}vs.La="serverreachability";function e_(l){Ht.call(this,vs.La,l)}R(e_,Ht);function Oa(l){const h=jl();be(h,new e_(h))}vs.STAT_EVENT="statevent";function n_(l,h){Ht.call(this,vs.STAT_EVENT,l),this.stat=h}R(n_,Ht);function Ae(l){const h=jl();be(h,new n_(h,l))}vs.Ma="timingevent";function i_(l,h){Ht.call(this,vs.Ma,l),this.size=h}R(i_,Ht);function Na(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function Da(){this.g=!0}Da.prototype.xa=function(){this.g=!1};function Ow(l,h,f,E,k,P){l.info(function(){if(l.g)if(P)for(var z="",_t=P.split("&"),se=0;se<_t.length;se++){var lt=_t[se].split("=");if(1<lt.length){var pe=lt[0];lt=lt[1];var me=pe.split("_");z=2<=me.length&&me[1]=="type"?z+(pe+"="+lt+"&"):z+(pe+"=redacted&")}}else z=null;else z=P;return"XMLHTTP REQ ("+E+") [attempt "+k+"]: "+h+`
`+f+`
`+z})}function Nw(l,h,f,E,k,P,z){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+k+"]: "+h+`
`+f+`
`+P+" "+z})}function dr(l,h,f,E){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+kw(l,f)+(E?" "+E:"")})}function Dw(l,h){l.info(function(){return"TIMEOUT: "+h})}Da.prototype.info=function(){};function kw(l,h){if(!l.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(l=0;l<f.length;l++)if(Array.isArray(f[l])){var E=f[l];if(!(2>E.length)){var k=E[1];if(Array.isArray(k)&&!(1>k.length)){var P=k[0];if(P!="noop"&&P!="stop"&&P!="close")for(var z=1;z<k.length;z++)k[z]=""}}}}return Gh(f)}catch{return h}}var zl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},s_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yh;function Bl(){}R(Bl,$h),Bl.prototype.g=function(){return new XMLHttpRequest},Bl.prototype.i=function(){return{}},Yh=new Bl;function vi(l,h,f,E){this.j=l,this.i=h,this.l=f,this.R=E||1,this.U=new Ca(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new r_}function r_(){this.i=null,this.g="",this.h=!1}var a_={},Xh={};function Wh(l,h,f){l.L=1,l.v=Gl(Gn(h)),l.m=f,l.P=!0,o_(l,null)}function o_(l,h){l.F=Date.now(),Fl(l),l.A=Gn(l.v);var f=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),T_(f.i,"t",E),l.C=0,f=l.j.J,l.h=new r_,l.g=j_(l.j,f?h:null,!l.m),0<l.O&&(l.M=new Iw(p(l.Y,l,l.g),l.O)),h=l.U,f=l.g,E=l.ca;var k="readystatechange";Array.isArray(k)||(k&&(Xg[0]=k.toString()),k=Xg);for(var P=0;P<k.length;P++){var z=Hg(f,k[P],E||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Oa(),Ow(l.i,l.u,l.A,l.l,l.R,l.m)}vi.prototype.ca=function(l){l=l.target;const h=this.M;h&&$n(l)==3?h.j():this.Y(l)},vi.prototype.Y=function(l){try{if(l==this.g)t:{const me=$n(this.g);var h=this.g.Ba();const mr=this.g.Z();if(!(3>me)&&(me!=3||this.g&&(this.h.h||this.g.oa()||C_(this.g)))){this.J||me!=4||h==7||(h==8||0>=mr?Oa(3):Oa(2)),Zh(this);var f=this.g.Z();this.X=f;e:if(l_(this)){var E=C_(this.g);l="";var k=E.length,P=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Es(this),ka(this);var z="";break e}this.h.i=new o.TextDecoder}for(h=0;h<k;h++)this.h.h=!0,l+=this.h.i.decode(E[h],{stream:!(P&&h==k-1)});E.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,Nw(this.i,this.u,this.A,this.l,this.R,me,f),this.o){if(this.T&&!this.K){e:{if(this.g){var _t,se=this.g;if((_t=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(_t)){var lt=_t;break e}}lt=null}if(f=lt)dr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jh(this,f);else{this.o=!1,this.s=3,Ae(12),Es(this),ka(this);break t}}if(this.P){f=!0;let pn;for(;!this.J&&this.C<z.length;)if(pn=Mw(this,z),pn==Xh){me==4&&(this.s=4,Ae(14),f=!1),dr(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==a_){this.s=4,Ae(15),dr(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else dr(this.i,this.l,pn,null),Jh(this,pn);if(l_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||z.length!=0||this.h.h||(this.s=1,Ae(16),f=!1),this.o=this.o&&f,!f)dr(this.i,this.l,z,"[Invalid Chunked Response]"),Es(this),ka(this);else if(0<z.length&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.ba&&!pe.M&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),rd(pe),pe.M=!0,Ae(11))}}else dr(this.i,this.l,z,null),Jh(this,z);me==4&&Es(this),this.o&&!this.J&&(me==4?P_(this.j,this):(this.o=!1,Fl(this)))}else Ww(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,Ae(12)):(this.s=0,Ae(13)),Es(this),ka(this)}}}catch{}finally{}};function l_(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Mw(l,h){var f=l.C,E=h.indexOf(`
`,f);return E==-1?Xh:(f=Number(h.substring(f,E)),isNaN(f)?a_:(E+=1,E+f>h.length?Xh:(h=h.slice(E,E+f),l.C=E+f,h)))}vi.prototype.cancel=function(){this.J=!0,Es(this)};function Fl(l){l.S=Date.now()+l.I,u_(l,l.I)}function u_(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Na(p(l.ba,l),h)}function Zh(l){l.B&&(o.clearTimeout(l.B),l.B=null)}vi.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Dw(this.i,this.A),this.L!=2&&(Oa(),Ae(17)),Es(this),this.s=2,ka(this)):u_(this,this.S-l)};function ka(l){l.j.G==0||l.J||P_(l.j,l)}function Es(l){Zh(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Wg(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Jh(l,h){try{var f=l.j;if(f.G!=0&&(f.g==l||td(f.h,l))){if(!l.K&&td(f.h,l)&&f.G==3){try{var E=f.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var k=E;if(k[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<l.F)Wl(f),Yl(f);else break t;sd(f),Ae(18)}}else f.za=k[1],0<f.za-f.T&&37500>k[2]&&f.F&&f.v==0&&!f.C&&(f.C=Na(p(f.Za,f),6e3));if(1>=d_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else bs(f,11)}else if((l.K||f.g==l)&&Wl(f),!_(h))for(k=f.Da.g.parse(h),h=0;h<k.length;h++){let lt=k[h];if(f.T=lt[0],lt=lt[1],f.G==2)if(lt[0]=="c"){f.K=lt[1],f.ia=lt[2];const pe=lt[3];pe!=null&&(f.la=pe,f.j.info("VER="+f.la));const me=lt[4];me!=null&&(f.Aa=me,f.j.info("SVER="+f.Aa));const mr=lt[5];mr!=null&&typeof mr=="number"&&0<mr&&(E=1.5*mr,f.L=E,f.j.info("backChannelRequestTimeoutMs_="+E)),E=f;const pn=l.g;if(pn){const Jl=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jl){var P=E.h;P.g||Jl.indexOf("spdy")==-1&&Jl.indexOf("quic")==-1&&Jl.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(ed(P,P.h),P.h=null))}if(E.D){const ad=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;ad&&(E.ya=ad,bt(E.I,E.D,ad))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-l.F,f.j.info("Handshake RTT: "+f.R+"ms")),E=f;var z=l;if(E.qa=U_(E,E.J?E.ia:null,E.W),z.K){f_(E.h,z);var _t=z,se=E.L;se&&(_t.I=se),_t.B&&(Zh(_t),Fl(_t)),E.g=z}else k_(E);0<f.i.length&&Xl(f)}else lt[0]!="stop"&&lt[0]!="close"||bs(f,7);else f.G==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?bs(f,7):id(f):lt[0]!="noop"&&f.l&&f.l.ta(lt),f.v=0)}}Oa(4)}catch{}}var Pw=class{constructor(l,h){this.g=l,this.map=h}};function c_(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function h_(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function d_(l){return l.h?1:l.g?l.g.size:0}function td(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function ed(l,h){l.g?l.g.add(h):l.h=h}function f_(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}c_.prototype.cancel=function(){if(this.i=p_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function p_(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const f of l.g.values())h=h.concat(f.D);return h}return O(l.i)}function Vw(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],f=l.length,E=0;E<f;E++)h.push(l[E]);return h}h=[],f=0;for(E in l)h[f++]=l[E];return h}function Lw(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var f=0;f<l;f++)h.push(f);return h}h=[],f=0;for(const E in l)h[f++]=E;return h}}}function m_(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var f=Lw(l),E=Vw(l),k=E.length,P=0;P<k;P++)h.call(void 0,E[P],f&&f[P],l)}var g_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uw(l,h){if(l){l=l.split("&");for(var f=0;f<l.length;f++){var E=l[f].indexOf("="),k=null;if(0<=E){var P=l[f].substring(0,E);k=l[f].substring(E+1)}else P=l[f];h(P,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Ts(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ts){this.h=l.h,Hl(this,l.j),this.o=l.o,this.g=l.g,ql(this,l.s),this.l=l.l;var h=l.i,f=new Va;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),__(this,f),this.m=l.m}else l&&(h=String(l).match(g_))?(this.h=!1,Hl(this,h[1]||"",!0),this.o=Ma(h[2]||""),this.g=Ma(h[3]||"",!0),ql(this,h[4]),this.l=Ma(h[5]||"",!0),__(this,h[6]||"",!0),this.m=Ma(h[7]||"")):(this.h=!1,this.i=new Va(null,this.h))}Ts.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Pa(h,y_,!0),":");var f=this.g;return(f||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Pa(h,y_,!0),"@"),l.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&l.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(Pa(f,f.charAt(0)=="/"?Bw:zw,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",Pa(f,Hw)),l.join("")};function Gn(l){return new Ts(l)}function Hl(l,h,f){l.j=f?Ma(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function ql(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function __(l,h,f){h instanceof Va?(l.i=h,qw(l.i,l.h)):(f||(h=Pa(h,Fw)),l.i=new Va(h,l.h))}function bt(l,h,f){l.i.set(h,f)}function Gl(l){return bt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ma(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Pa(l,h,f){return typeof l=="string"?(l=encodeURI(l).replace(h,jw),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function jw(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var y_=/[#\/\?@]/g,zw=/[#\?:]/g,Bw=/[#\?]/g,Fw=/[#\?@]/g,Hw=/#/g;function Va(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Ei(l){l.g||(l.g=new Map,l.h=0,l.i&&Uw(l.i,function(h,f){l.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}e=Va.prototype,e.add=function(l,h){Ei(this),this.i=null,l=fr(this,l);var f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(h),this.h+=1,this};function v_(l,h){Ei(l),h=fr(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function E_(l,h){return Ei(l),h=fr(l,h),l.g.has(h)}e.forEach=function(l,h){Ei(this),this.g.forEach(function(f,E){f.forEach(function(k){l.call(h,k,E,this)},this)},this)},e.na=function(){Ei(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let E=0;E<h.length;E++){const k=l[E];for(let P=0;P<k.length;P++)f.push(h[E])}return f},e.V=function(l){Ei(this);let h=[];if(typeof l=="string")E_(this,l)&&(h=h.concat(this.g.get(fr(this,l))));else{l=Array.from(this.g.values());for(let f=0;f<l.length;f++)h=h.concat(l[f])}return h},e.set=function(l,h){return Ei(this),this.i=null,l=fr(this,l),E_(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},e.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function T_(l,h,f){v_(l,h),0<f.length&&(l.i=null,l.g.set(fr(l,h),O(f)),l.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var E=h[f];const P=encodeURIComponent(String(E)),z=this.V(E);for(E=0;E<z.length;E++){var k=P;z[E]!==""&&(k+="="+encodeURIComponent(String(z[E]))),l.push(k)}}return this.i=l.join("&")};function fr(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function qw(l,h){h&&!l.j&&(Ei(l),l.i=null,l.g.forEach(function(f,E){var k=E.toLowerCase();E!=k&&(v_(this,E),T_(this,k,f))},l)),l.j=h}function Gw(l,h){const f=new Da;if(o.Image){const E=new Image;E.onload=v(Ti,f,"TestLoadImage: loaded",!0,h,E),E.onerror=v(Ti,f,"TestLoadImage: error",!1,h,E),E.onabort=v(Ti,f,"TestLoadImage: abort",!1,h,E),E.ontimeout=v(Ti,f,"TestLoadImage: timeout",!1,h,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else h(!1)}function $w(l,h){const f=new Da,E=new AbortController,k=setTimeout(()=>{E.abort(),Ti(f,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:E.signal}).then(P=>{clearTimeout(k),P.ok?Ti(f,"TestPingServer: ok",!0,h):Ti(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(k),Ti(f,"TestPingServer: error",!1,h)})}function Ti(l,h,f,E,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),E(f)}catch{}}function Kw(){this.g=new xw}function Qw(l,h,f){const E=f||"";try{m_(l,function(k,P){let z=k;c(k)&&(z=Gh(k)),h.push(E+P+"="+encodeURIComponent(z))})}catch(k){throw h.push(E+"type="+encodeURIComponent("_badmap")),k}}function $l(l){this.l=l.Ub||null,this.j=l.eb||!1}R($l,$h),$l.prototype.g=function(){return new Kl(this.l,this.j)},$l.prototype.i=function(l){return function(){return l}}({});function Kl(l,h){fe.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Kl,fe),e=Kl.prototype,e.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Ua(this)},e.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||o).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,La(this)),this.readyState=0},e.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;b_(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function b_(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}e.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?La(this):Ua(this),this.readyState==3&&b_(this)}},e.Ra=function(l){this.g&&(this.response=this.responseText=l,La(this))},e.Qa=function(l){this.g&&(this.response=l,La(this))},e.ga=function(){this.g&&La(this)};function La(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ua(l)}e.setRequestHeader=function(l,h){this.u.append(l,h)},e.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=h.next();return l.join(`\r
`)};function Ua(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Kl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function A_(l){let h="";return V(l,function(f,E){h+=E,h+=":",h+=f,h+=`\r
`}),h}function nd(l,h,f){t:{for(E in f){var E=!1;break t}E=!0}E||(f=A_(f),typeof l=="string"?f!=null&&encodeURIComponent(String(f)):bt(l,h,f))}function Dt(l){fe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Dt,fe);var Yw=/^https?$/i,Xw=["POST","PUT"];e=Dt.prototype,e.Ha=function(l){this.J=l},e.ea=function(l,h,f,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yh.g(),this.v=this.o?Zg(this.o):Zg(Yh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(P){S_(this,P);return}if(l=f||"",f=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var k in E)f.set(k,E[k]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const P of E.keys())f.set(P,E.get(P));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),k=o.FormData&&l instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Xw,h,void 0))||E||k||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,z]of f)this.g.setRequestHeader(P,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{I_(this),this.u=!0,this.g.send(l),this.u=!1}catch(P){S_(this,P)}};function S_(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,w_(l),Ql(l)}function w_(l){l.A||(l.A=!0,be(l,"complete"),be(l,"error"))}e.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,be(this,"complete"),be(this,"abort"),Ql(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ql(this,!0)),Dt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?R_(this):this.bb())},e.bb=function(){R_(this)};function R_(l){if(l.h&&typeof a<"u"&&(!l.v[1]||$n(l)!=4||l.Z()!=2)){if(l.u&&$n(l)==4)Qg(l.Ea,0,l);else if(be(l,"readystatechange"),$n(l)==4){l.h=!1;try{const z=l.Z();t:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break t;default:h=!1}var f;if(!(f=h)){var E;if(E=z===0){var k=String(l.D).match(g_)[1]||null;!k&&o.self&&o.self.location&&(k=o.self.location.protocol.slice(0,-1)),E=!Yw.test(k?k.toLowerCase():"")}f=E}if(f)be(l,"complete"),be(l,"success");else{l.m=6;try{var P=2<$n(l)?l.g.statusText:""}catch{P=""}l.l=P+" ["+l.Z()+"]",w_(l)}}finally{Ql(l)}}}}function Ql(l,h){if(l.g){I_(l);const f=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||be(l,"ready");try{f.onreadystatechange=E}catch{}}}function I_(l){l.I&&(o.clearTimeout(l.I),l.I=null)}e.isActive=function(){return!!this.g};function $n(l){return l.g?l.g.readyState:0}e.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Cw(h)}};function C_(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ww(l){const h={};l=(l.g&&2<=$n(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(_(l[E]))continue;var f=I(l[E]);const k=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const P=h[k]||[];h[k]=P,P.push(f)}b(h,function(E){return E.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(l,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||h}function x_(l){this.Aa=0,this.i=[],this.j=new Da,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ja("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ja("baseRetryDelayMs",5e3,l),this.cb=ja("retryDelaySeedMs",1e4,l),this.Wa=ja("forwardChannelMaxRetries",2,l),this.wa=ja("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new c_(l&&l.concurrentRequestLimit),this.Da=new Kw,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=x_.prototype,e.la=8,e.G=1,e.connect=function(l,h,f,E){Ae(0),this.W=l,this.H=h||{},f&&E!==void 0&&(this.H.OSID=f,this.H.OAID=E),this.F=this.X,this.I=U_(this,null,this.W),Xl(this)};function id(l){if(O_(l),l.G==3){var h=l.U++,f=Gn(l.I);if(bt(f,"SID",l.K),bt(f,"RID",h),bt(f,"TYPE","terminate"),za(l,f),h=new vi(l,l.j,h),h.L=2,h.v=Gl(Gn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&o.Image&&(new Image().src=h.v,f=!0),f||(h.g=j_(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Fl(h)}L_(l)}function Yl(l){l.g&&(rd(l),l.g.cancel(),l.g=null)}function O_(l){Yl(l),l.u&&(o.clearTimeout(l.u),l.u=null),Wl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&o.clearTimeout(l.s),l.s=null)}function Xl(l){if(!h_(l.h)&&!l.s){l.s=!0;var h=l.Ga;Z||jt(),X||(Z(),X=!0),Tt.add(h,l),l.B=0}}function Zw(l,h){return d_(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Na(p(l.Ga,l,h),V_(l,l.B)),l.B++,!0)}e.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const k=new vi(this,this.j,l);let P=this.o;if(this.S&&(P?(P=y(P),w(P,this.S)):P=this.S),this.m!==null||this.O||(k.H=P,P=null),this.P)t:{for(var h=0,f=0;f<this.i.length;f++){e:{var E=this.i[f];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break e}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=f;break t}if(h===4096||f===this.i.length-1){h=f+1;break t}}h=1e3}else h=1e3;h=D_(this,k,h),f=Gn(this.I),bt(f,"RID",l),bt(f,"CVER",22),this.D&&bt(f,"X-HTTP-Session-Id",this.D),za(this,f),P&&(this.O?h="headers="+encodeURIComponent(String(A_(P)))+"&"+h:this.m&&nd(f,this.m,P)),ed(this.h,k),this.Ua&&bt(f,"TYPE","init"),this.P?(bt(f,"$req",h),bt(f,"SID","null"),k.T=!0,Wh(k,f,null)):Wh(k,f,h),this.G=2}}else this.G==3&&(l?N_(this,l):this.i.length==0||h_(this.h)||N_(this))};function N_(l,h){var f;h?f=h.l:f=l.U++;const E=Gn(l.I);bt(E,"SID",l.K),bt(E,"RID",f),bt(E,"AID",l.T),za(l,E),l.m&&l.o&&nd(E,l.m,l.o),f=new vi(l,l.j,f,l.B+1),l.m===null&&(f.H=l.o),h&&(l.i=h.D.concat(l.i)),h=D_(l,f,1e3),f.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ed(l.h,f),Wh(f,E,h)}function za(l,h){l.H&&V(l.H,function(f,E){bt(h,E,f)}),l.l&&m_({},function(f,E){bt(h,E,f)})}function D_(l,h,f){f=Math.min(l.i.length,f);var E=l.l?p(l.l.Na,l.l,l):null;t:{var k=l.i;let P=-1;for(;;){const z=["count="+f];P==-1?0<f?(P=k[0].g,z.push("ofs="+P)):P=0:z.push("ofs="+P);let _t=!0;for(let se=0;se<f;se++){let lt=k[se].g;const pe=k[se].map;if(lt-=P,0>lt)P=Math.max(0,k[se].g-100),_t=!1;else try{Qw(pe,z,"req"+lt+"_")}catch{E&&E(pe)}}if(_t){E=z.join("&");break t}}}return l=l.i.splice(0,f),h.D=l,E}function k_(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Z||jt(),X||(Z(),X=!0),Tt.add(h,l),l.v=0}}function sd(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Na(p(l.Fa,l),V_(l,l.v)),l.v++,!0)}e.Fa=function(){if(this.u=null,M_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Na(p(this.ab,this),l)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ae(10),Yl(this),M_(this))};function rd(l){l.A!=null&&(o.clearTimeout(l.A),l.A=null)}function M_(l){l.g=new vi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Gn(l.qa);bt(h,"RID","rpc"),bt(h,"SID",l.K),bt(h,"AID",l.T),bt(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&bt(h,"TO",l.ja),bt(h,"TYPE","xmlhttp"),za(l,h),l.m&&l.o&&nd(h,l.m,l.o),l.L&&(l.g.I=l.L);var f=l.g;l=l.ia,f.L=1,f.v=Gl(Gn(h)),f.m=null,f.P=!0,o_(f,l)}e.Za=function(){this.C!=null&&(this.C=null,Yl(this),sd(this),Ae(19))};function Wl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function P_(l,h){var f=null;if(l.g==h){Wl(l),rd(l),l.g=null;var E=2}else if(td(l.h,h))f=h.D,f_(l.h,h),E=1;else return;if(l.G!=0){if(h.o)if(E==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var k=l.B;E=jl(),be(E,new i_(E,f)),Xl(l)}else k_(l);else if(k=h.s,k==3||k==0&&0<h.X||!(E==1&&Zw(l,h)||E==2&&sd(l)))switch(f&&0<f.length&&(h=l.h,h.i=h.i.concat(f)),k){case 1:bs(l,5);break;case 4:bs(l,10);break;case 3:bs(l,6);break;default:bs(l,2)}}}function V_(l,h){let f=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(f*=2),f*h}function bs(l,h){if(l.j.info("Error code "+h),h==2){var f=p(l.fb,l),E=l.Xa;const k=!E;E=new Ts(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Hl(E,"https"),Gl(E),k?Gw(E.toString(),f):$w(E.toString(),f)}else Ae(2);l.G=0,l.l&&l.l.sa(h),L_(l),O_(l)}e.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function L_(l){if(l.G=0,l.ka=[],l.l){const h=p_(l.h);(h.length!=0||l.i.length!=0)&&(D(l.ka,h),D(l.ka,l.i),l.h.i.length=0,O(l.i),l.i.length=0),l.l.ra()}}function U_(l,h,f){var E=f instanceof Ts?Gn(f):new Ts(f);if(E.g!="")h&&(E.g=h+"."+E.g),ql(E,E.s);else{var k=o.location;E=k.protocol,h=h?h+"."+k.hostname:k.hostname,k=+k.port;var P=new Ts(null);E&&Hl(P,E),h&&(P.g=h),k&&ql(P,k),f&&(P.l=f),E=P}return f=l.D,h=l.ya,f&&h&&bt(E,f,h),bt(E,"VER",l.la),za(l,E),E}function j_(l,h,f){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Dt(new $l({eb:f})):new Dt(l.pa),h.Ha(l.J),h}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function z_(){}e=z_.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Zl(){}Zl.prototype.g=function(l,h){return new Be(l,h)};function Be(l,h){fe.call(this),this.g=new x_(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!_(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new pr(this)}R(Be,fe),Be.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Be.prototype.close=function(){id(this.g)},Be.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.u&&(f={},f.__data__=Gh(l),l=f);h.i.push(new Pw(h.Ya++,l)),h.G==3&&Xl(h)},Be.prototype.N=function(){this.g.l=null,delete this.j,id(this.g),delete this.g,Be.aa.N.call(this)};function B_(l){Kh.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){t:{for(const f in h){l=f;break t}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}R(B_,Kh);function F_(){Qh.call(this),this.status=1}R(F_,Qh);function pr(l){this.g=l}R(pr,z_),pr.prototype.ua=function(){be(this.g,"a")},pr.prototype.ta=function(l){be(this.g,new B_(l))},pr.prototype.sa=function(l){be(this.g,new F_)},pr.prototype.ra=function(){be(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,Be.prototype.send=Be.prototype.o,Be.prototype.open=Be.prototype.m,Be.prototype.close=Be.prototype.close,pA=function(){return new Zl},fA=function(){return jl()},dA=vs,gp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zl.NO_ERROR=0,zl.TIMEOUT=8,zl.HTTP_ERROR=6,qu=zl,s_.COMPLETE="complete",hA=s_,Jg.EventType=xa,xa.OPEN="a",xa.CLOSE="b",xa.ERROR="c",xa.MESSAGE="d",fe.prototype.listen=fe.prototype.K,so=Jg,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,cA=Dt}).apply(typeof gu<"u"?gu:typeof self<"u"?self:typeof window<"u"?window:{});const qv="@firebase/firestore",Gv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}_e.UNAUTHENTICATED=new _e(null),_e.GOOGLE_CREDENTIALS=new _e("google-credentials-uid"),_e.FIRST_PARTY=new _e("first-party-uid"),_e.MOCK_USER=new _e("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Lm("@firebase/firestore");function Ar(){return Ws.logLevel}function F(e,...t){if(Ws.logLevel<=st.DEBUG){const n=t.map(Ym);Ws.debug(`Firestore (${ba}): ${e}`,...n)}}function pi(e,...t){if(Ws.logLevel<=st.ERROR){const n=t.map(Ym);Ws.error(`Firestore (${ba}): ${e}`,...n)}}function rs(e,...t){if(Ws.logLevel<=st.WARN){const n=t.map(Ym);Ws.warn(`Firestore (${ba}): ${e}`,...n)}}function Ym(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,mA(e,i,n)}function mA(e,t,n){let i=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw pi(i),new Error(i)}function ht(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||mA(t,s,i)}function W(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Hn{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class XN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(_e.UNAUTHENTICATED))}shutdown(){}}class WN{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZN{constructor(t){this.t=t,this.currentUser=_e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ht(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new oi,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},o=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>o(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?o(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new oi)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ht(typeof i.accessToken=="string",31837,{l:i}),new gA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ht(t===null||typeof t=="string",2055,{h:t}),new _e(t)}}class JN{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=_e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tD{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new JN(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(_e.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $v{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eD{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ke(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ht(this.o===void 0,3512);const i=r=>{r.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $v(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $v(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=nD(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function tt(e,t){return e<t?-1:e>t?1:0}function _p(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=e.codePointAt(n),s=t.codePointAt(n);if(i!==s){if(i<128&&s<128)return tt(i,s);{const r=_A(),a=iD(r.encode(Kv(e,n)),r.encode(Kv(t,n)));return a!==0?a:tt(i,s)}}n+=i>65535?2:1}return tt(e.length,t.length)}function Kv(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function iD(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return tt(e[n],t[n]);return tt(e.length,t.length)}function ua(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="__name__";class Rn{constructor(t,n,i){n===void 0?n=0:n>t.length&&K(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&K(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Rn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Rn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=Rn.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return tt(t.length,n.length)}static compareSegments(t,n){const i=Rn.isNumericId(t),s=Rn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Rn.extractNumericId(t).compare(Rn.extractNumericId(n)):_p(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ji.fromString(t.substring(4,t.length-2))}}class vt extends Rn{construct(t,n,i){return new vt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new B(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new vt(n)}static emptyPath(){return new vt([])}}const sD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ue extends Rn{construct(t,n,i){return new ue(t,n,i)}static isValidIdentifier(t){return sD.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ue.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qv}static keyField(){return new ue([Qv])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new B(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const o=t[s];if(o==="\\"){if(s+1===t.length)throw new B(L.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(i+=o,s++):(r(),s++)}if(r(),a)throw new B(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ue(n)}static emptyPath(){return new ue([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.path=t}static fromPath(t){return new G(vt.fromString(t))}static fromName(t){return new G(vt.fromString(t).popFirst(5))}static empty(){return new G(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&vt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return vt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new G(new vt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(e,t,n){if(!n)throw new B(L.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function rD(e,t,n,i){if(t===!0&&i===!0)throw new B(L.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Yv(e){if(!G.isDocumentKey(e))throw new B(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Xv(e){if(G.isDocumentKey(e))throw new B(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function vA(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function vh(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":K(12329,{type:typeof e})}function Pe(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new B(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vh(e);throw new B(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(e,t){const n={typeString:e};return t&&(n.value=t),n}function wl(e,t){if(!vA(e))throw new B(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new B(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=-62135596800,Zv=1e6;class At{static now(){return At.fromMillis(Date.now())}static fromDate(t){return At.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*Zv);return new At(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new B(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Wv)throw new B(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new B(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zv}_compareTo(t){return this.seconds===t.seconds?tt(this.nanoseconds,t.nanoseconds):tt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:At._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(wl(t,At._jsonSchema))return new At(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Wv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}At._jsonSchemaVersion="firestore/timestamp/1.0",At._jsonSchema={type:Kt("string",At._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{static fromTimestamp(t){return new Y(t)}static min(){return new Y(new At(0,0))}static max(){return new Y(new At(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=-1;function aD(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=Y.fromTimestamp(i===1e9?new At(n+1,0):new At(n,i));return new as(s,G.empty(),t)}function oD(e){return new as(e.readTime,e.key,Yo)}class as{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new as(Y.min(),G.empty(),Yo)}static max(){return new as(Y.max(),G.empty(),Yo)}}function lD(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=G.comparator(e.documentKey,t.documentKey),n!==0?n:tt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(e){if(e.code!==L.FAILED_PRECONDITION||e.message!==uD)throw e;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new U((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):U.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):U.reject(n)}static resolve(t){return new U((n,i)=>{n(t)})}static reject(t){return new U((n,i)=>{i(t)})}static waitFor(t){return new U((n,i)=>{let s=0,r=0,a=!1;t.forEach(o=>{++s,o.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(t){let n=U.resolve(!1);for(const i of t)n=n.next(s=>s?U.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new U((i,s)=>{const r=t.length,a=new Array(r);let o=0;for(let u=0;u<r;u++){const c=u;n(t[c]).next(d=>{a[c]=d,++o,o===r&&i(a)},d=>s(d))}})}static doWhile(t,n){return new U((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function hD(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sa(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Eh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=-1;function Th(e){return e==null}function Pc(e){return e===0&&1/e==-1/0}function dD(e){return typeof e=="number"&&Number.isInteger(e)&&!Pc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="";function fD(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Jv(t)),t=pD(e.get(n),t);return Jv(t)}function pD(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case EA:n+="";break;default:n+=r}}return n}function Jv(e){return e+EA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function _s(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function TA(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(t,n){this.comparator=t,this.root=n||oe.EMPTY}insert(t,n){return new Nt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,oe.BLACK,null,null))}remove(t){return new Nt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,oe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _u(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _u(this.root,t,this.comparator,!1)}getReverseIterator(){return new _u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _u(this.root,t,this.comparator,!0)}}class _u{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class oe{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??oe.RED,this.left=s??oe.EMPTY,this.right=r??oe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new oe(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return oe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return oe.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,oe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,oe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw K(27949);return t+(this.isRed()?0:1)}}oe.EMPTY=null,oe.RED=!0,oe.BLACK=!1;oe.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(t,n,i,s,r){return this}insert(t,n,i){return new oe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t){this.comparator=t,this.data=new Nt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new e0(this.data.getIterator())}getIteratorFrom(t){return new e0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Wt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Wt(this.comparator);return n.data=t,n}}class e0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.fields=t,t.sort(ue.comparator)}static empty(){return new Qe([])}unionWith(t){let n=new Wt(ue.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Qe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ua(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new bA("Invalid base64 string: "+r):r}}(t);return new de(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new de(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return tt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}de.EMPTY_BYTE_STRING=new de("");const mD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(e){if(ht(!!e,39018),typeof e=="string"){let t=0;const n=mD.exec(e);if(ht(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ft(e.seconds),nanos:Ft(e.nanos)}}function Ft(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ls(e){return typeof e=="string"?de.fromBase64String(e):de.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="server_timestamp",SA="__type__",wA="__previous_value__",RA="__local_write_time__";function Zm(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[SA])===null||n===void 0?void 0:n.stringValue)===AA}function bh(e){const t=e.mapValue.fields[wA];return Zm(t)?bh(t):t}function Xo(e){const t=os(e.mapValue.fields[RA].timestampValue);return new At(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(t,n,i,s,r,a,o,u,c,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d}}const Vc="(default)";class Wo{constructor(t,n){this.projectId=t,this.database=n||Vc}static empty(){return new Wo("","")}get isDefaultDatabase(){return this.database===Vc}isEqual(t){return t instanceof Wo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="__type__",CA="__max__",yu={mapValue:{fields:{__type__:{stringValue:CA}}}},xA="__vector__",Lc="value";function us(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zm(e)?4:yD(e)?9007199254740991:_D(e)?10:11:K(28295,{value:e})}function zn(e,t){if(e===t)return!0;const n=us(e);if(n!==us(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Xo(e).isEqual(Xo(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=os(s.timestampValue),o=os(r.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return ls(s.bytesValue).isEqual(ls(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Ft(s.geoPointValue.latitude)===Ft(r.geoPointValue.latitude)&&Ft(s.geoPointValue.longitude)===Ft(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ft(s.integerValue)===Ft(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Ft(s.doubleValue),o=Ft(r.doubleValue);return a===o?Pc(a)===Pc(o):isNaN(a)&&isNaN(o)}return!1}(e,t);case 9:return ua(e.arrayValue.values||[],t.arrayValue.values||[],zn);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},o=r.mapValue.fields||{};if(t0(a)!==t0(o))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(o[u]===void 0||!zn(a[u],o[u])))return!1;return!0}(e,t);default:return K(52216,{left:e})}}function Zo(e,t){return(e.values||[]).find(n=>zn(n,t))!==void 0}function ca(e,t){if(e===t)return 0;const n=us(e),i=us(t);if(n!==i)return tt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(e.booleanValue,t.booleanValue);case 2:return function(r,a){const o=Ft(r.integerValue||r.doubleValue),u=Ft(a.integerValue||a.doubleValue);return o<u?-1:o>u?1:o===u?0:isNaN(o)?isNaN(u)?0:-1:1}(e,t);case 3:return n0(e.timestampValue,t.timestampValue);case 4:return n0(Xo(e),Xo(t));case 5:return _p(e.stringValue,t.stringValue);case 6:return function(r,a){const o=ls(r),u=ls(a);return o.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const o=r.split("/"),u=a.split("/");for(let c=0;c<o.length&&c<u.length;c++){const d=tt(o[c],u[c]);if(d!==0)return d}return tt(o.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const o=tt(Ft(r.latitude),Ft(a.latitude));return o!==0?o:tt(Ft(r.longitude),Ft(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return i0(e.arrayValue,t.arrayValue);case 10:return function(r,a){var o,u,c,d;const m=r.fields||{},p=a.fields||{},v=(o=m[Lc])===null||o===void 0?void 0:o.arrayValue,R=(u=p[Lc])===null||u===void 0?void 0:u.arrayValue,O=tt(((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0,((d=R==null?void 0:R.values)===null||d===void 0?void 0:d.length)||0);return O!==0?O:i0(v,R)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===yu.mapValue&&a===yu.mapValue)return 0;if(r===yu.mapValue)return 1;if(a===yu.mapValue)return-1;const o=r.fields||{},u=Object.keys(o),c=a.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const p=_p(u[m],d[m]);if(p!==0)return p;const v=ca(o[u[m]],c[d[m]]);if(v!==0)return v}return tt(u.length,d.length)}(e.mapValue,t.mapValue);default:throw K(23264,{le:n})}}function n0(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return tt(e,t);const n=os(e),i=os(t),s=tt(n.seconds,i.seconds);return s!==0?s:tt(n.nanos,i.nanos)}function i0(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=ca(n[s],i[s]);if(r)return r}return tt(n.length,i.length)}function ha(e){return yp(e)}function yp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=os(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ls(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return G.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=yp(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${yp(n.fields[a])}`;return s+"}"}(e.mapValue):K(61005,{value:e})}function Gu(e){switch(us(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=bh(e);return t?16+Gu(t):16;case 5:return 2*e.stringValue.length;case 6:return ls(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+Gu(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return _s(i.fields,(r,a)=>{s+=r.length+Gu(a)}),s}(e.mapValue);default:throw K(13486,{value:e})}}function s0(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function vp(e){return!!e&&"integerValue"in e}function Jm(e){return!!e&&"arrayValue"in e}function r0(e){return!!e&&"nullValue"in e}function a0(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function $u(e){return!!e&&"mapValue"in e}function _D(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[IA])===null||n===void 0?void 0:n.stringValue)===xA}function Io(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return _s(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Io(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Io(e.arrayValue.values[n]);return t}return Object.assign({},e)}function yD(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===CA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.value=t}static empty(){return new Me({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!$u(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Io(n)}setAll(t){let n=ue.emptyPath(),i={},s=[];t.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=o.popLast()}a?i[o.lastSegment()]=Io(a):s.push(o.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());$u(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return zn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];$u(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){_s(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new Me(Io(this.value))}}function OA(e){const t=[];return _s(e.fields,(n,i)=>{const s=new ue([n]);if($u(i)){const r=OA(i.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)}),new Qe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t,n,i,s,r,a,o){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=o}static newInvalidDocument(t){return new ye(t,0,Y.min(),Y.min(),Y.min(),Me.empty(),0)}static newFoundDocument(t,n,i,s){return new ye(t,1,n,Y.min(),i,s,0)}static newNoDocument(t,n){return new ye(t,2,n,Y.min(),Y.min(),Me.empty(),0)}static newUnknownDocument(t,n){return new ye(t,3,n,Y.min(),Y.min(),Me.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Me.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Me.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ye&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ye(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(t,n){this.position=t,this.inclusive=n}}function o0(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(r.field.isKeyField()?i=G.comparator(G.fromName(a.referenceValue),n.key):i=ca(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function l0(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!zn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t,n="asc"){this.field=t,this.dir=n}}function vD(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{}class $t extends NA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new TD(t,n,i):n==="array-contains"?new SD(t,i):n==="in"?new wD(t,i):n==="not-in"?new RD(t,i):n==="array-contains-any"?new ID(t,i):new $t(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new bD(t,i):new AD(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ca(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(ca(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends NA{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new En(t,n)}matches(t){return DA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function DA(e){return e.op==="and"}function kA(e){return ED(e)&&DA(e)}function ED(e){for(const t of e.filters)if(t instanceof En)return!1;return!0}function Ep(e){if(e instanceof $t)return e.field.canonicalString()+e.op.toString()+ha(e.value);if(kA(e))return e.filters.map(t=>Ep(t)).join(",");{const t=e.filters.map(n=>Ep(n)).join(",");return`${e.op}(${t})`}}function MA(e,t){return e instanceof $t?function(i,s){return s instanceof $t&&i.op===s.op&&i.field.isEqual(s.field)&&zn(i.value,s.value)}(e,t):e instanceof En?function(i,s){return s instanceof En&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,o)=>r&&MA(a,s.filters[o]),!0):!1}(e,t):void K(19439)}function PA(e){return e instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${ha(n.value)}`}(e):e instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(PA).join(" ,")+"}"}(e):"Filter"}class TD extends $t{constructor(t,n,i){super(t,n,i),this.key=G.fromName(i.referenceValue)}matches(t){const n=G.comparator(t.key,this.key);return this.matchesComparison(n)}}class bD extends $t{constructor(t,n){super(t,"in",n),this.keys=VA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class AD extends $t{constructor(t,n){super(t,"not-in",n),this.keys=VA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function VA(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}class SD extends $t{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Jm(n)&&Zo(n.arrayValue,this.value)}}class wD extends $t{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Zo(this.value.arrayValue,n)}}class RD extends $t{constructor(t,n){super(t,"not-in",n)}matches(t){if(Zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zo(this.value.arrayValue,n)}}class ID extends $t{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Zo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(t,n=null,i=[],s=[],r=null,a=null,o=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=o,this.Pe=null}}function u0(e,t=null,n=[],i=[],s=null,r=null,a=null){return new CD(e,t,n,i,s,r,a)}function tg(e){const t=W(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Ep(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Th(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>ha(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>ha(i)).join(",")),t.Pe=n}return t.Pe}function eg(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!vD(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!MA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!l0(e.startAt,t.startAt)&&l0(e.endAt,t.endAt)}function Tp(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,n=null,i=[],s=[],r=null,a="F",o=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=o,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function xD(e,t,n,i,s,r,a,o){return new Rl(e,t,n,i,s,r,a,o)}function Ah(e){return new Rl(e)}function c0(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function LA(e){return e.collectionGroup!==null}function Co(e){const t=W(e);if(t.Te===null){t.Te=[];const n=new Set;for(const r of t.explicitOrderBy)t.Te.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Wt(ue.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Te.push(new jc(r,i))}),n.has(ue.keyField().canonicalString())||t.Te.push(new jc(ue.keyField(),i))}return t.Te}function Vn(e){const t=W(e);return t.Ie||(t.Ie=OD(t,Co(e))),t.Ie}function OD(e,t){if(e.limitType==="F")return u0(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new jc(s.field,r)});const n=e.endAt?new Uc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Uc(e.startAt.position,e.startAt.inclusive):null;return u0(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function bp(e,t){const n=e.filters.concat([t]);return new Rl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ap(e,t,n){return new Rl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Sh(e,t){return eg(Vn(e),Vn(t))&&e.limitType===t.limitType}function UA(e){return`${tg(Vn(e))}|lt:${e.limitType}`}function Sr(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>PA(s)).join(", ")}]`),Th(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>ha(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>ha(s)).join(",")),`Target(${i})`}(Vn(e))}; limitType=${e.limitType})`}function wh(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):G.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of Co(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,o,u){const c=o0(a,o,u);return a.inclusive?c<=0:c<0}(i.startAt,Co(i),s)||i.endAt&&!function(a,o,u){const c=o0(a,o,u);return a.inclusive?c>=0:c>0}(i.endAt,Co(i),s))}(e,t)}function ND(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function jA(e){return(t,n)=>{let i=!1;for(const s of Co(e)){const r=DD(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function DD(e,t,n){const i=e.field.isKeyField()?G.comparator(t.key,n.key):function(r,a,o){const u=a.data.field(r),c=o.data.field(r);return u!==null&&c!==null?ca(u,c):K(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return K(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){_s(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return TA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=new Nt(G.comparator);function mi(){return kD}const zA=new Nt(G.comparator);function ro(...e){let t=zA;for(const n of e)t=t.insert(n.key,n);return t}function BA(e){let t=zA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Ns(){return xo()}function FA(){return xo()}function xo(){return new or(e=>e.toString(),(e,t)=>e.isEqual(t))}const MD=new Nt(G.comparator),PD=new Wt(G.comparator);function rt(...e){let t=PD;for(const n of e)t=t.add(n);return t}const VD=new Wt(tt);function LD(){return VD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pc(t)?"-0":t}}function HA(e){return{integerValue:""+e}}function UD(e,t){return dD(t)?HA(t):ng(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(){this._=void 0}}function jD(e,t,n){return e instanceof Jo?function(s,r){const a={fields:{[SA]:{stringValue:AA},[RA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Zm(r)&&(r=bh(r)),r&&(a.fields[wA]=r),{mapValue:a}}(n,t):e instanceof tl?GA(e,t):e instanceof el?$A(e,t):function(s,r){const a=qA(s,r),o=h0(a)+h0(s.Ee);return vp(a)&&vp(s.Ee)?HA(o):ng(s.serializer,o)}(e,t)}function zD(e,t,n){return e instanceof tl?GA(e,t):e instanceof el?$A(e,t):n}function qA(e,t){return e instanceof zc?function(i){return vp(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class Jo extends Rh{}class tl extends Rh{constructor(t){super(),this.elements=t}}function GA(e,t){const n=KA(t);for(const i of e.elements)n.some(s=>zn(s,i))||n.push(i);return{arrayValue:{values:n}}}class el extends Rh{constructor(t){super(),this.elements=t}}function $A(e,t){let n=KA(t);for(const i of e.elements)n=n.filter(s=>!zn(s,i));return{arrayValue:{values:n}}}class zc extends Rh{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function h0(e){return Ft(e.integerValue||e.doubleValue)}function KA(e){return Jm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(t,n){this.field=t,this.transform=n}}function FD(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof tl&&s instanceof tl||i instanceof el&&s instanceof el?ua(i.elements,s.elements,zn):i instanceof zc&&s instanceof zc?zn(i.Ee,s.Ee):i instanceof Jo&&s instanceof Jo}(e.transform,t.transform)}class HD{constructor(t,n){this.version=t,this.transformResults=n}}class Ve{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ve}static exists(t){return new Ve(void 0,t)}static updateTime(t){return new Ve(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ku(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ih{}function QA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new ig(e.key,Ve.none()):new Il(e.key,e.data,Ve.none());{const n=e.data,i=Me.empty();let s=new Wt(ue.comparator);for(let r of t.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new ys(e.key,i,new Qe(s.toArray()),Ve.none())}}function qD(e,t,n){e instanceof Il?function(s,r,a){const o=s.value.clone(),u=f0(s.fieldTransforms,r,a.transformResults);o.setAll(u),r.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(e,t,n):e instanceof ys?function(s,r,a){if(!Ku(s.precondition,r))return void r.convertToUnknownDocument(a.version);const o=f0(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(YA(s)),u.setAll(o),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function Oo(e,t,n,i){return e instanceof Il?function(r,a,o,u){if(!Ku(r.precondition,a))return o;const c=r.value.clone(),d=p0(r.fieldTransforms,u,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof ys?function(r,a,o,u){if(!Ku(r.precondition,a))return o;const c=p0(r.fieldTransforms,u,a),d=a.data;return d.setAll(YA(r)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(e,t,n,i):function(r,a,o){return Ku(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(e,t,n)}function GD(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=qA(i.transform,s||null);r!=null&&(n===null&&(n=Me.empty()),n.set(i.field,r))}return n||null}function d0(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ua(i,s,(r,a)=>FD(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Il extends Ih{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ys extends Ih{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function YA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function f0(e,t,n){const i=new Map;ht(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,o=t.data.field(r.field);i.set(r.field,zD(a,o,n[s]))}return i}function p0(e,t,n){const i=new Map;for(const s of e){const r=s.transform,a=n.data.field(s.field);i.set(s.field,jD(r,a,t))}return i}class ig extends Ih{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $D extends Ih{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&qD(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Oo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Oo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=FA();return this.mutations.forEach(s=>{const r=t.get(s.key),a=r.overlayedDocument;let o=this.applyToLocalView(a,r.mutatedFields);o=n.has(s.key)?null:o;const u=QA(a,o);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Y.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),rt())}isEqual(t){return this.batchId===t.batchId&&ua(this.mutations,t.mutations,(n,i)=>d0(n,i))&&ua(this.baseMutations,t.baseMutations,(n,i)=>d0(n,i))}}class sg{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){ht(t.mutations.length===i.length,58842,{Ve:t.mutations.length,me:i.length});let s=function(){return MD}();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new sg(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,at;function XD(e){switch(e){case L.OK:return K(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return K(15467,{code:e})}}function XA(e){if(e===void 0)return pi("GRPC error has no .code"),L.UNKNOWN;switch(e){case qt.OK:return L.OK;case qt.CANCELLED:return L.CANCELLED;case qt.UNKNOWN:return L.UNKNOWN;case qt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case qt.INTERNAL:return L.INTERNAL;case qt.UNAVAILABLE:return L.UNAVAILABLE;case qt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case qt.NOT_FOUND:return L.NOT_FOUND;case qt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case qt.ABORTED:return L.ABORTED;case qt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case qt.DATA_LOSS:return L.DATA_LOSS;default:return K(39323,{code:e})}}(at=qt||(qt={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=new Ji([4294967295,4294967295],0);function m0(e){const t=_A().encode(e),n=new uA;return n.update(t),new Uint8Array(n.digest())}function g0(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Ji([n,i],0),new Ji([s,r],0)]}class rg{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ao(`Invalid padding: ${n}`);if(i<0)throw new ao(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ao(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new ao(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=Ji.fromNumber(this.fe)}pe(t,n,i){let s=t.add(n.multiply(Ji.fromNumber(i)));return s.compare(WD)===1&&(s=new Ji([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=m0(t),[i,s]=g0(n);for(let r=0;r<this.hashCount;r++){const a=this.pe(i,s,r);if(!this.ye(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new rg(r,s,n);return i.forEach(o=>a.insert(o)),a}insert(t){if(this.fe===0)return;const n=m0(t),[i,s]=g0(n);for(let r=0;r<this.hashCount;r++){const a=this.pe(i,s,r);this.we(a)}}we(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class ao extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,Cl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Ch(Y.min(),s,new Nt(tt),mi(),rt())}}class Cl{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Cl(i,n,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t,n,i,s){this.Se=t,this.removedTargetIds=n,this.key=i,this.be=s}}class WA{constructor(t,n){this.targetId=t,this.De=n}}class ZA{constructor(t,n,i=de.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class _0{constructor(){this.ve=0,this.Ce=y0(),this.Fe=de.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=rt(),n=rt(),i=rt();return this.Ce.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:K(38017,{changeType:r})}}),new Cl(this.Fe,this.Me,t,n,i)}ke(){this.xe=!1,this.Ce=y0()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class ZD{constructor(t){this.We=t,this.Ge=new Map,this.ze=mi(),this.je=vu(),this.Je=vu(),this.He=new Nt(tt)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,n=>{const i=this.tt(n);switch(t.state){case 0:this.nt(n)&&i.Be(t.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(t.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(t.resumeToken));break;default:K(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach((i,s)=>{this.nt(s)&&n(s)})}it(t){const n=t.targetId,i=t.De.count,s=this.st(n);if(s){const r=s.target;if(Tp(r))if(i===0){const a=new G(r.path);this.Xe(n,a,ye.newNoDocument(a,Y.min()))}else ht(i===1,20013,{expectedCount:i});else{const a=this.ot(n);if(a!==i){const o=this._t(t),u=o?this.ut(o,t,a):1;if(u!==0){this.rt(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,o;try{a=ls(i).toUint8Array()}catch(u){if(u instanceof bA)return rs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{o=new rg(a,s,r)}catch(u){return rs(u instanceof ao?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return o.fe===0?null:o}ut(t,n,i){return n.De.count===i-this.ht(t,n.targetId)?0:2}ht(t,n){const i=this.We.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.We.lt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(o)||(this.Xe(n,r,null),s++)}),s}Pt(t){const n=new Map;this.Ge.forEach((r,a)=>{const o=this.st(a);if(o){if(r.current&&Tp(o.target)){const u=new G(o.target.path);this.Tt(u).has(a)||this.It(a,u)||this.Xe(a,u,ye.newNoDocument(u,t))}r.Ne&&(n.set(a,r.Le()),r.ke())}});let i=rt();this.Je.forEach((r,a)=>{let o=!0;a.forEachWhile(u=>{const c=this.st(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(i=i.add(r))}),this.ze.forEach((r,a)=>a.setReadTime(t));const s=new Ch(t,n,this.He,this.ze,i);return this.ze=mi(),this.je=vu(),this.Je=vu(),this.He=new Nt(tt),s}Ze(t,n){if(!this.nt(t))return;const i=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,i){if(!this.nt(t))return;const s=this.tt(t);this.It(t,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new _0,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new Wt(tt),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new Wt(tt),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||F("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new _0),this.We.getRemoteKeysForTarget(t).forEach(n=>{this.Xe(t,n,null)})}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function vu(){return new Nt(G.comparator)}function y0(){return new Nt(G.comparator)}const JD=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),tk=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),ek=(()=>({and:"AND",or:"OR"}))();class nk{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Sp(e,t){return e.useProto3Json||Th(t)?t:{value:t}}function Bc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function JA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ik(e,t){return Bc(e,t.toTimestamp())}function Ln(e){return ht(!!e,49232),Y.fromTimestamp(function(n){const i=os(n);return new At(i.seconds,i.nanos)}(e))}function ag(e,t){return wp(e,t).canonicalString()}function wp(e,t){const n=function(s){return new vt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function tS(e){const t=vt.fromString(e);return ht(rS(t),10190,{key:t.toString()}),t}function Rp(e,t){return ag(e.databaseId,t.path)}function Yd(e,t){const n=tS(t);if(n.get(1)!==e.databaseId.projectId)throw new B(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new B(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new G(nS(n))}function eS(e,t){return ag(e.databaseId,t)}function sk(e){const t=tS(e);return t.length===4?vt.emptyPath():nS(t)}function Ip(e){return new vt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function nS(e){return ht(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function v0(e,t,n){return{name:Rp(e,t),fields:n.value.mapValue.fields}}function rk(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:K(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(c,d){return c.useProto3Json?(ht(d===void 0||typeof d=="string",58123),de.fromBase64String(d||"")):(ht(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),de.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(c){const d=c.code===void 0?L.UNKNOWN:XA(c.code);return new B(d,c.message||"")}(a);n=new ZA(i,s,r,o||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Yd(e,i.document.name),r=Ln(i.document.updateTime),a=i.document.createTime?Ln(i.document.createTime):Y.min(),o=new Me({mapValue:{fields:i.document.fields}}),u=ye.newFoundDocument(s,r,a,o),c=i.targetIds||[],d=i.removedTargetIds||[];n=new Qu(c,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Yd(e,i.document),r=i.readTime?Ln(i.readTime):Y.min(),a=ye.newNoDocument(s,r),o=i.removedTargetIds||[];n=new Qu([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Yd(e,i.document),r=i.removedTargetIds||[];n=new Qu([],r,s,null)}else{if(!("filter"in t))return K(11601,{At:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new YD(s,r),o=i.targetId;n=new WA(o,a)}}return n}function ak(e,t){let n;if(t instanceof Il)n={update:v0(e,t.key,t.value)};else if(t instanceof ig)n={delete:Rp(e,t.key)};else if(t instanceof ys)n={update:v0(e,t.key,t.data),updateMask:mk(t.fieldMask)};else{if(!(t instanceof $D))return K(16599,{Rt:t.type});n={verify:Rp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,a){const o=a.transform;if(o instanceof Jo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof tl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof el)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof zc)return{fieldPath:a.field.canonicalString(),increment:o.Ee};throw K(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:ik(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:K(27497)}(e,t.precondition)),n}function ok(e,t){return e&&e.length>0?(ht(t!==void 0,14353),e.map(n=>function(s,r){let a=s.updateTime?Ln(s.updateTime):Ln(r);return a.isEqual(Y.min())&&(a=Ln(r)),new HD(a,s.transformResults||[])}(n,t))):[]}function lk(e,t){return{documents:[eS(e,t.path)]}}function uk(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=eS(e,s);const r=function(c){if(c.length!==0)return sS(En.create(c,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:wr(p.field),direction:dk(p.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Sp(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{Vt:n,parent:s}}function ck(e){let t=sk(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){ht(i===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let r=[];n.where&&(r=function(m){const p=iS(m);return p instanceof En&&kA(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(p=>function(R){return new jc(Rr(R.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(p))}(n.orderBy));let o=null;n.limit&&(o=function(m){let p;return p=typeof m=="object"?m.value:m,Th(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,v=m.values||[];return new Uc(v,p)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const p=!m.before,v=m.values||[];return new Uc(v,p)}(n.endAt)),xD(t,s,a,r,o,"F",u,c)}function hk(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function iS(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Rr(n.unaryFilter.field);return $t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Rr(n.unaryFilter.field);return $t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Rr(n.unaryFilter.field);return $t.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Rr(n.unaryFilter.field);return $t.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(e):e.fieldFilter!==void 0?function(n){return $t.create(Rr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(i=>iS(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(e):K(30097,{filter:e})}function dk(e){return JD[e]}function fk(e){return tk[e]}function pk(e){return ek[e]}function wr(e){return{fieldPath:e.canonicalString()}}function Rr(e){return ue.fromServerFormat(e.fieldPath)}function sS(e){return e instanceof $t?function(n){if(n.op==="=="){if(a0(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NAN"}};if(r0(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(a0(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NOT_NAN"}};if(r0(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wr(n.field),op:fk(n.op),value:n.value}}}(e):e instanceof En?function(n){const i=n.getFilters().map(s=>sS(s));return i.length===1?i[0]:{compositeFilter:{op:pk(n.op),filters:i}}}(e):K(54877,{filter:e})}function mk(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function rS(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t,n,i,s,r=Y.min(),a=Y.min(),o=de.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=u}withSequenceNumber(t){return new Fi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(t){this.gt=t}}function _k(e){const t=ck({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ap(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.Dn=new vk}addToCollectionParentIndex(t,n){return this.Dn.add(n),U.resolve()}getCollectionParents(t,n){return U.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return U.resolve()}deleteFieldIndex(t,n){return U.resolve()}deleteAllFieldIndexes(t){return U.resolve()}createTargetIndexes(t,n){return U.resolve()}getDocumentsMatchingTarget(t,n){return U.resolve(null)}getIndexType(t,n){return U.resolve(0)}getFieldIndexes(t,n){return U.resolve([])}getNextCollectionGroupToUpdate(t){return U.resolve(null)}getMinOffset(t,n){return U.resolve(as.min())}getMinOffsetFromCollectionGroup(t,n){return U.resolve(as.min())}updateCollectionGroup(t,n,i){return U.resolve()}updateIndexEntries(t,n){return U.resolve()}}class vk{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new Wt(vt.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Wt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aS=41943040;class ke{static withCacheSize(t){return new ke(t,ke.DEFAULT_COLLECTION_PERCENTILE,ke.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ke.DEFAULT_COLLECTION_PERCENTILE=10,ke.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ke.DEFAULT=new ke(aS,ke.DEFAULT_COLLECTION_PERCENTILE,ke.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ke.DISABLED=new ke(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new da(0)}static ur(){return new da(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="LruGarbageCollector",Ek=1048576;function b0([e,t],[n,i]){const s=tt(e,n);return s===0?tt(t,i):s}class Tk{constructor(t){this.Tr=t,this.buffer=new Wt(b0),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();b0(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bk{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){F(T0,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Sa(n)?F(T0,"Ignoring IndexedDB error during garbage collection: ",n):await Aa(n)}await this.Rr(3e5)})}}class Ak{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return U.resolve(Eh.ue);const i=new Tk(n);return this.Vr.forEachTarget(t,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.gr(t,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.Vr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(E0)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E0):this.pr(t,n))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let i,s,r,a,o,u,c;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(t,s))).next(m=>(i=m,o=Date.now(),this.removeTargets(t,i,n))).next(m=>(r=m,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(m=>(c=Date.now(),Ar()<=st.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${r} targets in `+(u-o)+`ms
	Removed ${m} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:m})))}}function Sk(e,t){return new Ak(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.changes=new or(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ye.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?U.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&Oo(i.mutation,s,Qe.empty(),At.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,rt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=rt()){const s=Ns();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let a=ro();return r.forEach((o,u)=>{a=a.insert(o,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Ns();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,rt()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((a,o)=>{n.set(a,o)})})}computeViews(t,n,i,s){let r=mi();const a=xo(),o=function(){return xo()}();return n.forEach((u,c)=>{const d=i.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ys)?r=r.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),Oo(d.mutation,c,d.mutation.getFieldMask(),At.now())):a.set(c.key,Qe.empty())}),this.recalculateAndSaveOverlays(t,r).next(u=>(u.forEach((c,d)=>a.set(c,d)),n.forEach((c,d)=>{var m;return o.set(c,new Rk(d,(m=a.get(c))!==null&&m!==void 0?m:null))}),o))}recalculateAndSaveOverlays(t,n){const i=xo();let s=new Nt((a,o)=>a-o),r=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const o of a)o.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=i.get(u)||Qe.empty();d=o.applyToLocalView(c,d),i.set(u,d);const m=(s.get(o.batchId)||rt()).add(u);s=s.insert(o.batchId,m)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const u=o.getNext(),c=u.key,d=u.value,m=FA();d.forEach(p=>{if(!r.has(p)){const v=QA(n.get(p),i.get(p));v!==null&&m.set(p,v),r=r.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(t,c,m))}return U.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):LA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):U.resolve(Ns());let o=Yo,u=r;return a.next(c=>U.forEach(c,(d,m)=>(o<m.largestBatchId&&(o=m.largestBatchId),r.get(d)?U.resolve():this.remoteDocumentCache.getEntry(t,d).next(p=>{u=u.insert(d,p)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,u,c,rt())).next(d=>({batchId:o,changes:BA(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new G(n)).next(i=>{let s=ro();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let a=ro();return this.indexManager.getCollectionParents(t,r).next(o=>U.forEach(o,u=>{const c=function(m,p){return new Rl(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,i,s).next(d=>{d.forEach((m,p)=>{a=a.insert(m,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(a=>{r.forEach((u,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,ye.newInvalidDocument(d)))});let o=ro();return a.forEach((u,c)=>{const d=r.get(u);d!==void 0&&Oo(d.mutation,c,Qe.empty(),At.now()),wh(n,c)&&(o=o.insert(u,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return U.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ln(s.createTime)}}(n)),U.resolve()}getNamedQuery(t,n){return U.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:_k(s.bundledQuery),readTime:Ln(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.overlays=new Nt(G.comparator),this.kr=new Map}getOverlay(t,n){return U.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Ns();return U.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.wt(t,n,r)}),U.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.kr.delete(i)),U.resolve()}getOverlaysForCollection(t,n,i){const s=Ns(),r=n.length+1,a=new G(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const u=o.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Nt((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let d=r.get(c.largestBatchId);d===null&&(d=Ns(),r=r.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=Ns(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=s)););return U.resolve(o)}wt(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new QD(n,i));let r=this.kr.get(n);r===void 0&&(r=rt(),this.kr.set(n,r)),this.kr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(){this.sessionToken=de.EMPTY_BYTE_STRING}getSessionToken(t){return U.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.qr=new Wt(Jt.Qr),this.$r=new Wt(Jt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const i=new Jt(t,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Wr(new Jt(t,n))}Gr(t,n){t.forEach(i=>this.removeReference(i,n))}zr(t){const n=new G(new vt([])),i=new Jt(n,t),s=new Jt(n,t+1),r=[];return this.$r.forEachInRange([i,s],a=>{this.Wr(a),r.push(a.key)}),r}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new G(new vt([])),i=new Jt(n,t),s=new Jt(n,t+1);let r=rt();return this.$r.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new Jt(t,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Jt{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return G.comparator(t.key,n.key)||tt(t.Hr,n.Hr)}static Ur(t,n){return tt(t.Hr,n.Hr)||G.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Wt(Jt.Qr)}checkEmpty(t){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new KD(r,n,i,s);this.mutationQueue.push(a);for(const o of s)this.Yr=this.Yr.add(new Jt(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return U.resolve(a)}lookupMutationBatch(t,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.Xr(i),r=s<0?0:s;return U.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Wm:this.er-1)}getAllMutationBatches(t){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Jt(n,0),s=new Jt(n,Number.POSITIVE_INFINITY),r=[];return this.Yr.forEachInRange([i,s],a=>{const o=this.Zr(a.Hr);r.push(o)}),U.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Wt(tt);return n.forEach(s=>{const r=new Jt(s,0),a=new Jt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([r,a],o=>{i=i.add(o.Hr)})}),U.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;G.isDocumentKey(r)||(r=r.child(""));const a=new Jt(new G(r),0);let o=new Wt(tt);return this.Yr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(o=o.add(u.Hr)),!0)},a),U.resolve(this.ei(o))}ei(t){const n=[];return t.forEach(i=>{const s=this.Zr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){ht(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return U.forEach(n.mutations,s=>{const r=new Jt(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Yr=i})}rr(t){}containsKey(t,n){const i=new Jt(n,0),s=this.Yr.firstAfterOrEqual(i);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,U.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(t){this.ni=t,this.docs=function(){return new Nt(G.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return U.resolve(i?i.document.mutableCopy():ye.newInvalidDocument(n))}getEntries(t,n){let i=mi();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():ye.newInvalidDocument(s))}),U.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=mi();const a=n.path,o=new G(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||lD(oD(d),i)<=0||(s.has(d.key)||wh(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return U.resolve(r)}getAllFromCollectionGroup(t,n,i,s){K(9500)}ri(t,n){return U.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new kk(this)}getSize(t){return U.resolve(this.size)}}class kk extends wk{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(t,s)):this.Or.removeEntry(i)}),U.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(t){this.persistence=t,this.ii=new or(n=>tg(n),eg),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.si=0,this.oi=new og,this.targetCount=0,this._i=da.ar()}forEachTarget(t,n){return this.ii.forEach((i,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(t){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return U.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),U.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new da(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,U.resolve()}updateTargetData(t,n){return this.hr(n),U.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.ii.forEach((a,o)=>{o.sequenceNumber<=n&&i.get(o.targetId)===null&&(this.ii.delete(a),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),s++)}),U.waitFor(r).next(()=>s)}getTargetCount(t){return U.resolve(this.targetCount)}getTargetData(t,n){const i=this.ii.get(n)||null;return U.resolve(i)}addMatchingKeys(t,n,i){return this.oi.Kr(n,i),U.resolve()}removeMatchingKeys(t,n,i){this.oi.Gr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(t,a))}),U.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),U.resolve()}getMatchingKeysForTargetId(t,n){const i=this.oi.Jr(n);return U.resolve(i)}containsKey(t,n){return U.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(t,n){this.ai={},this.overlays={},this.ui=new Eh(0),this.ci=!1,this.ci=!0,this.li=new Ok,this.referenceDelegate=t(this),this.hi=new Mk(this),this.indexManager=new yk,this.remoteDocumentCache=function(s){return new Dk(s)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new gk(n),this.Ti=new Ck(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new xk,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ai[t.toKey()];return i||(i=new Nk(n,this.referenceDelegate),this.ai[t.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,i){F("MemoryPersistence","Starting transaction:",t);const s=new Pk(this.ui.next());return this.referenceDelegate.Ii(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ei(t,n){return U.or(Object.values(this.ai).map(i=>()=>i.containsKey(t,n)))}}class Pk extends cD{constructor(t){super(),this.currentSequenceNumber=t}}class lg{constructor(t){this.persistence=t,this.Ai=new og,this.Ri=null}static Vi(t){return new lg(t)}get mi(){if(this.Ri)return this.Ri;throw K(60996)}addReference(t,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),U.resolve()}removeReference(t,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),U.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),U.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.mi.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,i=>{const s=G.fromPath(i);return this.fi(t,s).next(r=>{r||n.removeEntry(s,Y.min())})}).next(()=>(this.Ri=null,n.apply(t)))}updateLimboDocument(t,n){return this.fi(t,n).next(i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(t){return 0}fi(t,n){return U.or([()=>U.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class Fc{constructor(t,n){this.persistence=t,this.gi=new or(i=>fD(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=Sk(this,n)}static Vi(t,n){return new Fc(t,n)}Ii(){}di(t){return U.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}yr(t){let n=0;return this.gr(t,i=>{n++}).next(()=>n)}gr(t,n){return U.forEach(this.gi,(i,s)=>this.Sr(t,i,s).next(r=>r?U.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ri(t,a=>this.Sr(t,a,n).next(o=>{o||(i++,r.removeEntry(a,Y.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),U.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.gi.set(i,t.currentSequenceNumber),U.resolve()}removeReference(t,n,i){return this.gi.set(i,t.currentSequenceNumber),U.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),U.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Gu(t.data.value)),n}Sr(t,n,i){return U.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.gi.get(n);return U.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Is=i,this.ds=s}static Es(t,n){let i=rt(),s=rt();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new ug(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return gC()?8:hD(Te())>0?6:4}()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.ps(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ys(t,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new Vk;return this.ws(t,n,a).next(o=>{if(r.result=o,this.Rs)return this.Ss(t,n,a,o.size)})}).next(()=>r.result)}Ss(t,n,i,s){return i.documentReadCount<this.Vs?(Ar()<=st.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Sr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(Ar()<=st.DEBUG&&F("QueryEngine","Query:",Sr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(Ar()<=st.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Sr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vn(n))):U.resolve())}ps(t,n){if(c0(n))return U.resolve(null);let i=Vn(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ap(n,null,"F"),i=Vn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const a=rt(...r);return this.gs.getDocuments(t,a).next(o=>this.indexManager.getMinOffset(t,i).next(u=>{const c=this.bs(n,o);return this.Ds(n,c,a,u.readTime)?this.ps(t,Ap(n,null,"F")):this.vs(t,c,n,u)}))})))}ys(t,n,i,s){return c0(n)||s.isEqual(Y.min())?U.resolve(null):this.gs.getDocuments(t,i).next(r=>{const a=this.bs(n,r);return this.Ds(n,a,i,s)?U.resolve(null):(Ar()<=st.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Sr(n)),this.vs(t,a,n,aD(s,Yo)).next(o=>o))})}bs(t,n){let i=new Wt(jA(t));return n.forEach((s,r)=>{wh(t,r)&&(i=i.add(r))}),i}Ds(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}ws(t,n,i){return Ar()<=st.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Sr(n)),this.gs.getDocumentsMatchingQuery(t,n,as.min(),i)}vs(t,n,i,s){return this.gs.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="LocalStore",Uk=3e8;class jk{constructor(t,n,i,s){this.persistence=t,this.Cs=n,this.serializer=s,this.Fs=new Nt(tt),this.Ms=new or(r=>tg(r),eg),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(i)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ik(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Fs))}}function zk(e,t,n,i){return new jk(e,t,n,i)}async function lS(e,t){const n=W(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Ns(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],o=[];let u=rt();for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of r){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(c=>({Bs:c,removedBatchIds:a,addedBatchIds:o}))})})}function Bk(e,t){const n=W(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.Os.newChangeBuffer({trackRemovals:!0});return function(o,u,c,d){const m=c.batch,p=m.keys();let v=U.resolve();return p.forEach(R=>{v=v.next(()=>d.getEntry(u,R)).next(O=>{const D=c.docVersions.get(R);ht(D!==null,48541),O.version.compareTo(D)<0&&(m.applyToRemoteDocument(O,c),O.isValidDocument()&&(O.setReadTime(c.commitVersion),d.addEntry(O)))})}),v.next(()=>o.mutationQueue.removeMutationBatch(u,m))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let u=rt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(u=u.add(o.batch.mutations[c].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function uS(e){const t=W(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.hi.getLastRemoteSnapshotVersion(n))}function Fk(e,t){const n=W(e),i=t.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const o=[];t.targetChanges.forEach((d,m)=>{const p=s.get(m);if(!p)return;o.push(n.hi.removeMatchingKeys(r,d.removedDocuments,m).next(()=>n.hi.addMatchingKeys(r,d.addedDocuments,m)));let v=p.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(m)!==null?v=v.withResumeToken(de.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,i)),s=s.insert(m,v),function(O,D,T){return O.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=Uk?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,v,d)&&o.push(n.hi.updateTargetData(r,v))});let u=mi(),c=rt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))}),o.push(Hk(r,a,t.documentUpdates).next(d=>{u=d.Ls,c=d.ks})),!i.isEqual(Y.min())){const d=n.hi.getLastRemoteSnapshotVersion(r).next(m=>n.hi.setTargetsMetadata(r,r.currentSequenceNumber,i));o.push(d)}return U.waitFor(o).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,c)).next(()=>u)}).then(r=>(n.Fs=s,r))}function Hk(e,t,n){let i=rt(),s=rt();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let a=mi();return n.forEach((o,u)=>{const c=r.get(o);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),u.isNoDocument()&&u.version.isEqual(Y.min())?(t.removeEntry(o,u.readTime),a=a.insert(o,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(u),a=a.insert(o,u)):F(cg,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",u.version)}),{Ls:a,ks:s}})}function qk(e,t){const n=W(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Wm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Gk(e,t){const n=W(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.hi.getTargetData(i,t).next(r=>r?(s=r,U.resolve(s)):n.hi.allocateTargetId(i).next(a=>(s=new Fi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(t,i.targetId)),i})}async function Cp(e,t,n){const i=W(e),s=i.Fs.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Sa(a))throw a;F(cg,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Fs=i.Fs.remove(t),i.Ms.delete(s.target)}function A0(e,t,n){const i=W(e);let s=Y.min(),r=rt();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,d){const m=W(u),p=m.Ms.get(d);return p!==void 0?U.resolve(m.Fs.get(p)):m.hi.getTargetData(c,d)}(i,a,Vn(t)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(a,o.targetId).next(u=>{r=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,t,n?s:Y.min(),n?r:rt())).next(o=>($k(i,ND(t),o),{documents:o,qs:r})))}function $k(e,t,n){let i=e.xs.get(t)||Y.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.xs.set(t,i)}class S0{constructor(){this.activeTargetIds=LD()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Kk{constructor(){this.Fo=new S0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,i){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new S0,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="ConnectivityMonitor";class R0{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){F(w0,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){F(w0,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eu=null;function xp(){return Eu===null?Eu=function(){return 268435456+Math.round(2147483648*Math.random())}():Eu++,"0x"+Eu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="RestConnection",Yk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xk{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===Vc?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(t,n,i,s,r){const a=xp(),o=this.Go(t,n.toUriEncodedString());F(Xd,`Sending RPC '${t}' ${a}:`,o,i);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,r);const{host:c}=new URL(o),d=ps(c);return this.jo(t,o,u,i,d).then(m=>(F(Xd,`Received RPC '${t}' ${a}: `,m),m),m=>{throw rs(Xd,`RPC '${t}' ${a} failed with error: `,m,"url: ",o,"request:",i),m})}Jo(t,n,i,s,r,a){return this.Wo(t,n,i,s,r)}zo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}Go(t,n){const i=Yk[t];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge="WebChannelConnection";class Zk extends Xk{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,i,s,r){const a=xp();return new Promise((o,u)=>{const c=new cA;c.setWithCredentials(!0),c.listenOnce(hA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case qu.NO_ERROR:const m=c.getResponseJson();F(ge,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(m)),o(m);break;case qu.TIMEOUT:F(ge,`RPC '${t}' ${a} timed out`),u(new B(L.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:const p=c.getStatus();if(F(ge,`RPC '${t}' ${a} failed with status:`,p,"response text:",c.getResponseText()),p>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const R=v==null?void 0:v.error;if(R&&R.status&&R.message){const O=function(T){const _=T.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(_)>=0?_:L.UNKNOWN}(R.status);u(new B(O,R.message))}else u(new B(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new B(L.UNAVAILABLE,"Connection failed."));break;default:K(9055,{c_:t,streamId:a,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{F(ge,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);F(ge,`RPC '${t}' ${a} sending request:`,s),c.send(n,"POST",d,i,15)})}P_(t,n,i){const s=xp(),r=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=pA(),o=fA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=r.join("");F(ge,`Creating RPC '${t}' stream ${s}: ${d}`,u);const m=a.createWebChannel(d,u);this.T_(m);let p=!1,v=!1;const R=new Wk({Ho:D=>{v?F(ge,`Not sending because RPC '${t}' stream ${s} is closed:`,D):(p||(F(ge,`Opening RPC '${t}' stream ${s} transport.`),m.open(),p=!0),F(ge,`RPC '${t}' stream ${s} sending:`,D),m.send(D))},Yo:()=>m.close()}),O=(D,T,_)=>{D.listen(T,A=>{try{_(A)}catch(x){setTimeout(()=>{throw x},0)}})};return O(m,so.EventType.OPEN,()=>{v||(F(ge,`RPC '${t}' stream ${s} transport opened.`),R.s_())}),O(m,so.EventType.CLOSE,()=>{v||(v=!0,F(ge,`RPC '${t}' stream ${s} transport closed`),R.__(),this.I_(m))}),O(m,so.EventType.ERROR,D=>{v||(v=!0,rs(ge,`RPC '${t}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),R.__(new B(L.UNAVAILABLE,"The operation could not be completed")))}),O(m,so.EventType.MESSAGE,D=>{var T;if(!v){const _=D.data[0];ht(!!_,16349);const A=_,x=(A==null?void 0:A.error)||((T=A[0])===null||T===void 0?void 0:T.error);if(x){F(ge,`RPC '${t}' stream ${s} received error:`,x);const M=x.status;let V=function(S){const w=qt[S];if(w!==void 0)return XA(w)}(M),b=x.message;V===void 0&&(V=L.INTERNAL,b="Unknown error status: "+M+" with message "+x.message),v=!0,R.__(new B(V,b)),m.close()}else F(ge,`RPC '${t}' stream ${s} received:`,_),R.a_(_)}}),O(o,dA.STAT_EVENT,D=>{D.stat===gp.PROXY?F(ge,`RPC '${t}' stream ${s} detected buffering proxy`):D.stat===gp.NOPROXY&&F(ge,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(n=>n===t)}}function Wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(e){return new nk(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Fi=t,this.timerId=n,this.d_=i,this.E_=s,this.A_=r,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-i);s>0&&F("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="PersistentStream";class hS{constructor(t,n,i,s,r,a,o,u){this.Fi=t,this.w_=i,this.S_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new cS(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(pi(n.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.b_===n&&this.W_(i,s)},i=>{t(()=>{const s=new B(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)})})}W_(t,n){const i=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{i(()=>this.G_(s))}),this.stream.onMessage(s=>{i(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return F(I0,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget(()=>this.b_===t?n():(F(I0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jk extends hS{constructor(t,n,i,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=rk(this.serializer,t),i=function(r){if(!("targetChange"in r))return Y.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?Y.min():a.readTime?Ln(a.readTime):Y.min()}(t);return this.listener.J_(n,i)}H_(t){const n={};n.database=Ip(this.serializer),n.addTarget=function(r,a){let o;const u=a.target;if(o=Tp(u)?{documents:lk(r,u)}:{query:uk(r,u).Vt},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=JA(r,a.resumeToken);const c=Sp(r,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Y.min())>0){o.readTime=Bc(r,a.snapshotVersion.toTimestamp());const c=Sp(r,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,t);const i=hk(this.serializer,t);i&&(n.labels=i),this.k_(n)}Y_(t){const n={};n.database=Ip(this.serializer),n.removeTarget=t,this.k_(n)}}class t4 extends hS{constructor(t,n,i,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return ht(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ht(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){ht(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=ok(t.writeResults,t.commitTime),i=Ln(t.commitTime);return this.listener.ta(i,n)}na(){const t={};t.database=Ip(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>ak(this.serializer,i))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{}class n4 extends e4{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new B(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Wo(t,wp(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new B(L.UNKNOWN,r.toString())})}Jo(t,n,i,s,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Jo(t,wp(n,i),s,a,o,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(L.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class i4{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(pi(n),this._a=!1):F("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="RemoteStore";class s4{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=r,this.Ea.xo(a=>{i.enqueueAndForget(async()=>{lr(this)&&(F(Zs,"Restarting streams for network reachability change."),await async function(u){const c=W(u);c.Ia.add(4),await xl(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Oh(c)}(this))})}),this.Aa=new i4(i,s)}}async function Oh(e){if(lr(e))for(const t of e.da)await t(!0)}async function xl(e){for(const t of e.da)await t(!1)}function dS(e,t){const n=W(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),pg(n)?fg(n):wa(n).x_()&&dg(n,t))}function hg(e,t){const n=W(e),i=wa(n);n.Ta.delete(t),i.x_()&&fS(n,t),n.Ta.size===0&&(i.x_()?i.B_():lr(n)&&n.Aa.set("Unknown"))}function dg(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Y.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wa(e).H_(t)}function fS(e,t){e.Ra.$e(t),wa(e).Y_(t)}function fg(e){e.Ra=new ZD({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),wa(e).start(),e.Aa.aa()}function pg(e){return lr(e)&&!wa(e).M_()&&e.Ta.size>0}function lr(e){return W(e).Ia.size===0}function pS(e){e.Ra=void 0}async function r4(e){e.Aa.set("Online")}async function a4(e){e.Ta.forEach((t,n)=>{dg(e,t)})}async function o4(e,t){pS(e),pg(e)?(e.Aa.la(t),fg(e)):e.Aa.set("Unknown")}async function l4(e,t,n){if(e.Aa.set("Online"),t instanceof ZA&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const o of r.targetIds)s.Ta.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.Ta.delete(o),s.Ra.removeTarget(o))}(e,t)}catch(i){F(Zs,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Hc(e,i)}else if(t instanceof Qu?e.Ra.Ye(t):t instanceof WA?e.Ra.it(t):e.Ra.et(t),!n.isEqual(Y.min()))try{const i=await uS(e.localStore);n.compareTo(i)>=0&&await function(r,a){const o=r.Ra.Pt(a);return o.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=r.Ta.get(c);d&&r.Ta.set(c,d.withResumeToken(u.resumeToken,a))}}),o.targetMismatches.forEach((u,c)=>{const d=r.Ta.get(u);if(!d)return;r.Ta.set(u,d.withResumeToken(de.EMPTY_BYTE_STRING,d.snapshotVersion)),fS(r,u);const m=new Fi(d.target,u,c,d.sequenceNumber);dg(r,m)}),r.remoteSyncer.applyRemoteEvent(o)}(e,n)}catch(i){F(Zs,"Failed to raise snapshot:",i),await Hc(e,i)}}async function Hc(e,t,n){if(!Sa(t))throw t;e.Ia.add(1),await xl(e),e.Aa.set("Offline"),n||(n=()=>uS(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{F(Zs,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Oh(e)})}function mS(e,t){return t().catch(n=>Hc(e,n,t))}async function Nh(e){const t=W(e),n=cs(t);let i=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Wm;for(;u4(t);)try{const s=await qk(t.localStore,i);if(s===null){t.Pa.length===0&&n.B_();break}i=s.batchId,c4(t,s)}catch(s){await Hc(t,s)}gS(t)&&_S(t)}function u4(e){return lr(e)&&e.Pa.length<10}function c4(e,t){e.Pa.push(t);const n=cs(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function gS(e){return lr(e)&&!cs(e).M_()&&e.Pa.length>0}function _S(e){cs(e).start()}async function h4(e){cs(e).na()}async function d4(e){const t=cs(e);for(const n of e.Pa)t.X_(n.mutations)}async function f4(e,t,n){const i=e.Pa.shift(),s=sg.from(i,t,n);await mS(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Nh(e)}async function p4(e,t){t&&cs(e).Z_&&await async function(i,s){if(function(a){return XD(a)&&a!==L.ABORTED}(s.code)){const r=i.Pa.shift();cs(i).N_(),await mS(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Nh(i)}}(e,t),gS(e)&&_S(e)}async function C0(e,t){const n=W(e);n.asyncQueue.verifyOperationInProgress(),F(Zs,"RemoteStore received new credentials");const i=lr(n);n.Ia.add(3),await xl(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Oh(n)}async function m4(e,t){const n=W(e);t?(n.Ia.delete(2),await Oh(n)):t||(n.Ia.add(2),await xl(n),n.Aa.set("Unknown"))}function wa(e){return e.Va||(e.Va=function(n,i,s){const r=W(n);return r.ia(),new Jk(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Zo:r4.bind(null,e),e_:a4.bind(null,e),n_:o4.bind(null,e),J_:l4.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),pg(e)?fg(e):e.Aa.set("Unknown")):(await e.Va.stop(),pS(e))})),e.Va}function cs(e){return e.ma||(e.ma=function(n,i,s){const r=W(n);return r.ia(),new t4(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:h4.bind(null,e),n_:p4.bind(null,e),ea:d4.bind(null,e),ta:f4.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await Nh(e)):(await e.ma.stop(),e.Pa.length>0&&(F(Zs,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const a=Date.now()+i,o=new mg(t,n,a,s,r);return o.start(i),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(L.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(e,t){if(pi("AsyncQueue",`${t}: ${e}`),Sa(e))return new B(L.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{static emptySet(t){return new Wr(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=ro(),this.sortedSet=new Nt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Wr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Wr;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.fa=new Nt(G.comparator)}track(t){const n=t.doc.key,i=this.fa.get(n);i?t.type!==0&&i.type===3?this.fa=this.fa.insert(n,t):t.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.fa=this.fa.remove(n):t.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):K(63341,{At:t,ga:i}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal((n,i)=>{t.push(i)}),t}}class fa{constructor(t,n,i,s,r,a,o,u,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,s,r){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new fa(t,n,Wr.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Sh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class _4{constructor(){this.queries=O0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const s=W(n),r=s.queries;s.queries=O0(),r.forEach((a,o)=>{for(const u of o.wa)u.onError(i)})})(this,new B(L.ABORTED,"Firestore shutting down"))}}function O0(){return new or(e=>UA(e),Sh)}async function _g(e,t){const n=W(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.Sa()&&t.ba()&&(i=2):(r=new g4,i=t.ba()?0:1);try{switch(i){case 0:r.ya=await n.onListen(s,!0);break;case 1:r.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const o=gg(a,`Initialization of query '${Sr(t.query)}' failed`);return void t.onError(o)}n.queries.set(s,r),r.wa.push(t),t.va(n.onlineState),r.ya&&t.Ca(r.ya)&&vg(n)}async function yg(e,t){const n=W(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const a=r.wa.indexOf(t);a>=0&&(r.wa.splice(a,1),r.wa.length===0?s=t.ba()?0:1:!r.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function y4(e,t){const n=W(e);let i=!1;for(const s of t){const r=s.query,a=n.queries.get(r);if(a){for(const o of a.wa)o.Ca(s)&&(i=!0);a.ya=s}}i&&vg(n)}function v4(e,t,n){const i=W(e),s=i.queries.get(t);if(s)for(const r of s.wa)r.onError(n);i.queries.delete(t)}function vg(e){e.Da.forEach(t=>{t.next()})}var Op,N0;(N0=Op||(Op={})).Fa="default",N0.Cache="cache";class Eg{constructor(t,n,i){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new fa(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=fa.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==Op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(t){this.key=t}}class vS{constructor(t){this.key=t}}class E4{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=rt(),this.mutatedKeys=rt(),this.Xa=jA(t),this.eu=new Wr(this.Xa)}get tu(){return this.Ha}nu(t,n){const i=n?n.ru:new x0,s=n?n.eu:this.eu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,o=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,m)=>{const p=s.get(d),v=wh(this.query,m)?m:null,R=!!p&&this.mutatedKeys.has(p.key),O=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let D=!1;p&&v?p.data.isEqual(v.data)?R!==O&&(i.track({type:3,doc:v}),D=!0):this.iu(p,v)||(i.track({type:2,doc:v}),D=!0,(u&&this.Xa(v,u)>0||c&&this.Xa(v,c)<0)&&(o=!0)):!p&&v?(i.track({type:0,doc:v}),D=!0):p&&!v&&(i.track({type:1,doc:p}),D=!0,(u||c)&&(o=!0)),D&&(v?(a=a.add(v),r=O?r.add(d):r.delete(d)):(a=a.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{eu:a,ru:i,Ds:o,mutatedKeys:r}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const a=t.ru.pa();a.sort((d,m)=>function(v,R){const O=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{At:D})}};return O(v)-O(R)}(d.type,m.type)||this.Xa(d.doc,m.doc)),this.su(i),s=s!=null&&s;const o=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,c=u!==this.Ya;return this.Ya=u,a.length!==0||c?{snapshot:new fa(this.query,t.eu,r,a,t.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new x0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=rt(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const n=[];return t.forEach(i=>{this.Za.has(i)||n.push(new vS(i))}),this.Za.forEach(i=>{t.has(i)||n.push(new yS(i))}),n}uu(t){this.Ha=t.qs,this.Za=rt();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return fa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Tg="SyncEngine";class T4{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class b4{constructor(t){this.key=t,this.lu=!1}}class A4{constructor(t,n,i,s,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new or(o=>UA(o),Sh),this.Tu=new Map,this.Iu=new Set,this.du=new Nt(G.comparator),this.Eu=new Map,this.Au=new og,this.Ru={},this.Vu=new Map,this.mu=da.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function S4(e,t,n=!0){const i=wS(e);let s;const r=i.Pu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.cu()):s=await ES(i,t,n,!0),s}async function w4(e,t){const n=wS(e);await ES(n,t,!0,!1)}async function ES(e,t,n,i){const s=await Gk(e.localStore,Vn(t)),r=s.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let o;return i&&(o=await R4(e,t,r,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&dS(e.remoteStore,s),o}async function R4(e,t,n,i,s){e.gu=(m,p,v)=>async function(O,D,T,_){let A=D.view.nu(T);A.Ds&&(A=await A0(O.localStore,D.query,!1).then(({documents:b})=>D.view.nu(b,A)));const x=_&&_.targetChanges.get(D.targetId),M=_&&_.targetMismatches.get(D.targetId)!=null,V=D.view.applyChanges(A,O.isPrimaryClient,x,M);return k0(O,D.targetId,V._u),V.snapshot}(e,m,p,v);const r=await A0(e.localStore,t,!0),a=new E4(t,r.qs),o=a.nu(r.documents),u=Cl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),c=a.applyChanges(o,e.isPrimaryClient,u);k0(e,n,c._u);const d=new T4(t,n,a);return e.Pu.set(t,d),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function I4(e,t,n){const i=W(e),s=i.Pu.get(t),r=i.Tu.get(s.targetId);if(r.length>1)return i.Tu.set(s.targetId,r.filter(a=>!Sh(a,t))),void i.Pu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Cp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&hg(i.remoteStore,s.targetId),Np(i,s.targetId)}).catch(Aa)):(Np(i,s.targetId),await Cp(i.localStore,s.targetId,!0))}async function C4(e,t){const n=W(e),i=n.Pu.get(t),s=n.Tu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),hg(n.remoteStore,i.targetId))}async function x4(e,t,n){const i=V4(e);try{const s=await function(a,o){const u=W(a),c=At.now(),d=o.reduce((v,R)=>v.add(R.key),rt());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let R=mi(),O=rt();return u.Os.getEntries(v,d).next(D=>{R=D,R.forEach((T,_)=>{_.isValidDocument()||(O=O.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,R)).next(D=>{m=D;const T=[];for(const _ of o){const A=GD(_,m.get(_.key).overlayedDocument);A!=null&&T.push(new ys(_.key,A,OA(A.value.mapValue),Ve.exists(!0)))}return u.mutationQueue.addMutationBatch(v,c,T,o)}).next(D=>{p=D;const T=D.applyToLocalDocumentSet(m,O);return u.documentOverlayCache.saveOverlays(v,D.batchId,T)})}).then(()=>({batchId:p.batchId,changes:BA(m)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,o,u){let c=a.Ru[a.currentUser.toKey()];c||(c=new Nt(tt)),c=c.insert(o,u),a.Ru[a.currentUser.toKey()]=c}(i,s.batchId,n),await Ol(i,s.changes),await Nh(i.remoteStore)}catch(s){const r=gg(s,"Failed to persist write");n.reject(r)}}async function TS(e,t){const n=W(e);try{const i=await Fk(n.localStore,t);t.targetChanges.forEach((s,r)=>{const a=n.Eu.get(r);a&&(ht(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?ht(a.lu,14607):s.removedDocuments.size>0&&(ht(a.lu,42227),a.lu=!1))}),await Ol(n,i,t)}catch(i){await Aa(i)}}function D0(e,t,n){const i=W(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Pu.forEach((r,a)=>{const o=a.view.va(t);o.snapshot&&s.push(o.snapshot)}),function(a,o){const u=W(a);u.onlineState=o;let c=!1;u.queries.forEach((d,m)=>{for(const p of m.wa)p.va(o)&&(c=!0)}),c&&vg(u)}(i.eventManager,t),s.length&&i.hu.J_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function O4(e,t,n){const i=W(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Eu.get(t),r=s&&s.key;if(r){let a=new Nt(G.comparator);a=a.insert(r,ye.newNoDocument(r,Y.min()));const o=rt().add(r),u=new Ch(Y.min(),new Map,new Nt(tt),a,o);await TS(i,u),i.du=i.du.remove(r),i.Eu.delete(t),bg(i)}else await Cp(i.localStore,t,!1).then(()=>Np(i,t,n)).catch(Aa)}async function N4(e,t){const n=W(e),i=t.batch.batchId;try{const s=await Bk(n.localStore,t);AS(n,i,null),bS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ol(n,s)}catch(s){await Aa(s)}}async function D4(e,t,n){const i=W(e);try{const s=await function(a,o){const u=W(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,o).next(m=>(ht(m!==null,37113),d=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(i.localStore,t);AS(i,t,n),bS(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Ol(i,s)}catch(s){await Aa(s)}}function bS(e,t){(e.Vu.get(t)||[]).forEach(n=>{n.resolve()}),e.Vu.delete(t)}function AS(e,t,n){const i=W(e);let s=i.Ru[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Ru[i.currentUser.toKey()]=s}}function Np(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Tu.get(t))e.Pu.delete(i),n&&e.hu.pu(i,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(i=>{e.Au.containsKey(i)||SS(e,i)})}function SS(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(hg(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),bg(e))}function k0(e,t,n){for(const i of n)i instanceof yS?(e.Au.addReference(i.key,t),k4(e,i)):i instanceof vS?(F(Tg,"Document no longer in limbo: "+i.key),e.Au.removeReference(i.key,t),e.Au.containsKey(i.key)||SS(e,i.key)):K(19791,{yu:i})}function k4(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Iu.has(i)||(F(Tg,"New document in limbo: "+n),e.Iu.add(i),bg(e))}function bg(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new G(vt.fromString(t)),i=e.mu.next();e.Eu.set(i,new b4(n)),e.du=e.du.insert(n,i),dS(e.remoteStore,new Fi(Vn(Ah(n.path)),i,"TargetPurposeLimboResolution",Eh.ue))}}async function Ol(e,t,n){const i=W(e),s=[],r=[],a=[];i.Pu.isEmpty()||(i.Pu.forEach((o,u)=>{a.push(i.gu(u,t,n).then(c=>{var d;if((c||n)&&i.isPrimaryClient){const m=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){s.push(c);const m=ug.Es(u.targetId,c);r.push(m)}}))}),await Promise.all(a),i.hu.J_(s),await async function(u,c){const d=W(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(c,p=>U.forEach(p.Is,v=>d.persistence.referenceDelegate.addReference(m,p.targetId,v)).next(()=>U.forEach(p.ds,v=>d.persistence.referenceDelegate.removeReference(m,p.targetId,v)))))}catch(m){if(!Sa(m))throw m;F(cg,"Failed to update sequence numbers: "+m)}for(const m of c){const p=m.targetId;if(!m.fromCache){const v=d.Fs.get(p),R=v.snapshotVersion,O=v.withLastLimboFreeSnapshotVersion(R);d.Fs=d.Fs.insert(p,O)}}}(i.localStore,r))}async function M4(e,t){const n=W(e);if(!n.currentUser.isEqual(t)){F(Tg,"User change. New user:",t.toKey());const i=await lS(n.localStore,t);n.currentUser=t,function(r,a){r.Vu.forEach(o=>{o.forEach(u=>{u.reject(new B(L.CANCELLED,a))})}),r.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Ol(n,i.Bs)}}function P4(e,t){const n=W(e),i=n.Eu.get(t);if(i&&i.lu)return rt().add(i.key);{let s=rt();const r=n.Tu.get(t);if(!r)return s;for(const a of r){const o=n.Pu.get(a);s=s.unionWith(o.view.tu)}return s}}function wS(e){const t=W(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=TS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=P4.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=O4.bind(null,t),t.hu.J_=y4.bind(null,t.eventManager),t.hu.pu=v4.bind(null,t.eventManager),t}function V4(e){const t=W(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=N4.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=D4.bind(null,t),t}class qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=xh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return zk(this.persistence,new Lk,t.initialUser,this.serializer)}Du(t){return new oS(lg.Vi,this.serializer)}bu(t){return new Kk}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qc.provider={build:()=>new qc};class L4 extends qc{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){ht(this.persistence.referenceDelegate instanceof Fc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new bk(i,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?ke.withCacheSize(this.cacheSizeBytes):ke.DEFAULT;return new oS(i=>Fc.Vi(i,n),this.serializer)}}class Dp{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>D0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=M4.bind(null,this.syncEngine),await m4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new _4}()}createDatastore(t){const n=xh(t.databaseInfo.databaseId),i=function(r){return new Zk(r)}(t.databaseInfo);return function(r,a,o,u){return new n4(r,a,o,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,a,o){return new s4(i,s,r,a,o)}(this.localStore,this.datastore,t.asyncQueue,n=>D0(this.syncEngine,n,0),function(){return R0.C()?new R0:new Qk}())}createSyncEngine(t,n){return function(s,r,a,o,u,c,d){const m=new A4(s,r,a,o,u,c);return d&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=W(s);F(Zs,"RemoteStore shutting down."),r.Ia.add(5),await xl(r),r.Ea.shutdown(),r.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dp.provider={build:()=>new Dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):pi("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class U4{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=_e.UNAUTHENTICATED,this.clientId=Xm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{F(hs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(F(hs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=gg(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Zd(e,t){e.asyncQueue.verifyOperationInProgress(),F(hs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await lS(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>{rs("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{F("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{rs("Terminating Firestore due to IndexedDb database deletion failed",s)})}),e._offlineComponents=t}async function M0(e,t){e.asyncQueue.verifyOperationInProgress();const n=await j4(e);F(hs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>C0(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>C0(t.remoteStore,s)),e._onlineComponents=t}async function j4(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){F(hs,"Using user provided OfflineComponentProvider");try{await Zd(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;rs("Error using user provided cache. Falling back to memory cache: "+n),await Zd(e,new qc)}}else F(hs,"Using default OfflineComponentProvider"),await Zd(e,new L4(void 0));return e._offlineComponents}async function RS(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(F(hs,"Using user provided OnlineComponentProvider"),await M0(e,e._uninitializedComponentsProvider._online)):(F(hs,"Using default OnlineComponentProvider"),await M0(e,new Dp))),e._onlineComponents}function z4(e){return RS(e).then(t=>t.syncEngine)}async function Gc(e){const t=await RS(e),n=t.eventManager;return n.onListen=S4.bind(null,t.syncEngine),n.onUnlisten=I4.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=w4.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=C4.bind(null,t.syncEngine),n}function B4(e,t,n={}){const i=new oi;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,o,u,c){const d=new Ag({next:p=>{d.Ou(),a.enqueueAndForget(()=>yg(r,m));const v=p.docs.has(o);!v&&p.fromCache?c.reject(new B(L.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&u&&u.source==="server"?c.reject(new B(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),m=new Eg(Ah(o.path),d,{includeMetadataChanges:!0,ka:!0});return _g(r,m)}(await Gc(e),e.asyncQueue,t,n,i)),i.promise}function F4(e,t,n={}){const i=new oi;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,o,u,c){const d=new Ag({next:p=>{d.Ou(),a.enqueueAndForget(()=>yg(r,m)),p.fromCache&&u.source==="server"?c.reject(new B(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),m=new Eg(o,d,{includeMetadataChanges:!0,ka:!0});return _g(r,m)}(await Gc(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="firestore.googleapis.com",V0=!0;class L0{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new B(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CS,this.ssl=V0}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:V0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=aS;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Ek)throw new B(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}rD("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IS((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Dh{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new B(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new XN;switch(i.type){case"firstParty":return new tD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new B(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=P0.get(n);i&&(F("ComponentProvider","Removing Datastore"),P0.delete(n),i.terminate())}(this),Promise.resolve()}}function H4(e,t,n,i={}){var s;e=Pe(e,Dh);const r=ps(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),u=`${t}:${n}`;r&&(Pm(`https://${u}`),Vm("Firestore",!0)),a.host!==CS&&a.host!==u&&rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:u,ssl:r,emulatorOptions:i});if(!Ks(c,o)&&(e._setSettings(c),i.mockUserToken)){let d,m;if(typeof i.mockUserToken=="string")d=i.mockUserToken,m=_e.MOCK_USER;else{d=Ab(i.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new B(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new _e(p)}e._authCredentials=new WN(new gA(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new ur(this.firestore,t,this._query)}}class Vt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Vt(this.firestore,t,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(wl(n,Vt._jsonSchema))return new Vt(t,i||null,new G(vt.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Kt("string",Vt._jsonSchemaVersion),referencePath:Kt("string")};class ts extends ur{constructor(t,n,i){super(t,n,Ah(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Vt(this.firestore,null,new G(t))}withConverter(t){return new ts(this.firestore,t,this._path)}}function js(e,t,...n){if(e=wt(e),yA("collection","path",t),e instanceof Dh){const i=vt.fromString(t,...n);return Xv(i),new ts(e,null,i)}{if(!(e instanceof Vt||e instanceof ts))throw new B(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(vt.fromString(t,...n));return Xv(i),new ts(e.firestore,null,i)}}function Tn(e,t,...n){if(e=wt(e),arguments.length===1&&(t=Xm.newId()),yA("doc","path",t),e instanceof Dh){const i=vt.fromString(t,...n);return Yv(i),new Vt(e,null,new G(i))}{if(!(e instanceof Vt||e instanceof ts))throw new B(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(vt.fromString(t,...n));return Yv(i),new Vt(e.firestore,e instanceof ts?e.converter:null,new G(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="AsyncQueue";class j0{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new cS(this,"async_queue_retry"),this.oc=()=>{const i=Wd();i&&F(U0,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=t;const n=Wd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=Wd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new oi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Sa(t))throw t;F(U0,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const n=this._c.then(()=>(this.nc=!0,t().catch(i=>{throw this.tc=i,this.nc=!1,pi("INTERNAL UNHANDLED ERROR: ",z0(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(t,n,i){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const s=mg.createAndSchedule(this,t,n,i,r=>this.lc(r));return this.ec.push(s),s}ac(){this.tc&&K(47125,{hc:z0(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function z0(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}class gi extends Dh{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new j0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new j0(t),this._firestoreClient=void 0,await t}}}function q4(e,t){const n=typeof e=="object"?e:jm(),i=typeof e=="string"?e:t||Vc,s=mh(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=Eb("firestore");r&&H4(s,...r)}return s}function Nl(e){if(e._terminated)throw new B(L.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||G4(e),e._firestoreClient}function G4(e){var t,n,i;const s=e._freezeSettings(),r=function(o,u,c,d){return new gD(o,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,IS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new U4(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const u=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this._byteString=t}static fromBase64String(t){try{return new un(de.fromBase64String(t))}catch(n){throw new B(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new un(de.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(wl(t,un._jsonSchema))return un.fromBase64String(t.bytes)}}un._jsonSchemaVersion="firestore/bytes/1.0",un._jsonSchema={type:Kt("string",un._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new B(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ue(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new B(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new B(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return tt(this._lat,t._lat)||tt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Un._jsonSchemaVersion}}static fromJSON(t){if(wl(t,Un._jsonSchema))return new Un(t.latitude,t.longitude)}}Un._jsonSchemaVersion="firestore/geoPoint/1.0",Un._jsonSchema={type:Kt("string",Un._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(wl(t,jn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new jn(t.vectorValues);throw new B(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jn._jsonSchemaVersion="firestore/vectorValue/1.0",jn._jsonSchema={type:Kt("string",jn._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=/^__.*__$/;class K4{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new ys(t,this.data,this.fieldMask,n,this.fieldTransforms):new Il(t,this.data,n,this.fieldTransforms)}}class xS{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new ys(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function OS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ec:e})}}class Sg{constructor(t,n,i,s,r,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Ac(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new Sg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Rc({path:i,mc:!1});return s.fc(t),s}gc(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return $c(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(OS(this.Ec)&&$4.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class Q4{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||xh(t)}Dc(t,n,i,s=!1){return new Sg({Ec:t,methodName:n,bc:i,path:ue.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kl(e){const t=e._freezeSettings(),n=xh(e._databaseId);return new Q4(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wg(e,t,n,i,s,r={}){const a=e.Dc(r.merge||r.mergeFields?2:0,t,n,s);Ig("Data must be an object, but it was:",a,i);const o=kS(i,a);let u,c;if(r.merge)u=new Qe(a.fieldMask),c=a.fieldTransforms;else if(r.mergeFields){const d=[];for(const m of r.mergeFields){const p=kp(t,m,n);if(!a.contains(p))throw new B(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);PS(d,p)||d.push(p)}u=new Qe(d),c=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=a.fieldTransforms;return new K4(new Me(o),u,c)}class Mh extends kh{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Mh}}class Rg extends kh{_toFieldTransform(t){return new BD(t.path,new Jo)}isEqual(t){return t instanceof Rg}}function NS(e,t,n,i){const s=e.Dc(1,t,n);Ig("Data must be an object, but it was:",s,i);const r=[],a=Me.empty();_s(i,(u,c)=>{const d=Cg(t,u,n);c=wt(c);const m=s.gc(d);if(c instanceof Mh)r.push(d);else{const p=Ml(c,m);p!=null&&(r.push(d),a.set(d,p))}});const o=new Qe(r);return new xS(a,o,s.fieldTransforms)}function DS(e,t,n,i,s,r){const a=e.Dc(1,t,n),o=[kp(t,i,n)],u=[s];if(r.length%2!=0)throw new B(L.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)o.push(kp(t,r[p])),u.push(r[p+1]);const c=[],d=Me.empty();for(let p=o.length-1;p>=0;--p)if(!PS(c,o[p])){const v=o[p];let R=u[p];R=wt(R);const O=a.gc(v);if(R instanceof Mh)c.push(v);else{const D=Ml(R,O);D!=null&&(c.push(v),d.set(v,D))}}const m=new Qe(c);return new xS(d,m,a.fieldTransforms)}function Y4(e,t,n,i=!1){return Ml(n,e.Dc(i?4:3,t))}function Ml(e,t){if(MS(e=wt(e)))return Ig("Unsupported field value:",t,e),kS(e,t);if(e instanceof kh)return function(i,s){if(!OS(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const o of i){let u=Ml(o,s.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=wt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return UD(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=At.fromDate(i);return{timestampValue:Bc(s.serializer,r)}}if(i instanceof At){const r=new At(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Bc(s.serializer,r)}}if(i instanceof Un)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof un)return{bytesValue:JA(s.serializer,i._byteString)};if(i instanceof Vt){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:ag(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof jn)return function(a,o){return{mapValue:{fields:{[IA]:{stringValue:xA},[Lc]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.wc("VectorValues must only contain numeric values.");return ng(o.serializer,c)})}}}}}}(i,s);throw s.wc(`Unsupported field value: ${vh(i)}`)}(e,t)}function kS(e,t){const n={};return TA(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):_s(e,(i,s)=>{const r=Ml(s,t.Vc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function MS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof At||e instanceof Un||e instanceof un||e instanceof Vt||e instanceof kh||e instanceof jn)}function Ig(e,t,n){if(!MS(n)||!vA(n)){const i=vh(n);throw i==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+i)}}function kp(e,t,n){if((t=wt(t))instanceof Dl)return t._internalPath;if(typeof t=="string")return Cg(e,t);throw $c("Field path arguments must be of type string or ",e,!1,void 0,n)}const X4=new RegExp("[~\\*/\\[\\]]");function Cg(e,t,n){if(t.search(X4)>=0)throw $c(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Dl(...t.split("."))._internalPath}catch{throw $c(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function $c(e,t,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new B(L.INVALID_ARGUMENT,o+e+u)}function PS(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new W4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(LS("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class W4 extends VS{data(){return super.data()}}function LS(e,t){return typeof t=="string"?Cg(e,t):t instanceof Dl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new B(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xg{}class Z4 extends xg{}function F0(e,t,...n){let i=[];t instanceof xg&&i.push(t),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof Ng).length,o=r.filter(u=>u instanceof Og).length;if(a>1||a>0&&o>0)throw new B(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class Og extends Z4{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Og(t,n,i)}_apply(t){const n=this._parse(t);return jS(t._query,n),new ur(t.firestore,t.converter,bp(t._query,n))}_parse(t){const n=kl(t.firestore);return function(r,a,o,u,c,d,m){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){q0(m,d);const R=[];for(const O of m)R.push(H0(u,r,O));p={arrayValue:{values:R}}}else p=H0(u,r,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||q0(m,d),p=Y4(o,a,m,d==="in"||d==="not-in");return $t.create(c,d,p)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Ng extends xg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ng(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:En.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let a=s;const o=r.getFlattenedFilters();for(const u of o)jS(a,u),a=bp(a,u)}(t._query,n),new ur(t.firestore,t.converter,bp(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function H0(e,t,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new B(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LA(t)&&n.indexOf("/")!==-1)throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(vt.fromString(n));if(!G.isDocumentKey(i))throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return s0(e,new G(i))}if(n instanceof Vt)return s0(e,n._key);throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vh(n)}.`)}function q0(e,t){if(!Array.isArray(e)||e.length===0)throw new B(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function jS(e,t){const n=function(s,r){for(const a of s)for(const o of a.getFlattenedFilters())if(r.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new B(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new B(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class J4{convertValue(t,n="none"){switch(us(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ft(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ls(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw K(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return _s(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var n,i,s;const r=(s=(i=(n=t.fields)===null||n===void 0?void 0:n[Lc].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(a=>Ft(a.doubleValue));return new jn(r)}convertGeoPoint(t){return new Un(Ft(t.latitude),Ft(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=bh(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Xo(t));default:return null}}convertTimestamp(t){const n=os(t);return new At(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=vt.fromString(t);ht(rS(i),9688,{name:t});const s=new Wo(i.get(1),i.get(3)),r=new G(i.popFirst(5));return s.isEqual(n)||pi(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class oo{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zs extends VS{constructor(t,n,i,s,r,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(LS("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=zs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",zs._jsonSchema={type:Kt("string",zs._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Yu extends zs{data(t={}){return super.data(t)}}class Bs{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new oo(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Yu(this._firestore,this._userDataWriter,i.key,i,new oo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const u=new Yu(s._firestore,s._userDataWriter,o.doc.key,o.doc,new oo(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const u=new Yu(s._firestore,s._userDataWriter,o.doc.key,o.doc,new oo(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:tM(o.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Bs._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Xm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function tM(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(e){e=Pe(e,Vt);const t=Pe(e.firestore,gi);return B4(Nl(t),e._key).then(n=>zS(t,e,n))}Bs._jsonSchemaVersion="firestore/querySnapshot/1.0",Bs._jsonSchema={type:Kt("string",Bs._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class kg extends J4{constructor(t){super(),this.firestore=t}convertBytes(t){return new un(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function eM(e){e=Pe(e,ur);const t=Pe(e.firestore,gi),n=Nl(t),i=new kg(t);return US(e._query),F4(n,e._query).then(s=>new Bs(t,i,e,s))}function nM(e,t,n){e=Pe(e,Vt);const i=Pe(e.firestore,gi),s=Dg(e.converter,t,n);return Ph(i,[wg(kl(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,Ve.none())])}function Pl(e,t,n,...i){e=Pe(e,Vt);const s=Pe(e.firestore,gi),r=kl(s);let a;return a=typeof(t=wt(t))=="string"||t instanceof Dl?DS(r,"updateDoc",e._key,t,n,i):NS(r,"updateDoc",e._key,t),Ph(s,[a.toMutation(e._key,Ve.exists(!0))])}function Mg(e,t){const n=Pe(e.firestore,gi),i=Tn(e),s=Dg(e.converter,t);return Ph(n,[wg(kl(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,Ve.exists(!1))]).then(()=>i)}function $0(e,...t){var n,i,s;e=wt(e);let r={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||B0(t[a])||(r=t[a++]);const o={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(B0(t[a])){const m=t[a];t[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),t[a+1]=(i=m.error)===null||i===void 0?void 0:i.bind(m),t[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,c,d;if(e instanceof Vt)c=Pe(e.firestore,gi),d=Ah(e._key.path),u={next:m=>{t[a]&&t[a](zS(c,e,m))},error:t[a+1],complete:t[a+2]};else{const m=Pe(e,ur);c=Pe(m.firestore,gi),d=m._query;const p=new kg(c);u={next:v=>{t[a]&&t[a](new Bs(c,p,m,v))},error:t[a+1],complete:t[a+2]},US(e._query)}return function(p,v,R,O){const D=new Ag(O),T=new Eg(v,D,R);return p.asyncQueue.enqueueAndForget(async()=>_g(await Gc(p),T)),()=>{D.Ou(),p.asyncQueue.enqueueAndForget(async()=>yg(await Gc(p),T))}}(Nl(c),d,o,u)}function Ph(e,t){return function(i,s){const r=new oi;return i.asyncQueue.enqueueAndForget(async()=>x4(await z4(i),s,r)),r.promise}(Nl(e),t)}function zS(e,t,n){const i=n.docs.get(t._key),s=new kg(e);return new zs(e,s,t._key,i,new oo(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=kl(t)}set(t,n,i){this._verifyNotCommitted();const s=Jd(t,this._firestore),r=Dg(s.converter,n,i),a=wg(this._dataReader,"WriteBatch.set",s._key,r,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,Ve.none())),this}update(t,n,i,...s){this._verifyNotCommitted();const r=Jd(t,this._firestore);let a;return a=typeof(n=wt(n))=="string"||n instanceof Dl?DS(this._dataReader,"WriteBatch.update",r._key,n,i,s):NS(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(a.toMutation(r._key,Ve.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Jd(t,this._firestore);return this._mutations=this._mutations.concat(new ig(n._key,Ve.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jd(e,t){if((e=wt(e)).firestore!==t)throw new B(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function _i(){return new Rg("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(e){return Nl(e=Pe(e,gi)),new iM(e,t=>Ph(e,t))}(function(t,n=!0){(function(s){ba=s})(rr),Qs(new ss("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),o=new gi(new ZN(i.getProvider("auth-internal")),new eD(a,i.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new B(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wo(c.options.projectId,d)}(a,s),a);return r=Object.assign({useFetchStreams:n},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),kn(qv,Gv,t),kn(qv,Gv,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="firebasestorage.googleapis.com",FS="storageBucket",rM=2*60*1e3,aM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut extends Hn{constructor(t,n,i=0){super(tf(t),`Firebase Storage: ${n} (${tf(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ut.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return tf(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Lt;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Lt||(Lt={}));function tf(e){return"storage/"+e}function Pg(){const e="An unknown error occurred, please check the error payload for server response.";return new Ut(Lt.UNKNOWN,e)}function oM(e){return new Ut(Lt.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function lM(e){return new Ut(Lt.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uM(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ut(Lt.UNAUTHENTICATED,e)}function cM(){return new Ut(Lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function hM(e){return new Ut(Lt.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function dM(){return new Ut(Lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fM(){return new Ut(Lt.CANCELED,"User canceled the upload/download.")}function pM(e){return new Ut(Lt.INVALID_URL,"Invalid URL '"+e+"'.")}function mM(e){return new Ut(Lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function gM(){return new Ut(Lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+FS+"' property when initializing the app?")}function _M(){return new Ut(Lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yM(){return new Ut(Lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vM(e){return new Ut(Lt.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Mp(e){return new Ut(Lt.INVALID_ARGUMENT,e)}function HS(){return new Ut(Lt.APP_DELETED,"The Firebase app was deleted.")}function EM(e){return new Ut(Lt.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function No(e,t){return new Ut(Lt.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Xa(e){throw new Ut(Lt.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=Ye.makeFromUrl(t,n)}catch{return new Ye(t,"")}if(i.path==="")return i;throw mM(t)}static makeFromUrl(t,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function r(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const d="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${d}/b/${s}/o${p}`,"i"),R={bucket:1,path:3},O=n===BS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",T=new RegExp(`^https?://${O}/${s}/${D}`,"i"),A=[{regex:o,indices:u,postModify:r},{regex:v,indices:R,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<A.length;x++){const M=A[x],V=M.regex.exec(t);if(V){const b=V[M.indices.bucket];let y=V[M.indices.path];y||(y=""),i=new Ye(b,y),M.postModify(i);break}}if(i==null)throw pM(t);return i}}class TM{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(e,t,n){let i=1,s=null,r=null,a=!1,o=0;function u(){return o===2}let c=!1;function d(...D){c||(c=!0,t.apply(null,D))}function m(D){s=setTimeout(()=>{s=null,e(v,u())},D)}function p(){r&&clearTimeout(r)}function v(D,...T){if(c){p();return}if(D){p(),d.call(null,D,...T);return}if(u()||a){p(),d.call(null,D,...T);return}i<64&&(i*=2);let A;o===1?(o=2,A=0):A=(i+Math.random())*1e3,m(A)}let R=!1;function O(D){R||(R=!0,p(),!c&&(s!==null?(D||(o=2),clearTimeout(s),m(0)):D||(o=1)))}return m(0),r=setTimeout(()=>{a=!0,O(!0)},n),O}function AM(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(e){return e!==void 0}function wM(e){return typeof e=="object"&&!Array.isArray(e)}function Vg(e){return typeof e=="string"||e instanceof String}function K0(e){return Lg()&&e instanceof Blob}function Lg(){return typeof Blob<"u"}function Q0(e,t,n,i){if(i<t)throw Mp(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw Mp(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function qS(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const s=t(i)+"="+t(e[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var Fs;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Fs||(Fs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(e,t){const n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||s||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(t,n,i,s,r,a,o,u,c,d,m,p=!0,v=!1){this.url_=t,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=m,this.retry=p,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,O)=>{this.resolve_=R,this.reject_=O,this.start_()})}start_(){const t=(i,s)=>{if(s){i(!1,new Tu(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const a=o=>{const u=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&r.addUploadProgressListener(a),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(a),this.pendingConnection_=null;const o=r.getErrorCode()===Fs.NO_ERROR,u=r.getStatus();if(!o||RM(u,this.additionalRetryCodes_)&&this.retry){const d=r.getErrorCode()===Fs.ABORT;i(!1,new Tu(!1,null,d));return}const c=this.successCodes_.indexOf(u)!==-1;i(!0,new Tu(c,r))})},n=(i,s)=>{const r=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(o,o.getResponse());SM(u)?r(u):r()}catch(u){a(u)}else if(o!==null){const u=Pg();u.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,u)):a(u)}else if(s.canceled){const u=this.appDelete_?HS():fM();a(u)}else{const u=dM();a(u)}};this.canceled_?n(!1,new Tu(!1,null,!0)):this.backoffId_=bM(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&AM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Tu{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function CM(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function xM(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function OM(e,t){t&&(e["X-Firebase-GMPID"]=t)}function NM(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function DM(e,t,n,i,s,r,a=!0,o=!1){const u=qS(e.urlParams),c=e.url+u,d=Object.assign({},e.headers);return OM(d,t),CM(d,n),xM(d,r),NM(d,i),new IM(c,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function MM(...e){const t=kM();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(Lg())return new Blob(e);throw new Ut(Lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function PM(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(e){if(typeof atob>"u")throw vM("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ef{constructor(t,n){this.data=t,this.contentType=n||null}}function LM(e,t){switch(e){case xn.RAW:return new ef(GS(t));case xn.BASE64:case xn.BASE64URL:return new ef($S(e,t));case xn.DATA_URL:return new ef(jM(t),zM(t))}throw Pg()}function GS(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const r=i,a=e.charCodeAt(++n);i=65536|(r&1023)<<10|a&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function UM(e){let t;try{t=decodeURIComponent(e)}catch{throw No(xn.DATA_URL,"Malformed data URL.")}return GS(t)}function $S(e,t){switch(e){case xn.BASE64:{const s=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(s||r)throw No(e,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case xn.BASE64URL:{const s=t.indexOf("+")!==-1,r=t.indexOf("/")!==-1;if(s||r)throw No(e,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=VM(t)}catch(s){throw s.message.includes("polyfill")?s:No(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class KS{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw No(xn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=BM(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function jM(e){const t=new KS(e);return t.base64?$S(xn.BASE64,t.rest):UM(t.rest)}function zM(e){return new KS(e).contentType}function BM(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t,n){let i=0,s="";K0(t)?(this.data_=t,i=t.size,s=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,n){if(K0(this.data_)){const i=this.data_,s=PM(i,t,n);return s===null?null:new Li(s)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new Li(i,!0)}}static getBlob(...t){if(Lg()){const n=t.map(i=>i instanceof Li?i.data_:i);return new Li(MM.apply(null,n))}else{const n=t.map(a=>Vg(a)?LM(xn.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const s=new Uint8Array(i);let r=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)s[r++]=a[o]}),new Li(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(e){let t;try{t=JSON.parse(e)}catch{return null}return wM(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function HM(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function YS(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(e,t){return t}class Se{constructor(t,n,i,s){this.server=t,this.local=n||t,this.writable=!!i,this.xform=s||qM}}let bu=null;function GM(e){return!Vg(e)||e.length<2?e:YS(e)}function XS(){if(bu)return bu;const e=[];e.push(new Se("bucket")),e.push(new Se("generation")),e.push(new Se("metageneration")),e.push(new Se("name","fullPath",!0));function t(r,a){return GM(a)}const n=new Se("name");n.xform=t,e.push(n);function i(r,a){return a!==void 0?Number(a):a}const s=new Se("size");return s.xform=i,e.push(s),e.push(new Se("timeCreated")),e.push(new Se("updated")),e.push(new Se("md5Hash",null,!0)),e.push(new Se("cacheControl",null,!0)),e.push(new Se("contentDisposition",null,!0)),e.push(new Se("contentEncoding",null,!0)),e.push(new Se("contentLanguage",null,!0)),e.push(new Se("contentType",null,!0)),e.push(new Se("metadata","customMetadata",!0)),bu=e,bu}function $M(e,t){function n(){const i=e.bucket,s=e.fullPath,r=new Ye(i,s);return t._makeStorageReference(r)}Object.defineProperty(e,"ref",{get:n})}function KM(e,t,n){const i={};i.type="file";const s=n.length;for(let r=0;r<s;r++){const a=n[r];i[a.local]=a.xform(i,t[a.server])}return $M(i,e),i}function WS(e,t,n){const i=QS(t);return i===null?null:KM(e,i,n)}function QM(e,t,n,i){const s=QS(t);if(s===null||!Vg(s.downloadTokens))return null;const r=s.downloadTokens;if(r.length===0)return null;const a=encodeURIComponent;return r.split(",").map(c=>{const d=e.bucket,m=e.fullPath,p="/b/"+a(d)+"/o/"+a(m),v=Ug(p,n,i),R=qS({alt:"media",token:c});return v+R})[0]}function YM(e,t){const n={},i=t.length;for(let s=0;s<i;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class ZS{constructor(t,n,i,s){this.url=t,this.method=n,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(e){if(!e)throw Pg()}function XM(e,t){function n(i,s){const r=WS(e,s,t);return JS(r!==null),r}return n}function WM(e,t){function n(i,s){const r=WS(e,s,t);return JS(r!==null),QM(r,s,e.host,e._protocol)}return n}function tw(e){function t(n,i){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=cM():s=uM():n.getStatus()===402?s=lM(e.bucket):n.getStatus()===403?s=hM(e.path):s=i,s.status=n.getStatus(),s.serverResponse=i.serverResponse,s}return t}function ZM(e){const t=tw(e);function n(i,s){let r=t(i,s);return i.getStatus()===404&&(r=oM(e.path)),r.serverResponse=s.serverResponse,r}return n}function JM(e,t,n){const i=t.fullServerUrl(),s=Ug(i,e.host,e._protocol),r="GET",a=e.maxOperationRetryTime,o=new ZS(s,r,WM(e,n),a);return o.errorHandler=ZM(t),o}function tP(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function eP(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=tP(null,t)),i}function nP(e,t,n,i,s){const r=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let A="";for(let x=0;x<2;x++)A=A+Math.random().toString().slice(2);return A}const u=o();a["Content-Type"]="multipart/related; boundary="+u;const c=eP(t,i,s),d=YM(c,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+u+"--",v=Li.getBlob(m,i,p);if(v===null)throw _M();const R={name:c.fullPath},O=Ug(r,e.host,e._protocol),D="POST",T=e.maxUploadRetryTime,_=new ZS(O,D,XM(e,n),T);return _.urlParams=R,_.headers=a,_.body=v.uploadData(),_.errorHandler=tw(t),_}class iP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fs.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fs.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fs.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,s,r){if(this.sent_)throw Xa("cannot .send() more than once");if(ps(t)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,t,!0),r!==void 0)for(const a in r)r.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,r[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class sP extends iP{initXhr(){this.xhr_.responseType="text"}}function ew(){return new sP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(t,n){this._service=t,n instanceof Ye?this._location=n:this._location=Ye.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Js(t,n)}get root(){const t=new Ye(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YS(this._location.path)}get storage(){return this._service}get parent(){const t=FM(this._location.path);if(t===null)return null;const n=new Ye(this._location.bucket,t);return new Js(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw EM(t)}}function rP(e,t,n){e._throwIfRoot("uploadBytes");const i=nP(e.storage,e._location,XS(),new Li(t,!0),n);return e.storage.makeRequestWithTokens(i,ew).then(s=>({metadata:s,ref:e}))}function aP(e){e._throwIfRoot("getDownloadURL");const t=JM(e.storage,e._location,XS());return e.storage.makeRequestWithTokens(t,ew).then(n=>{if(n===null)throw yM();return n})}function oP(e,t){const n=HM(e._location.path,t),i=new Ye(e._location.bucket,n);return new Js(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(e){return/^[A-Za-z]+:\/\//.test(e)}function uP(e,t){return new Js(e,t)}function nw(e,t){if(e instanceof jg){const n=e;if(n._bucket==null)throw gM();const i=new Js(n,n._bucket);return t!=null?nw(i,t):i}else return t!==void 0?oP(e,t):e}function cP(e,t){if(t&&lP(t)){if(e instanceof jg)return uP(e,t);throw Mp("To use ref(service, url), the first argument must be a Storage instance.")}else return nw(e,t)}function Y0(e,t){const n=t==null?void 0:t[FS];return n==null?null:Ye.makeFromBucketSpec(n,e)}function hP(e,t,n,i={}){e.host=`${t}:${n}`;const s=ps(t);s&&(Pm(`https://${e.host}/b`),Vm("Storage",!0)),e._isUsingEmulator=!0,e._protocol=s?"https":"http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken=typeof r=="string"?r:Ab(r,e.app.options.projectId))}class jg{constructor(t,n,i,s,r,a=!1){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._isUsingEmulator=a,this._bucket=null,this._host=BS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rM,this._maxUploadRetryTime=aM,this._requests=new Set,s!=null?this._bucket=Ye.makeFromBucketSpec(s,this._host):this._bucket=Y0(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ye.makeFromBucketSpec(this._url,t):this._bucket=Y0(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Q0("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Q0("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ke(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Js(this,t)}_makeRequest(t,n,i,s,r=!0){if(this._deleted)return new TM(HS());{const a=DM(t,this._appId,i,s,n,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,s).getPromise()}}const X0="@firebase/storage",W0="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="storage";function sw(e,t,n){return e=wt(e),rP(e,t,n)}function rw(e){return e=wt(e),aP(e)}function aw(e,t){return e=wt(e),cP(e,t)}function dP(e=jm(),t){e=wt(e);const i=mh(e,iw).getImmediate({identifier:t}),s=Eb("storage");return s&&fP(i,...s),i}function fP(e,t,n,i={}){hP(e,t,n,i)}function pP(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new jg(n,i,s,t,rr)}function mP(){Qs(new ss(iw,pP,"PUBLIC").setMultipleInstances(!0)),kn(X0,W0,""),kn(X0,W0,"esm2017")}mP();const gP={apiKey:"AIzaSyDBjx1eEP4F7b9Z6_dYbaxSwY5sJbm2EfM",authDomain:"aplikasikantordigital.firebaseapp.com",projectId:"aplikasikantordigital",storageBucket:"aplikasikantordigital.appspot.com",messagingSenderId:"771864585836",appId:"1:771864585836:web:416b572f7802e7338e1a49",measurementId:"G-JPYQ7PRPM7"},zg=Rb(gP),ce=q4(zg),lo=QN(zg),ow=dP(zg);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yP=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),Z0=e=>{const t=yP(e);return t.charAt(0).toUpperCase()+t.slice(1)},lw=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),vP=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=q.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:a,...o},u)=>q.createElement("svg",{ref:u,...EP,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:lw("lucide",s),...!r&&!vP(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,d])=>q.createElement(c,d)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(e,t)=>{const n=q.forwardRef(({className:i,...s},r)=>q.createElement(TP,{ref:r,iconNode:t,className:lw(`lucide-${_P(Z0(e))}`,`lucide-${e}`,i),...s}));return n.displayName=Z0(e),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],AP=dt("bell",bP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],wP=dt("building-2",SP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],IP=dt("calendar-check",RP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],xP=dt("chart-no-axes-column",CP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],NP=dt("chevron-left",OP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],kP=dt("chevron-right",DP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],PP=dt("circle-check",MP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],LP=dt("circle-plus",VP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jP=dt("clock",UP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]],uw=dt("file-check-2",zP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"37hlfg"}],["path",{d:"M8 14v2.2l1.6 1",key:"6m4bie"}],["circle",{cx:"8",cy:"16",r:"6",key:"10v15b"}]],FP=dt("file-clock",BP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],qP=dt("file-pen",HP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],$P=dt("funnel",GP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],QP=dt("history",KP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],cw=dt("inbox",YP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],WP=dt("info",XP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],JP=dt("layout-dashboard",ZP);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],eV=dt("log-out",tV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],iV=dt("menu",nV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],rV=dt("moon",sV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],oV=dt("octagon-alert",aV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],uV=dt("plus",lV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],hw=dt("send",cV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dV=dt("settings",hV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],pV=dt("shield-check",fV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],dw=dt("square-pen",mV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],_V=dt("sun",gV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vV=dt("triangle-alert",yV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],TV=dt("users",EV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ra=dt("x",bV),Wa={canManageSurat:["super_admin","admin","tu_pimpinan","tu_opd"],canViewAllDisposisi:["super_admin","pimpinan","admin"],canManageUsers:["super_admin","admin"],canManageOPD:["super_admin"],canViewSettings:["super_admin","admin"]},J0=({userInfo:e,activeTab:t,onTabChange:n,onLogout:i,theme:s,toggleTheme:r,sessionOpdName:a})=>{var u;const o=q.useMemo(()=>{const{peran:c}=e||{};if(!c)return[];let d=[{id:"dashboard",label:"Dashboard",icon:JP}];return Wa.canManageSurat.includes(c)&&(d.push({id:"surat-masuk",label:"Surat Masuk",icon:cw}),d.push({id:"surat-keluar",label:"Surat Keluar",icon:hw})),d.push({id:"disposisi-saya",label:"Tugas Saya",icon:uw}),Wa.canViewAllDisposisi.includes(c)&&d.push({id:"disposisi",label:"Riwayat Disposisi",icon:QP}),Wa.canManageOPD.includes(c)&&d.push({id:"manajemen-opd",label:"Manajemen Unit Kerja",icon:wP}),Wa.canManageUsers.includes(c)&&d.push({id:"manajemen-pengguna",label:"Manajemen Pengguna",icon:TV}),Wa.canViewSettings.includes(c)&&d.push({id:"pengaturan",label:"Pengaturan",icon:dV}),d},[e]);return g.jsxs("div",{className:"flex flex-col h-full bg-bg-surface",children:[g.jsxs("div",{className:"flex items-center justify-center gap-2 p-4 mb-4",children:[g.jsx(pV,{className:"w-10 h-10 text-accent-color"}),g.jsx("span",{className:"text-2xl font-bold text-text-primary",children:"ARKADIA"})]}),g.jsx("nav",{className:"flex-1 space-y-2 px-4",children:o.map(c=>g.jsxs("button",{onClick:()=>n(c.id),className:`sidebar-btn w-full ${t===c.id?"active":""}`,children:[g.jsx(c.icon,{className:"w-5 h-5"}),g.jsx("span",{children:c.label})]},c.id))}),g.jsxs("div",{className:"p-4 border-t border-border-color space-y-4",children:[a&&g.jsxs("div",{className:"p-2 text-center bg-bg-muted rounded-lg",children:[g.jsx("p",{className:"text-xs text-text-secondary",children:"Sesi Aktif:"}),g.jsx("p",{className:"font-semibold text-accent-color",children:a})]}),g.jsxs("button",{onClick:r,className:"sidebar-btn w-full",children:[s==="dark"?g.jsx(_V,{className:"w-5 h-5"}):g.jsx(rV,{className:"w-5 h-5"}),g.jsx("span",{children:"Ganti Tema"})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"user-avatar-button",children:g.jsx("span",{children:((u=e==null?void 0:e.nama)==null?void 0:u.charAt(0))||"U"})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-text-primary",children:(e==null?void 0:e.nama)||"Pengguna"}),g.jsx("p",{className:"text-xs text-text-secondary",children:(e==null?void 0:e.namaJabatan)||"Role"})]})]}),g.jsxs("button",{onClick:i,className:"sidebar-btn w-full text-red-400 hover:bg-red-400/20",children:[g.jsx(eV,{className:"w-5 h-5"}),g.jsx("span",{children:"Keluar"})]})]})]})};function AV({isOpen:e,onClose:t,...n}){return g.jsxs(g.Fragment,{children:[g.jsx("aside",{className:"hidden md:block w-[var(--sidebar-width)] flex-shrink-0",children:g.jsx(J0,{...n})}),g.jsxs("div",{className:`fixed inset-0 z-40 transition-opacity duration-300 md:hidden ${e?"opacity-100":"opacity-0 pointer-events-none"}`,children:[g.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:t}),g.jsx("aside",{className:`relative z-50 w-[var(--sidebar-width)] h-full transition-transform duration-300 ease-in-out ${e?"translate-x-0":"-translate-x-full"}`,children:g.jsx(J0,{...n})})]})]})}function SV({pageTitle:e,notifications:t,onNotifClick:n,onMenuClick:i}){const s={dashboard:"Dashboard","surat-masuk":"Surat Masuk","surat-keluar":"Surat Keluar","disposisi-saya":"Tugas Saya",disposisi:"Riwayat Disposisi","manajemen-opd":"Manajemen Unit Kerja","manajemen-pengguna":"Manajemen Pengguna",pengaturan:"Pengaturan"},r=q.useMemo(()=>(t||[]).filter(a=>!a.isRead).length,[t]);return g.jsxs("header",{className:"main-header h-[var(--header-height)] flex items-center justify-between px-4 md:px-6 bg-bg-surface border-b border-border-color flex-shrink-0 transition-colors duration-300",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{onClick:i,className:"header-icon-btn md:hidden",children:g.jsx(iV,{})}),g.jsx("h2",{className:"text-xl md:text-2xl font-bold text-text-primary",children:s[e]||"Dashboard"})]}),g.jsxs("button",{onClick:n,className:"header-icon-btn relative",children:[g.jsx(AP,{}),r>0&&g.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs text-white",children:r})]})]})}function tr({text:e="Memuat..."}){return g.jsxs("div",{className:"fixed inset-0 bg-gray-900/80 backdrop-blur-sm flex flex-col items-center justify-center z-[2000]",children:[g.jsx("div",{className:"w-12 h-12 border-4 border-gray-600 border-t-teal-400 rounded-full animate-spin"}),g.jsx("p",{className:"text-gray-400 mt-4 font-medium",children:e})]})}function wV({onLogin:e}){const[t,n]=q.useState(""),[i,s]=q.useState(""),r=a=>{a.preventDefault(),e(t,i)};return g.jsx("div",{id:"login-view",className:"flex flex-col items-center justify-center min-h-screen p-4 bg-grid-pattern",children:g.jsxs("div",{className:"login-container",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h1",{className:"text-5xl font-bold text-white mb-2",children:"ARKADIA"}),g.jsx("p",{className:"text-text-secondary",children:"Selamat Datang Kembali"})]}),g.jsxs("form",{id:"login-form",onSubmit:r,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"login-identifier",className:"block text-sm font-medium text-text-secondary mb-1",children:"Email"}),g.jsx("input",{type:"email",id:"login-identifier",className:"form-input-elegant",required:!0,value:t,onChange:a=>n(a.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password-login",className:"block text-sm font-medium text-text-secondary mb-1",children:"Password"}),g.jsx("input",{type:"password",id:"password-login",className:"form-input-elegant",required:!0,value:i,onChange:a=>s(a.target.value)})]}),g.jsx("button",{type:"submit",className:"w-full elegant-btn",children:"Masuk"})]})]})})}function RV({opdList:e,onSelect:t,onSkip:n}){const[i,s]=q.useState(""),r=q.useMemo(()=>e.map(o=>({value:o.id,text:o.nama})),[e]),a=()=>{if(i){const o=e.find(u=>u.id===i);t(o)}};return g.jsx("div",{className:"modal-overlay active",style:{zIndex:3e3},children:g.jsxs("div",{className:"modal-content",children:[g.jsx("h2",{className:"text-xl font-bold mb-2 text-text-primary",children:"Pilih Sesi Kerja"}),g.jsx("p",{className:"text-text-secondary mb-6",children:"Sebagai Super Admin, Anda dapat memilih untuk mengelola satu Unit Kerja spesifik atau bekerja di level Pusat."}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("select",{value:i,onChange:o=>s(o.target.value),className:"form-input-elegant",children:[g.jsx("option",{value:"",children:"Pilih Unit Kerja..."}),r.map(o=>g.jsx("option",{value:o.value,children:o.text},o.value))]}),g.jsx("button",{onClick:a,className:"w-full elegant-btn mt-2",disabled:!i,children:"Masuk ke OPD"}),g.jsxs("div",{className:"relative flex py-3 items-center",children:[g.jsx("div",{className:"flex-grow border-t border-border-color"}),g.jsx("span",{className:"flex-shrink mx-4 text-text-secondary text-sm",children:"ATAU"}),g.jsx("div",{className:"flex-grow border-t border-border-color"})]}),g.jsx("button",{onClick:n,className:"w-full elegant-btn bg-bg-muted text-text-primary hover:bg-border-color",children:"Masuk ke Sesi Pusat"})]})]})})}const nf=({icon:e,title:t,date:n,children:i})=>g.jsxs("div",{className:"elegant-card h-full",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center",children:[g.jsx(e,{className:"w-5 h-5 mr-3 text-accent-color"}),t]}),n&&g.jsx("span",{className:"text-sm font-normal text-text-secondary",children:n})]}),g.jsx("div",{className:"space-y-2",children:i})]}),sf=({label:e,value:t,icon:n,color:i})=>g.jsxs("div",{className:"flex items-center gap-4 p-2",children:[g.jsx("div",{className:"p-2 bg-black/10 dark:bg-white/5 rounded-lg",children:g.jsx(n,{className:`w-6 h-6 ${i}`})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-text-secondary text-sm font-medium",children:e}),g.jsx("p",{className:"text-xl font-bold text-text-primary",children:t})]})]}),IV=({agenda:e})=>{const t=e.waktuPelaksanaan.toDate().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}).replace(".",":");return g.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-bg-base/50 transition-colors",children:[g.jsxs("div",{className:"agenda-time-box",children:[g.jsx(jP,{className:"w-4 h-4"}),g.jsx("span",{children:t})]}),g.jsxs("div",{className:"flex-grow",children:[g.jsx("h4",{className:"font-semibold text-text-primary",children:e.perihal}),g.jsxs("p",{className:"text-sm text-text-secondary",children:["Tempat: ",e.tempatPelaksanaan||"N/A"]})]})]})},CV=({tugas:e,appData:t})=>{const n=t.suratMasuk.find(s=>s.id===e.suratMasukId),i=t.options.jabatan.find(s=>s.id===e.pemberiDisposisiJabatanId);return n?g.jsxs("div",{className:"flex items-start gap-4 p-3 rounded-lg hover:bg-bg-base/50 transition-colors",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-accent/20 text-yellow-accent flex items-center justify-center font-bold flex-shrink-0",children:(i==null?void 0:i.nama.charAt(0))||"?"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-text-primary",children:n.perihal}),g.jsxs("p",{className:"text-sm text-text-secondary",children:["Instruksi: ",e.isiDisposisi]})]})]}):null};function t1({appData:e,userInfo:t}){const{suratMasuk:n,disposisi:i}=e,{peran:s}=t,[r,a]=q.useState("");q.useEffect(()=>{const d=new Date,m={weekday:"long",year:"numeric",month:"long",day:"numeric"};a(d.toLocaleDateString("id-ID",m))},[]);const o=q.useMemo(()=>{const d=new Date;d.setHours(0,0,0,0);const m=new Date;return m.setHours(23,59,59,999),n.filter(p=>{var v;return p.jenisSurat==="Undangan"&&((v=p.waktuPelaksanaan)==null?void 0:v.toDate)}).filter(p=>{const v=p.waktuPelaksanaan.toDate();return v>=d&&v<=m}).sort((p,v)=>p.waktuPelaksanaan.toDate()-v.waktuPelaksanaan.toDate())},[n]),u=q.useMemo(()=>i.filter(d=>d.tujuanJabatanId===t.id&&d.statusTindakLanjut==="Baru").slice(0,5),[i,t.id]),c=s==="pimpinan"||s==="super_admin";return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:`grid grid-cols-1 ${c?"lg:grid-cols-3":"lg:grid-cols-1"} gap-6`,children:[g.jsx("div",{className:`${c?"lg:col-span-2":"lg:col-span-1"}`,children:g.jsx(nf,{icon:IP,title:"Agenda Hari Ini",date:r,children:o.length>0?o.map(d=>g.jsx(IV,{agenda:d},d.id)):g.jsx("p",{className:"text-text-secondary text-center py-4",children:"Tidak ada agenda hari ini."})})}),c&&g.jsx("div",{className:"lg:col-span-1",children:g.jsxs(nf,{icon:xP,title:"Statistik",children:[g.jsx(sf,{label:"Surat Masuk",value:e.suratMasuk.length,icon:cw,color:"text-blue-accent"}),g.jsx(sf,{label:"Surat Keluar",value:e.suratKeluar.length,icon:hw,color:"text-green-accent"}),g.jsx(sf,{label:"Total Disposisi",value:e.disposisi.length,icon:FP,color:"text-yellow-accent"})]})})]}),g.jsx("div",{children:g.jsx(nf,{icon:uw,title:"Tugas Mendesak Saya",children:u.length>0?u.map(d=>g.jsx(CV,{tugas:d,appData:e},d.id)):g.jsx("p",{className:"text-text-secondary text-center py-4",children:"Tidak ada tugas baru."})})})]})}const xV=({children:e})=>g.jsx("div",{children:e}),OV=({item:e})=>g.jsx("div",{className:"elegant-card",children:e.perihal});function NV({data:e,onEdit:t,openModal:n,userInfo:i}){const s=[{key:"statusDisposisi",label:"Status Disposisi",values:["Belum Disposisi","Sudah Disposisi"]}];return g.jsx(xV,{title:"Surat Masuk",data:e,onEdit:t,CardComponent:OV,filterOptions:s,openModal:n,userInfo:i})}const DV=({options:e,onApply:t,onReset:n})=>{const[i,s]=q.useState({}),r=(a,o)=>s(u=>({...u,[a]:o}));return g.jsxs("div",{className:"filter-popover",children:[g.jsx("h4",{className:"font-bold mb-2 text-text-primary",children:"Filter Lanjutan"}),e.map(a=>g.jsxs("div",{className:"mb-3",children:[g.jsx("label",{className:"text-xs font-medium text-text-secondary",children:a.label}),g.jsxs("select",{onChange:o=>r(a.key,o.target.value),className:"form-input-elegant text-sm p-2 mt-1",children:[g.jsx("option",{value:"",children:"Semua"}),a.values.map(o=>g.jsx("option",{value:o,children:o},o))]})]},a.key)),g.jsxs("div",{className:"flex gap-2 mt-4",children:[g.jsx("button",{onClick:()=>t(i),className:"elegant-btn text-sm py-1 px-3 flex-1",children:"Terapkan"}),g.jsx("button",{onClick:n,className:"elegant-btn bg-bg-muted text-text-primary hover:bg-border-color text-sm py-1 px-3",children:"Reset"})]})]})},kV=({data:e,currentPage:t,setCurrentPage:n,rowsPerPage:i,setRowsPerPage:s})=>{const r=Math.ceil(e.length/i);return g.jsxs("div",{className:"flex items-center justify-center sm:justify-end text-sm mt-6 text-text-secondary gap-2",children:[g.jsx("span",{children:"Baris per Hal:"}),g.jsxs("select",{value:i,onChange:a=>{s(Number(a.target.value)),n(1)},className:"form-input-elegant p-1 w-20 bg-white dark:bg-gray-700",children:[g.jsx("option",{value:"6",children:"6"}),g.jsx("option",{value:"9",children:"9"}),g.jsx("option",{value:"12",children:"12"})]}),g.jsxs("span",{className:"mx-2 hidden sm:inline",children:["Hal ",t," dari ",r||1]}),g.jsx("button",{onClick:()=>n(a=>Math.max(1,a-1)),disabled:t===1,className:"p-2 rounded-md hover:bg-black/10 dark:hover:bg-white/10 disabled:opacity-50",children:g.jsx(NP,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>n(a=>Math.min(r,a+1)),disabled:t>=r,className:"p-2 rounded-md hover:bg-black/10 dark:hover:bg-white/10 disabled:opacity-50",children:g.jsx(kP,{className:"w-4 h-4"})})]})};function Bg({title:e,data:t,CardComponent:n,filterOptions:i,...s}){const[r,a]=q.useState(""),[o,u]=q.useState(1),[c,d]=q.useState(6),[m,p]=q.useState(!1),[v,R]=q.useState({}),O=q.useMemo(()=>(t||[]).filter(_=>{if(!Object.values(_).some(x=>String(x).toLowerCase().includes(r.toLowerCase())))return!1;for(const x in v)if(v[x]&&_[x]!==v[x])return!1;return!0}),[t,r,v]),D=q.useMemo(()=>{const _=(o-1)*c;return O.slice(_,_+c)},[O,o,c]),T=_=>{R(_),p(!1)};return g.jsxs("div",{children:[g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[g.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:e}),g.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[g.jsx("input",{type:"text",placeholder:`Cari di ${e}...`,value:r,onChange:_=>a(_.target.value),className:"form-input-elegant w-full max-w-xs"}),i&&g.jsxs("div",{className:"relative",children:[g.jsx("button",{onClick:()=>p(_=>!_),className:"elegant-btn bg-bg-muted text-text-primary hover:bg-border-color p-2.5",children:g.jsx($P,{className:"w-5 h-5"})}),m&&g.jsx(DV,{options:i,onApply:T,onReset:()=>R({})})]})]})]}),g.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:D.length>0?D.map((_,A)=>g.jsx(n,{item:_,index:A,...s},_.id)):g.jsx("div",{className:"lg:col-span-2 xl:col-span-3 text-center p-8 bg-bg-surface/50 rounded-lg border border-border-color text-text-secondary",children:"Tidak ada data yang cocok dengan pencarian atau filter Anda."})}),g.jsx(kV,{data:O,currentPage:o,setCurrentPage:u,rowsPerPage:c,setRowsPerPage:d})]})}function MV({item:e,index:t,onEdit:n}){var i;return(i=e.tanggalSurat)!=null&&i.toDate&&e.tanggalSurat.toDate().toLocaleDateString("id-ID"),g.jsxs("div",{className:"elegant-card flex flex-col justify-between h-full",style:{animationDelay:`${t*50}ms`},children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-start gap-4",children:[g.jsx("h3",{className:"font-bold text-text-primary text-md flex-1",children:e.perihal}),g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("button",{onClick:()=>n(e),className:"p-1 text-text-secondary hover:text-text-primary transition",children:g.jsx(qP,{className:"w-4 h-4"})})})]}),g.jsx("p",{className:"text-sm text-text-secondary mt-2 font-mono",children:e.nomorSurat}),g.jsxs("p",{className:"text-sm text-text-secondary",children:["Tujuan: ",g.jsx("span",{className:"font-medium text-text-primary",children:e.tujuanId})]})]}),g.jsx("div",{className:"mt-4 pt-4 border-t border-border-color text-right",children:g.jsx("a",{href:e.linkDokumen,target:"_blank",rel:"noopener noreferrer",className:"text-accent-color hover:underline font-semibold text-sm transition",children:"Lihat File"})})]})}function PV({data:e,onEdit:t,userInfo:n}){return g.jsx(Bg,{title:"Surat Keluar",data:e,onEdit:t,CardComponent:MV,userInfo:n})}const fw=q.createContext(null),VV=({id:e,message:t,type:n,onRemove:i})=>{const[s,r]=q.useState(!1),a={success:PP,error:vV,info:WP,warning:oV},o={success:"bg-green-accent text-white",error:"bg-red-accent text-white",info:"bg-blue-accent text-white",warning:"bg-yellow-accent text-black"},u=a[n],c=()=>{r(!0),setTimeout(i,300)};return g.jsxs("div",{className:`notification-toast ${o[n]} ${s?"exit":""}`,children:[g.jsx(u,{className:"w-5 h-5 mr-3 flex-shrink-0"}),g.jsx("p",{className:"flex-grow text-sm font-medium",children:t}),g.jsx("button",{onClick:c,className:"ml-4 flex-shrink-0 opacity-70 hover:opacity-100",children:g.jsx(Ra,{className:"w-4 h-4"})})]})},LV=({toasts:e,onRemove:t})=>g.jsx("div",{className:"notification-container",children:e.map(n=>g.jsx(VV,{...n,onRemove:()=>t(n.id)},n.id))}),UV=({children:e})=>{const[t,n]=q.useState([]),i=(a,o="info",u=4e3)=>{const c=Date.now()+Math.random();n(d=>[...d,{id:c,message:a,type:o}]),setTimeout(()=>s(c),u)},s=a=>n(o=>o.filter(u=>u.id!==a)),r=q.useMemo(()=>({show:i}),[]);return g.jsxs(fw.Provider,{value:r,children:[e,g.jsx(LV,{toasts:t,onRemove:s})]})},cr=()=>{const e=q.useContext(fw);if(!e)throw new Error("useNotifier harus digunakan di dalam NotificationProvider");return e},jV={canForwardDisposisi:["pejabat_struktural"]};function pw({item:e,index:t,allData:n,isTugasSaya:i=!1,openModal:s,userInfo:r}){const a=(n.suratMasuk||[]).find(O=>O.id===e.suratMasukId),o=(n.options.jabatan||[]).find(O=>O.id===e.pemberiDisposisiJabatanId),u=(n.options.jabatan||[]).find(O=>O.id===e.tujuanJabatanId),c=cr();if(!a)return g.jsx("div",{className:"elegant-card text-text-secondary",children:"Data sumber surat tidak ditemukan."});const d=async O=>{const D=r.opdId;if(!D)return c.show("ID OPD tidak ditemukan.","error");if(O==="Selesai"){s("laporanSelesai",e);return}const T=Tn(ce,"opds",D,"disposisi",e.id);await Pl(T,{statusTindakLanjut:O}),c.show(`Status berhasil diubah menjadi ${O}`,"success")},m=e.statusTindakLanjut;let p="bg-slate-500",v="10%";m==="Dikerjakan"?(p="bg-blue-accent",v="50%"):m==="Selesai"&&(p="bg-green-accent",v="100%");const R=i&&jV.canForwardDisposisi.includes(r.peran)&&m!=="Selesai";return g.jsxs("div",{className:"elegant-card flex flex-col justify-between h-full",style:{animationDelay:`${t*50}ms`},children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-text-primary text-md",children:a.perihal}),g.jsxs("p",{className:"text-sm text-text-secondary mt-2",children:["Dari: ",g.jsx("span",{className:"font-medium text-text-primary",children:(o==null?void 0:o.namaJabatan)||"N/A"})]}),!i&&g.jsxs("p",{className:"text-sm text-text-secondary",children:["Ke: ",g.jsx("span",{className:"font-medium text-text-primary",children:(u==null?void 0:u.namaJabatan)||"N/A"})]}),g.jsxs("p",{className:"text-sm text-text-primary mt-3 bg-bg-base/50 p-3 rounded-md",children:["Instruksi: ",g.jsx("span",{className:"font-semibold",children:e.isiDisposisi})]}),e.catatan&&g.jsxs("p",{className:"text-sm text-text-secondary italic mt-2",children:["Catatan: ",e.catatan]})]}),g.jsxs("div",{className:"mt-4",children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("span",{className:"text-sm font-medium text-text-primary",children:m}),g.jsx("a",{href:a.linkDokumen,target:"_blank",rel:"noopener noreferrer",className:"text-accent-color hover:underline font-semibold text-sm transition",children:"Lihat File"})]}),g.jsx("div",{className:"w-full bg-bg-base rounded-full h-1.5",children:g.jsx("div",{className:`${p} h-1.5 rounded-full transition-all duration-500`,style:{width:v}})})]}),i&&g.jsxs("div",{className:"mt-4 pt-4 border-t border-border-color text-right space-x-2",children:[m==="Baru"&&g.jsx("button",{onClick:()=>d("Dikerjakan"),className:"elegant-btn text-xs py-1 px-3 bg-blue-600 hover:bg-blue-500",children:"Mulai"}),m==="Dikerjakan"&&g.jsx("button",{onClick:()=>d("Selesai"),className:"elegant-btn text-xs py-1 px-3 bg-green-600 hover:bg-green-500",children:"Selesai"}),R&&g.jsx("button",{onClick:()=>s("teruskanDisposisi",e),className:"elegant-btn text-xs py-1 px-3 bg-purple-600 hover:bg-purple-500",children:"Teruskan"}),m!=="Selesai"&&g.jsx("button",{onClick:()=>s("tindakLanjut",e),className:"elegant-btn text-xs py-1 px-3 bg-gray-600 hover:bg-gray-500",children:"Catat"})]})]})}function zV({data:e,allData:t,openModal:n,userInfo:i}){const s=[{key:"statusTindakLanjut",label:"Status Tindak Lanjut",values:["Baru","Dikerjakan","Selesai"]}];return g.jsx(Bg,{title:"Riwayat Disposisi",data:e,CardComponent:({item:r,index:a})=>g.jsx(pw,{item:r,index:a,allData:t,isTugasSaya:!1,openModal:n,userInfo:i}),filterOptions:s})}function BV({disposisiSaya:e,allData:t,openModal:n,userInfo:i}){const s=[{key:"statusTindakLanjut",label:"Status Tindak Lanjut",values:["Baru","Dikerjakan","Selesai"]}];return g.jsx(Bg,{title:"Tugas Saya",data:e,CardComponent:({item:r,index:a})=>g.jsx(pw,{item:r,index:a,allData:t,isTugasSaya:!0,openModal:n,userInfo:i}),filterOptions:s})}function FV({appData:e,openModal:t}){var i;const n=((i=e.options)==null?void 0:i.opds)||[];return g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Manajemen Unit Kerja"}),g.jsxs("button",{onClick:()=>t("opd"),className:"elegant-btn flex items-center gap-2",children:[g.jsx(LP,{className:"w-5 h-5"}),g.jsx("span",{children:"Tambah Unit Kerja"})]})]}),g.jsx("div",{className:"bg-bg-surface rounded-lg border border-border-color overflow-hidden",children:g.jsxs("table",{className:"w-full text-left",children:[g.jsx("thead",{className:"bg-bg-muted/30",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-4 text-sm font-semibold text-text-secondary",children:"Nama Unit Kerja"}),g.jsx("th",{className:"p-4 text-sm font-semibold text-text-secondary",children:"Jenis"}),g.jsx("th",{className:"p-4 text-sm font-semibold text-text-secondary",children:"Aksi"})]})}),g.jsx("tbody",{children:n.map(s=>g.jsxs("tr",{className:"border-t border-border-color",children:[g.jsx("td",{className:"p-4 font-medium text-text-primary",children:s.nama}),g.jsx("td",{className:"p-4 text-text-secondary",children:s.jenis||"OPD"}),g.jsx("td",{className:"p-4",children:g.jsx("button",{onClick:()=>t("opd",s),className:"text-blue-accent hover:opacity-80 p-1",children:g.jsx(dw,{className:"w-4 h-4"})})})]},s.id))})]})})]})}function rf(e,t){e.split(/\s+/).forEach(n=>{t(n)})}class HV{constructor(){this._events={}}on(t,n){rf(t,i=>{const s=this._events[i]||[];s.push(n),this._events[i]=s})}off(t,n){var i=arguments.length;if(i===0){this._events={};return}rf(t,s=>{if(i===1){delete this._events[s];return}const r=this._events[s];r!==void 0&&(r.splice(r.indexOf(n),1),this._events[s]=r)})}trigger(t,...n){var i=this;rf(t,s=>{const r=i._events[s];r!==void 0&&r.forEach(a=>{a.apply(i,n)})})}}function qV(e){return e.plugins={},class extends e{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,n){e.plugins[t]={name:t,fn:n}}initializePlugins(t){var n,i;const s=this,r=[];if(Array.isArray(t))t.forEach(a=>{typeof a=="string"?r.push(a):(s.plugins.settings[a.name]=a.options,r.push(a.name))});else if(t)for(n in t)t.hasOwnProperty(n)&&(s.plugins.settings[n]=t[n],r.push(n));for(;i=r.shift();)s.require(i)}loadPlugin(t){var n=this,i=n.plugins,s=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=s.fn.apply(n,[n.plugins.settings[t]||{}]),i.names.push(t)}require(t){var n=this,i=n.plugins;if(!n.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');n.loadPlugin(t)}return i.loaded[t]}}}const Vh=e=>(e=e.filter(Boolean),e.length<2?e[0]||"":$V(e)==1?"["+e.join("")+"]":"(?:"+e.join("|")+")"),mw=e=>{if(!GV(e))return e.join("");let t="",n=0;const i=()=>{n>1&&(t+="{"+n+"}")};return e.forEach((s,r)=>{if(s===e[r-1]){n++;return}i(),t+=s,n=1}),i(),t},gw=e=>{let t=Array.from(e);return Vh(t)},GV=e=>new Set(e).size!==e.length,nl=e=>(e+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),$V=e=>e.reduce((t,n)=>Math.max(t,KV(n)),0),KV=e=>Array.from(e).length,_w=e=>{if(e.length===1)return[[e]];let t=[];const n=e.substring(1);return _w(n).forEach(function(s){let r=s.slice(0);r[0]=e.charAt(0)+r[0],t.push(r),r=s.slice(0),r.unshift(e.charAt(0)),t.push(r)}),t},QV=[[0,65535]],YV="[-]";let Kc,yw;const XV=3,Fg={},e1={"/":"",0:"",a:"",aa:"",ae:"",ao:"",au:"",av:"",ay:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",oe:"",oi:"",oo:"",ou:"",p:"",q:"",r:"",s:"",t:"",th:"",tz:"",u:"",v:"",vy:"",w:"",y:"",z:"",hv:""};for(let e in e1){let t=e1[e]||"";for(let n=0;n<t.length;n++){let i=t.substring(n,n+1);Fg[i]=e}}const WV=new RegExp(Object.keys(Fg).join("|")+"|"+YV,"gu"),ZV=e=>{Kc===void 0&&(Kc=n6(e||QV))},n1=(e,t="NFKD")=>e.normalize(t),Qc=e=>Array.from(e).reduce((t,n)=>t+JV(n),""),JV=e=>(e=n1(e).toLowerCase().replace(WV,t=>Fg[t]||""),n1(e,"NFC"));function*t6(e){for(const[t,n]of e)for(let i=t;i<=n;i++){let s=String.fromCharCode(i),r=Qc(s);r!=s.toLowerCase()&&(r.length>XV||r.length!=0&&(yield{folded:r,composed:s,code_point:i}))}}const e6=e=>{const t={},n=(i,s)=>{const r=t[i]||new Set,a=new RegExp("^"+gw(r)+"$","iu");s.match(a)||(r.add(nl(s)),t[i]=r)};for(let i of t6(e))n(i.folded,i.folded),n(i.folded,i.composed);return t},n6=e=>{const t=e6(e),n={};let i=[];for(let r in t){let a=t[r];a&&(n[r]=gw(a)),r.length>1&&i.push(nl(r))}i.sort((r,a)=>a.length-r.length);const s=Vh(i);return yw=new RegExp("^"+s,"u"),n},i6=(e,t=1)=>{let n=0;return e=e.map(i=>(Kc[i]&&(n+=i.length),Kc[i]||i)),n>=t?mw(e):""},s6=(e,t=1)=>(t=Math.max(t,e.length-1),Vh(_w(e).map(n=>i6(n,t)))),i1=(e,t=!0)=>{let n=e.length>1?1:0;return Vh(e.map(i=>{let s=[];const r=t?i.length():i.length()-1;for(let a=0;a<r;a++)s.push(s6(i.substrs[a]||"",n));return mw(s)}))},r6=(e,t)=>{for(const n of t){if(n.start!=e.start||n.end!=e.end||n.substrs.join("")!==e.substrs.join(""))continue;let i=e.parts;const s=a=>{for(const o of i){if(o.start===a.start&&o.substr===a.substr)return!1;if(!(a.length==1||o.length==1)&&(a.start<o.start&&a.end>o.start||o.start<a.start&&o.end>a.start))return!0}return!1};if(!(n.parts.filter(s).length>0))return!0}return!1};class Yc{constructor(){As(this,"parts");As(this,"substrs");As(this,"start");As(this,"end");this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,n){let i=new Yc,s=JSON.parse(JSON.stringify(this.parts)),r=s.pop();for(const u of s)i.add(u);let a=n.substr.substring(0,t-r.start),o=a.length;return i.add({start:r.start,end:r.start+o,length:o,substr:a}),i}}const a6=e=>{ZV(),e=Qc(e);let t="",n=[new Yc];for(let i=0;i<e.length;i++){let r=e.substring(i).match(yw);const a=e.substring(i,i+1),o=r?r[0]:null;let u=[],c=new Set;for(const d of n){const m=d.last();if(!m||m.length==1||m.end<=i)if(o){const p=o.length;d.add({start:i,end:i+p,length:p,substr:o}),c.add("1")}else d.add({start:i,end:i+1,length:1,substr:a}),c.add("2");else if(o){let p=d.clone(i,m);const v=o.length;p.add({start:i,end:i+v,length:v,substr:o}),u.push(p)}else c.add("3")}if(u.length>0){u=u.sort((d,m)=>d.length()-m.length());for(let d of u)r6(d,n)||n.push(d);continue}if(i>0&&c.size==1&&!c.has("3")){t+=i1(n,!1);let d=new Yc;const m=n[0];m&&d.add(m.last()),n=[d]}}return t+=i1(n,!0),t},o6=(e,t)=>{if(e)return e[t]},l6=(e,t)=>{if(e){for(var n,i=t.split(".");(n=i.shift())&&(e=e[n]););return e}},af=(e,t,n)=>{var i,s;return!e||(e=e+"",t.regex==null)||(s=e.search(t.regex),s===-1)?0:(i=t.string.length/e.length,s===0&&(i+=.5),i*n)},of=(e,t)=>{var n=e[t];if(typeof n=="function")return n;n&&!Array.isArray(n)&&(e[t]=[n])},Au=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},u6=(e,t)=>typeof e=="number"&&typeof t=="number"?e>t?1:e<t?-1:0:(e=Qc(e+"").toLowerCase(),t=Qc(t+"").toLowerCase(),e>t?1:t>e?-1:0);class c6{constructor(t,n){As(this,"items");As(this,"settings");this.items=t,this.settings=n||{diacritics:!0}}tokenize(t,n,i){if(!t||!t.length)return[];const s=[],r=t.split(/\s+/);var a;return i&&(a=new RegExp("^("+Object.keys(i).map(nl).join("|")+"):(.*)$")),r.forEach(o=>{let u,c=null,d=null;a&&(u=o.match(a))&&(c=u[1],o=u[2]),o.length>0&&(this.settings.diacritics?d=a6(o)||null:d=nl(o),d&&n&&(d="\\b"+d)),s.push({string:o,regex:d?new RegExp(d,"iu"):null,field:c})}),s}getScoreFunction(t,n){var i=this.prepareSearch(t,n);return this._getScoreFunction(i)}_getScoreFunction(t){const n=t.tokens,i=n.length;if(!i)return function(){return 0};const s=t.options.fields,r=t.weights,a=s.length,o=t.getAttrFn;if(!a)return function(){return 1};const u=function(){return a===1?function(c,d){const m=s[0].field;return af(o(d,m),c,r[m]||1)}:function(c,d){var m=0;if(c.field){const p=o(d,c.field);!c.regex&&p?m+=1/a:m+=af(p,c,1)}else Au(r,(p,v)=>{m+=af(o(d,v),c,p)});return m/a}}();return i===1?function(c){return u(n[0],c)}:t.options.conjunction==="and"?function(c){var d,m=0;for(let p of n){if(d=u(p,c),d<=0)return 0;m+=d}return m/i}:function(c){var d=0;return Au(n,m=>{d+=u(m,c)}),d/i}}getSortFunction(t,n){var i=this.prepareSearch(t,n);return this._getSortFunction(i)}_getSortFunction(t){var n,i=[];const s=this,r=t.options,a=!t.query&&r.sort_empty?r.sort_empty:r.sort;if(typeof a=="function")return a.bind(this);const o=function(c,d){return c==="$score"?d.score:t.getAttrFn(s.items[d.id],c)};if(a)for(let c of a)(t.query||c.field!=="$score")&&i.push(c);if(t.query){n=!0;for(let c of i)if(c.field==="$score"){n=!1;break}n&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(c=>c.field!=="$score");return i.length?function(c,d){var m,p;for(let v of i)if(p=v.field,m=(v.direction==="desc"?-1:1)*u6(o(p,c),o(p,d)),m)return m;return 0}:null}prepareSearch(t,n){const i={};var s=Object.assign({},n);if(of(s,"sort"),of(s,"sort_empty"),s.fields){of(s,"fields");const r=[];s.fields.forEach(a=>{typeof a=="string"&&(a={field:a,weight:1}),r.push(a),i[a.field]="weight"in a?a.weight:1}),s.fields=r}return{options:s,query:t.toLowerCase().trim(),tokens:this.tokenize(t,s.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:s.nesting?l6:o6}}search(t,n){var i=this,s,r;r=this.prepareSearch(t,n),n=r.options,t=r.query;const a=n.score||i._getScoreFunction(r);t.length?Au(i.items,(u,c)=>{s=a(u),(n.filter===!1||s>0)&&r.items.push({score:s,id:c})}):Au(i.items,(u,c)=>{r.items.push({score:1,id:c})});const o=i._getSortFunction(r);return o&&r.items.sort(o),r.total=r.items.length,typeof n.limit=="number"&&(r.items=r.items.slice(0,n.limit)),r}}const mn=e=>typeof e>"u"||e===null?null:Xu(e),Xu=e=>typeof e=="boolean"?e?"1":"0":e+"",lf=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),h6=(e,t)=>t>0?window.setTimeout(e,t):(e.call(null),null),d6=(e,t)=>{var n;return function(i,s){var r=this;n&&(r.loading=Math.max(r.loading-1,0),clearTimeout(n)),n=setTimeout(function(){n=null,r.loadedSearches[i]=!0,e.call(r,i,s)},t)}},s1=(e,t,n)=>{var i,s=e.trigger,r={};e.trigger=function(){var a=arguments[0];if(t.indexOf(a)!==-1)r[a]=arguments;else return s.apply(e,arguments)},n.apply(e,[]),e.trigger=s;for(i of t)i in r&&s.apply(e,r[i])},f6=e=>({start:e.selectionStart||0,length:(e.selectionEnd||0)-(e.selectionStart||0)}),kt=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},we=(e,t,n,i)=>{e.addEventListener(t,n,i)},ws=(e,t)=>{if(!t||!t[e])return!1;var n=(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0);return n===1},uf=(e,t)=>{const n=e.getAttribute("id");return n||(e.setAttribute("id",t),t)},r1=e=>e.replace(/[\\"']/g,"\\$&"),Rs=(e,t)=>{t&&e.append(t)},re=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},wn=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(vw(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},vw=e=>typeof e=="string"&&e.indexOf("<")>-1,p6=e=>e.replace(/['"\\]/g,"\\$&"),cf=(e,t)=>{var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!1),e.dispatchEvent(n)},Su=(e,t)=>{Object.assign(e.style,t)},qe=(e,...t)=>{var n=Ew(t);e=Tw(e),e.map(i=>{n.map(s=>{i.classList.add(s)})})},wi=(e,...t)=>{var n=Ew(t);e=Tw(e),e.map(i=>{n.map(s=>{i.classList.remove(s)})})},Ew=e=>{var t=[];return re(e,n=>{typeof n=="string"&&(n=n.trim().split(/[\t\n\f\r\s]/)),Array.isArray(n)&&(t=t.concat(n))}),t.filter(Boolean)},Tw=e=>(Array.isArray(e)||(e=[e]),e),hf=(e,t,n)=>{if(!(n&&!n.contains(e)))for(;e&&e.matches;){if(e.matches(t))return e;e=e.parentNode}},a1=(e,t=0)=>t>0?e[e.length-1]:e[0],m6=e=>Object.keys(e).length===0,o1=(e,t)=>{if(!e)return-1;t=t||e.nodeName;for(var n=0;e=e.previousElementSibling;)e.matches(t)&&n++;return n},Rt=(e,t)=>{re(t,(n,i)=>{n==null?e.removeAttribute(i):e.setAttribute(i,""+n)})},Pp=(e,t)=>{e.parentNode&&e.parentNode.replaceChild(t,e)},g6=(e,t)=>{if(t===null)return;if(typeof t=="string"){if(!t.length)return;t=new RegExp(t,"i")}const n=r=>{var a=r.data.match(t);if(a&&r.data.length>0){var o=document.createElement("span");o.className="highlight";var u=r.splitText(a.index);u.splitText(a[0].length);var c=u.cloneNode(!0);return o.appendChild(c),Pp(u,o),1}return 0},i=r=>{r.nodeType===1&&r.childNodes&&!/(script|style)/i.test(r.tagName)&&(r.className!=="highlight"||r.tagName!=="SPAN")&&Array.from(r.childNodes).forEach(a=>{s(a)})},s=r=>r.nodeType===3?n(r):(i(r),0);s(e)},_6=e=>{var t=e.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,function(n){var i=n.parentNode;i.replaceChild(n.firstChild,n),i.normalize()})},y6=65,v6=13,E6=27,T6=37,b6=38,A6=39,S6=40,l1=8,w6=46,u1=9,R6=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),wu=R6?"metaKey":"ctrlKey",c1={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(e){return e.length>0},render:{}};function h1(e,t){var n=Object.assign({},c1,t),i=n.dataAttr,s=n.labelField,r=n.valueField,a=n.disabledField,o=n.optgroupField,u=n.optgroupLabelField,c=n.optgroupValueField,d=e.tagName.toLowerCase(),m=e.getAttribute("placeholder")||e.getAttribute("data-placeholder");if(!m&&!n.allowEmptyOption){let O=e.querySelector('option[value=""]');O&&(m=O.textContent)}var p={placeholder:m,options:[],optgroups:[],items:[],maxItems:null},v=()=>{var O,D=p.options,T={},_=1;let A=0;var x=b=>{var y=Object.assign({},b.dataset),S=i&&y[i];return typeof S=="string"&&S.length&&(y=Object.assign(y,JSON.parse(S))),y},M=(b,y)=>{var S=mn(b.value);if(S!=null&&!(!S&&!n.allowEmptyOption)){if(T.hasOwnProperty(S)){if(y){var w=T[S][o];w?Array.isArray(w)?w.push(y):T[S][o]=[w,y]:T[S][o]=y}}else{var I=x(b);I[s]=I[s]||b.textContent,I[r]=I[r]||S,I[a]=I[a]||b.disabled,I[o]=I[o]||y,I.$option=b,I.$order=I.$order||++A,T[S]=I,D.push(I)}b.selected&&p.items.push(S)}},V=b=>{var y,S;S=x(b),S[u]=S[u]||b.getAttribute("label")||"",S[c]=S[c]||_++,S[a]=S[a]||b.disabled,S.$order=S.$order||++A,p.optgroups.push(S),y=S[c],re(b.children,w=>{M(w,y)})};p.maxItems=e.hasAttribute("multiple")?null:1,re(e.children,b=>{O=b.tagName.toLowerCase(),O==="optgroup"?V(b):O==="option"&&M(b)})},R=()=>{const O=e.getAttribute(i);if(O)p.options=JSON.parse(O),re(p.options,T=>{p.items.push(T[r])});else{var D=e.value.trim()||"";if(!n.allowEmptyOption&&!D.length)return;const T=D.split(n.delimiter);re(T,_=>{const A={};A[s]=_,A[r]=_,p.options.push(A)}),p.items=T}};return d==="select"?v():R(),Object.assign({},c1,p,t)}var d1=0;class xe extends qV(HV){constructor(t,n){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,d1++;var i,s=wn(t);if(s.tomselect)throw new Error("Tom Select already initialized on this element");s.tomselect=this;var r=window.getComputedStyle&&window.getComputedStyle(s,null);i=r.getPropertyValue("direction");const a=h1(s,n);this.settings=a,this.input=s,this.tabIndex=s.tabIndex||0,this.is_select_tag=s.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=uf(s,"tomselect-"+d1),this.isRequired=s.required,this.sifter=new c6(this.options,{diacritics:a.diacritics}),a.mode=a.mode||(a.maxItems===1?"single":"multi"),typeof a.hideSelected!="boolean"&&(a.hideSelected=a.mode==="multi"),typeof a.hidePlaceholder!="boolean"&&(a.hidePlaceholder=a.mode!=="multi");var o=a.createFilter;typeof o!="function"&&(typeof o=="string"&&(o=new RegExp(o)),o instanceof RegExp?a.createFilter=D=>o.test(D):a.createFilter=D=>this.settings.duplicates||!this.options[D]),this.initializePlugins(a.plugins),this.setupCallbacks(),this.setupTemplates();const u=wn("<div>"),c=wn("<div>"),d=this._render("dropdown"),m=wn('<div role="listbox" tabindex="-1">'),p=this.input.getAttribute("class")||"",v=a.mode;var R;if(qe(u,a.wrapperClass,p,v),qe(c,a.controlClass),Rs(u,c),qe(d,a.dropdownClass,v),a.copyClassesToDropdown&&qe(d,p),qe(m,a.dropdownContentClass),Rs(d,m),wn(a.dropdownParent||u).appendChild(d),vw(a.controlInput)){R=wn(a.controlInput);var O=["autocorrect","autocapitalize","autocomplete","spellcheck"];re(O,D=>{s.getAttribute(D)&&Rt(R,{[D]:s.getAttribute(D)})}),R.tabIndex=-1,c.appendChild(R),this.focus_node=R}else a.controlInput?(R=wn(a.controlInput),this.focus_node=R):(R=wn("<input/>"),this.focus_node=c);this.wrapper=u,this.dropdown=d,this.dropdown_content=m,this.control=c,this.control_input=R,this.setup()}setup(){const t=this,n=t.settings,i=t.control_input,s=t.dropdown,r=t.dropdown_content,a=t.wrapper,o=t.control,u=t.input,c=t.focus_node,d={passive:!0},m=t.inputId+"-ts-dropdown";Rt(r,{id:m}),Rt(c,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":m});const p=uf(c,t.inputId+"-ts-control"),v="label[for='"+p6(t.inputId)+"']",R=document.querySelector(v),O=t.focus.bind(t);if(R){we(R,"click",O),Rt(R,{for:p});const _=uf(R,t.inputId+"-ts-label");Rt(c,{"aria-labelledby":_}),Rt(r,{"aria-labelledby":_})}if(a.style.width=u.style.width,t.plugins.names.length){const _="plugin-"+t.plugins.names.join(" plugin-");qe([a,s],_)}(n.maxItems===null||n.maxItems>1)&&t.is_select_tag&&Rt(u,{multiple:"multiple"}),n.placeholder&&Rt(i,{placeholder:n.placeholder}),!n.splitOn&&n.delimiter&&(n.splitOn=new RegExp("\\s*"+nl(n.delimiter)+"+\\s*")),n.load&&n.loadThrottle&&(n.load=d6(n.load,n.loadThrottle)),we(s,"mousemove",()=>{t.ignoreHover=!1}),we(s,"mouseenter",_=>{var A=hf(_.target,"[data-selectable]",s);A&&t.onOptionHover(_,A)},{capture:!0}),we(s,"click",_=>{const A=hf(_.target,"[data-selectable]");A&&(t.onOptionSelect(_,A),kt(_,!0))}),we(o,"click",_=>{var A=hf(_.target,"[data-ts-item]",o);if(A&&t.onItemSelect(_,A)){kt(_,!0);return}i.value==""&&(t.onClick(),kt(_,!0))}),we(c,"keydown",_=>t.onKeyDown(_)),we(i,"keypress",_=>t.onKeyPress(_)),we(i,"input",_=>t.onInput(_)),we(c,"blur",_=>t.onBlur(_)),we(c,"focus",_=>t.onFocus(_)),we(i,"paste",_=>t.onPaste(_));const D=_=>{const A=_.composedPath()[0];if(!a.contains(A)&&!s.contains(A)){t.isFocused&&t.blur(),t.inputState();return}A==i&&t.isOpen?_.stopPropagation():kt(_,!0)},T=()=>{t.isOpen&&t.positionDropdown()};we(document,"mousedown",D),we(window,"scroll",T,d),we(window,"resize",T,d),this._destroy=()=>{document.removeEventListener("mousedown",D),window.removeEventListener("scroll",T),window.removeEventListener("resize",T),R&&R.removeEventListener("click",O)},this.revertSettings={innerHTML:u.innerHTML,tabIndex:u.tabIndex},u.tabIndex=-1,u.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),n.items=[],delete n.optgroups,delete n.options,we(u,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,u.disabled?t.disable():u.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),qe(u,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),n.preload===!0&&t.preload()}setupOptions(t=[],n=[]){this.addOptions(t),re(n,i=>{this.registerOptionGroup(i)})}setupTemplates(){var t=this,n=t.settings.labelField,i=t.settings.optgroupLabelField,s={optgroup:r=>{let a=document.createElement("div");return a.className="optgroup",a.appendChild(r.options),a},optgroup_header:(r,a)=>'<div class="optgroup-header">'+a(r[i])+"</div>",option:(r,a)=>"<div>"+a(r[n])+"</div>",item:(r,a)=>"<div>"+a(r[n])+"</div>",option_create:(r,a)=>'<div class="create">Add <strong>'+a(r.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},s,t.settings.render)}setupCallbacks(){var t,n,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)n=this.settings[i[t]],n&&this.on(t,n)}sync(t=!0){const n=this,i=t?h1(n.input,{delimiter:n.settings.delimiter}):n.settings;n.setupOptions(i.options,i.optgroups),n.setValue(i.items||[],!0),n.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0){t.clearActiveItems(),t.focus();return}t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){cf(this.input,"input"),cf(this.input,"change")}onPaste(t){var n=this;if(n.isInputHidden||n.isLocked){kt(t);return}n.settings.splitOn&&setTimeout(()=>{var i=n.inputValue();if(i.match(n.settings.splitOn)){var s=i.trim().split(n.settings.splitOn);re(s,r=>{mn(r)&&(this.options[r]?n.addItem(r):n.createItem(r))})}},0)}onKeyPress(t){var n=this;if(n.isLocked){kt(t);return}var i=String.fromCharCode(t.keyCode||t.which);if(n.settings.create&&n.settings.mode==="multi"&&i===n.settings.delimiter){n.createItem(),kt(t);return}}onKeyDown(t){var n=this;if(n.ignoreHover=!0,n.isLocked){t.keyCode!==u1&&kt(t);return}switch(t.keyCode){case y6:if(ws(wu,t)&&n.control_input.value==""){kt(t),n.selectAll();return}break;case E6:n.isOpen&&(kt(t,!0),n.close()),n.clearActiveItems();return;case S6:if(!n.isOpen&&n.hasOptions)n.open();else if(n.activeOption){let i=n.getAdjacent(n.activeOption,1);i&&n.setActiveOption(i)}kt(t);return;case b6:if(n.activeOption){let i=n.getAdjacent(n.activeOption,-1);i&&n.setActiveOption(i)}kt(t);return;case v6:n.canSelect(n.activeOption)?(n.onOptionSelect(t,n.activeOption),kt(t)):(n.settings.create&&n.createItem()||document.activeElement==n.control_input&&n.isOpen)&&kt(t);return;case T6:n.advanceSelection(-1,t);return;case A6:n.advanceSelection(1,t);return;case u1:n.settings.selectOnTab&&(n.canSelect(n.activeOption)&&(n.onOptionSelect(t,n.activeOption),kt(t)),n.settings.create&&n.createItem()&&kt(t));return;case l1:case w6:n.deleteSelection(t);return}n.isInputHidden&&!ws(wu,t)&&kt(t)}onInput(t){if(this.isLocked)return;const n=this.inputValue();if(this.lastValue!==n){if(this.lastValue=n,n==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=h6(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,n){this.ignoreHover||this.setActiveOption(n,!1)}onFocus(t){var n=this,i=n.isFocused;if(n.isDisabled||n.isReadOnly){n.blur(),kt(t);return}n.ignoreFocus||(n.isFocused=!0,n.settings.preload==="focus"&&n.preload(),i||n.trigger("focus"),n.activeItems.length||(n.inputState(),n.refreshOptions(!!n.settings.openOnFocus)),n.refreshState())}onBlur(t){if(document.hasFocus()!==!1){var n=this;if(n.isFocused){n.isFocused=!1,n.ignoreFocus=!1;var i=()=>{n.close(),n.setActiveItem(),n.setCaret(n.items.length),n.trigger("blur")};n.settings.create&&n.settings.createOnBlur?n.createItem(null,i):i()}}}onOptionSelect(t,n){var i,s=this;n.parentElement&&n.parentElement.matches("[data-disabled]")||(n.classList.contains("create")?s.createItem(null,()=>{s.settings.closeAfterSelect&&s.close()}):(i=n.dataset.value,typeof i<"u"&&(s.lastQuery=null,s.addItem(i),s.settings.closeAfterSelect&&s.close(),!s.settings.hideSelected&&t.type&&/click/.test(t.type)&&s.setActiveOption(n))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,n){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(kt(t),i.setActiveItem(n,t),!0):!1}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){const n=this;if(!n.canLoad(t))return;qe(n.wrapper,n.settings.loadingClass),n.loading++;const i=n.loadCallback.bind(n);n.settings.load.call(n,t,i)}loadCallback(t,n){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,n),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||wi(i.wrapper,i.settings.loadingClass),i.trigger("load",t,n)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var n=this.control_input,i=n.value!==t;i&&(n.value=t,cf(n,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,n){var i=n?[]:["change"];s1(this,i,()=>{this.clear(n),this.addItems(t,n)})}setMaxItems(t){t===0&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,n){var i=this,s,r,a,o,u,c;if(i.settings.mode!=="single"){if(!t){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(s=n&&n.type.toLowerCase(),s==="click"&&ws("shiftKey",n)&&i.activeItems.length){for(c=i.getLastActive(),a=Array.prototype.indexOf.call(i.control.children,c),o=Array.prototype.indexOf.call(i.control.children,t),a>o&&(u=a,a=o,o=u),r=a;r<=o;r++)t=i.control.children[r],i.activeItems.indexOf(t)===-1&&i.setActiveItemClass(t);kt(n)}else s==="click"&&ws(wu,n)||s==="keydown"&&ws("shiftKey",n)?t.classList.contains("active")?i.removeActiveItem(t):i.setActiveItemClass(t):(i.clearActiveItems(),i.setActiveItemClass(t));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(t){const n=this,i=n.control.querySelector(".last-active");i&&wi(i,"last-active"),qe(t,"active last-active"),n.trigger("item_select",t),n.activeItems.indexOf(t)==-1&&n.activeItems.push(t)}removeActiveItem(t){var n=this.activeItems.indexOf(t);this.activeItems.splice(n,1),wi(t,"active")}clearActiveItems(){wi(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,n=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,Rt(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),Rt(t,{"aria-selected":"true"}),qe(t,"active"),n&&this.scrollToOption(t)))}scrollToOption(t,n){if(!t)return;const i=this.dropdown_content,s=i.clientHeight,r=i.scrollTop||0,a=t.offsetHeight,o=t.getBoundingClientRect().top-i.getBoundingClientRect().top+r;o+a>s+r?this.scroll(o-s+a,n):o<r&&this.scroll(o,n)}scroll(t,n){const i=this.dropdown_content;n&&(i.style.scrollBehavior=n),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(wi(this.activeOption,"active"),Rt(this.activeOption,{"aria-selected":null})),this.activeOption=null,Rt(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if(t.settings.mode==="single")return;const n=t.controlChildren();n.length&&(t.inputState(),t.close(),t.activeItems=n,re(n,i=>{t.setActiveItemClass(i)}))}inputState(){var t=this;t.control.contains(t.control_input)&&(Rt(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&Rt(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,n=t.sortField;return typeof t.sortField=="string"&&(n=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:n,nesting:t.nesting}}search(t){var n,i,s=this,r=this.getSearchOptions();if(s.settings.score&&(i=s.settings.score.call(s,t),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==s.lastQuery?(s.lastQuery=t,n=s.sifter.search(t,Object.assign(r,{score:i})),s.currentResults=n):n=Object.assign({},s.currentResults),s.settings.hideSelected&&(n.items=n.items.filter(a=>{let o=mn(a.id);return!(o&&s.items.indexOf(o)!==-1)})),n}refreshOptions(t=!0){var n,i,s,r,a,o,u,c,d,m;const p={},v=[];var R=this,O=R.inputValue();const D=O===R.lastQuery||O==""&&R.lastQuery==null;var T=R.search(O),_=null,A=R.settings.shouldOpen||!1,x=R.dropdown_content;D&&(_=R.activeOption,_&&(d=_.closest("[data-group]"))),r=T.items.length,typeof R.settings.maxOptions=="number"&&(r=Math.min(r,R.settings.maxOptions)),r>0&&(A=!0);const M=(b,y)=>{let S=p[b];if(S!==void 0){let I=v[S];if(I!==void 0)return[S,I.fragment]}let w=document.createDocumentFragment();return S=v.length,v.push({fragment:w,order:y,optgroup:b}),[S,w]};for(n=0;n<r;n++){let b=T.items[n];if(!b)continue;let y=b.id,S=R.options[y];if(S===void 0)continue;let w=Xu(y),I=R.getOption(w,!0);for(R.settings.hideSelected||I.classList.toggle("selected",R.items.includes(w)),a=S[R.settings.optgroupField]||"",o=Array.isArray(a)?a:[a],i=0,s=o&&o.length;i<s;i++){a=o[i];let N=S.$order,C=R.optgroups[a];C===void 0?a="":N=C.$order;const[je,fn]=M(a,N);i>0&&(I=I.cloneNode(!0),Rt(I,{id:S.$id+"-clone-"+i,"aria-selected":null}),I.classList.add("ts-cloned"),wi(I,"active"),R.activeOption&&R.activeOption.dataset.value==y&&d&&d.dataset.group===a.toString()&&(_=I)),fn.appendChild(I),a!=""&&(p[a]=je)}}R.settings.lockOptgroupOrder&&v.sort((b,y)=>b.order-y.order),u=document.createDocumentFragment(),re(v,b=>{let y=b.fragment,S=b.optgroup;if(!y||!y.children.length)return;let w=R.optgroups[S];if(w!==void 0){let I=document.createDocumentFragment(),N=R.render("optgroup_header",w);Rs(I,N),Rs(I,y);let C=R.render("optgroup",{group:w,options:I});Rs(u,C)}else Rs(u,y)}),x.innerHTML="",Rs(x,u),R.settings.highlight&&(_6(x),T.query.length&&T.tokens.length&&re(T.tokens,b=>{g6(x,b.regex)}));var V=b=>{let y=R.render(b,{input:O});return y&&(A=!0,x.insertBefore(y,x.firstChild)),y};if(R.loading?V("loading"):R.settings.shouldLoad.call(R,O)?T.items.length===0&&V("no_results"):V("not_loading"),c=R.canCreate(O),c&&(m=V("option_create")),R.hasOptions=T.items.length>0||c,A){if(T.items.length>0){if(!_&&R.settings.mode==="single"&&R.items[0]!=null&&(_=R.getOption(R.items[0])),!x.contains(_)){let b=0;m&&!R.settings.addPrecedence&&(b=1),_=R.selectable()[b]}}else m&&(_=m);t&&!R.isOpen&&(R.open(),R.scrollToOption(_,"auto")),R.setActiveOption(_)}else R.clearActiveOption(),t&&R.isOpen&&R.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,n=!1){const i=this;if(Array.isArray(t))return i.addOptions(t,n),!1;const s=mn(t[i.settings.valueField]);return s===null||i.options.hasOwnProperty(s)?!1:(t.$order=t.$order||++i.order,t.$id=i.inputId+"-opt-"+t.$order,i.options[s]=t,i.lastQuery=null,n&&(i.userOptions[s]=n,i.trigger("option_add",s,t)),s)}addOptions(t,n=!1){re(t,i=>{this.addOption(i,n)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var n=mn(t[this.settings.optgroupValueField]);return n===null?!1:(t.$order=t.$order||++this.order,this.optgroups[n]=t,n)}addOptionGroup(t,n){var i;n[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(n))&&this.trigger("optgroup_add",i,n)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,n){const i=this;var s,r;const a=mn(t),o=mn(n[i.settings.valueField]);if(a===null)return;const u=i.options[a];if(u==null)return;if(typeof o!="string")throw new Error("Value must be set in option data");const c=i.getOption(a),d=i.getItem(a);if(n.$order=n.$order||u.$order,delete i.options[a],i.uncacheValue(o),i.options[o]=n,c){if(i.dropdown_content.contains(c)){const m=i._render("option",n);Pp(c,m),i.activeOption===c&&i.setActiveOption(m)}c.remove()}d&&(r=i.items.indexOf(a),r!==-1&&i.items.splice(r,1,o),s=i._render("item",n),d.classList.contains("active")&&qe(s,"active"),Pp(d,s)),i.lastQuery=null}removeOption(t,n){const i=this;t=Xu(t),i.uncacheValue(t),delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,n)}clearOptions(t){const n=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const i={};re(this.options,(s,r)=>{n(s,r)&&(i[r]=s)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,n){return this.items.indexOf(n)>=0}getOption(t,n=!1){const i=mn(t);if(i===null)return null;const s=this.options[i];if(s!=null){if(s.$div)return s.$div;if(n)return this._render("option",s)}return null}getAdjacent(t,n,i="option"){var s=this,r;if(!t)return null;i=="item"?r=s.controlChildren():r=s.dropdown_content.querySelectorAll("[data-selectable]");for(let a=0;a<r.length;a++)if(r[a]==t)return n>0?r[a+1]:r[a-1];return null}getItem(t){if(typeof t=="object")return t;var n=mn(t);return n!==null?this.control.querySelector(`[data-value="${r1(n)}"]`):null}addItems(t,n){var i=this,s=Array.isArray(t)?t:[t];s=s.filter(a=>i.items.indexOf(a)===-1);const r=s[s.length-1];s.forEach(a=>{i.isPending=a!==r,i.addItem(a,n)})}addItem(t,n){var i=n?[]:["change","dropdown_close"];s1(this,i,()=>{var s,r;const a=this,o=a.settings.mode,u=mn(t);if(!(u&&a.items.indexOf(u)!==-1&&(o==="single"&&a.close(),o==="single"||!a.settings.duplicates))&&!(u===null||!a.options.hasOwnProperty(u))&&(o==="single"&&a.clear(n),!(o==="multi"&&a.isFull()))){if(s=a._render("item",a.options[u]),a.control.contains(s)&&(s=s.cloneNode(!0)),r=a.isFull(),a.items.splice(a.caretPos,0,u),a.insertAtCaret(s),a.isSetup){if(!a.isPending&&a.settings.hideSelected){let c=a.getOption(u),d=a.getAdjacent(c,1);d&&a.setActiveOption(d)}!a.isPending&&!a.settings.closeAfterSelect&&a.refreshOptions(a.isFocused&&o!=="single"),a.settings.closeAfterSelect!=!1&&a.isFull()?a.close():a.isPending||a.positionDropdown(),a.trigger("item_add",u,s),a.isPending||a.updateOriginalInput({silent:n})}(!a.isPending||!r&&a.isFull())&&(a.inputState(),a.refreshState())}})}removeItem(t=null,n){const i=this;if(t=i.getItem(t),!t)return;var s,r;const a=t.dataset.value;s=o1(t),t.remove(),t.classList.contains("active")&&(r=i.activeItems.indexOf(t),i.activeItems.splice(r,1),wi(t,"active")),i.items.splice(s,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(a)&&i.removeOption(a,n),s<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:n}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",a,t)}createItem(t=null,n=()=>{}){arguments.length===3&&(n=arguments[2]),typeof n!="function"&&(n=()=>{});var i=this,s=i.caretPos,r;if(t=t||i.inputValue(),!i.canCreate(t))return n(),!1;i.lock();var a=!1,o=u=>{if(i.unlock(),!u||typeof u!="object")return n();var c=mn(u[i.settings.valueField]);if(typeof c!="string")return n();i.setTextboxValue(),i.addOption(u,!0),i.setCaret(s),i.addItem(c),n(u),a=!0};return typeof i.settings.create=="function"?r=i.settings.create.call(this,t,o):r={[i.settings.labelField]:t,[i.settings.valueField]:t},a||o(r),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const n=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const s=t.wrapper.classList;s.toggle("focus",t.isFocused),s.toggle("disabled",t.isDisabled),s.toggle("readonly",t.isReadOnly),s.toggle("required",t.isRequired),s.toggle("invalid",!t.isValid),s.toggle("locked",i),s.toggle("full",n),s.toggle("input-active",t.isFocused&&!t.isInputHidden),s.toggle("dropdown-active",t.isOpen),s.toggle("has-options",m6(t.options)),s.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const n=this;var i,s;const r=n.input.querySelector('option[value=""]');if(n.is_select_tag){let c=function(d,m,p){return d||(d=wn('<option value="'+lf(m)+'">'+lf(p)+"</option>")),d!=r&&n.input.append(d),o.push(d),(d!=r||u>0)&&(d.selected=!0),d};var a=c;const o=[],u=n.input.querySelectorAll("option:checked").length;n.input.querySelectorAll("option:checked").forEach(d=>{d.selected=!1}),n.items.length==0&&n.settings.mode=="single"?c(r,"",""):n.items.forEach(d=>{if(i=n.options[d],s=i[n.settings.labelField]||"",o.includes(i.$option)){const m=n.input.querySelector(`option[value="${r1(d)}"]:not(:checked)`);c(m,d,s)}else i.$option=c(i.$option,d,s)})}else n.input.value=n.getValue();n.isSetup&&(t.silent||n.trigger("change",n.getValue()))}open(){var t=this;t.isLocked||t.isOpen||t.settings.mode==="multi"&&t.isFull()||(t.isOpen=!0,Rt(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),Su(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),Su(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var n=this,i=n.isOpen;t&&(n.setTextboxValue(),n.settings.mode==="single"&&n.items.length&&n.inputState()),n.isOpen=!1,Rt(n.focus_node,{"aria-expanded":"false"}),Su(n.dropdown,{display:"none"}),n.settings.hideSelected&&n.clearActiveOption(),n.refreshState(),i&&n.trigger("dropdown_close",n.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var t=this.control,n=t.getBoundingClientRect(),i=t.offsetHeight+n.top+window.scrollY,s=n.left+window.scrollX;Su(this.dropdown,{width:n.width+"px",top:i+"px",left:s+"px"})}}clear(t){var n=this;if(n.items.length){var i=n.controlChildren();re(i,s=>{n.removeItem(s,!0)}),n.inputState(),t||n.updateOriginalInput(),n.trigger("clear")}}insertAtCaret(t){const n=this,i=n.caretPos,s=n.control;s.insertBefore(t,s.children[i]||null),n.setCaret(i+1)}deleteSelection(t){var n,i,s,r,a=this;n=t&&t.keyCode===l1?-1:1,i=f6(a.control_input);const o=[];if(a.activeItems.length)r=a1(a.activeItems,n),s=o1(r),n>0&&s++,re(a.activeItems,u=>o.push(u));else if((a.isFocused||a.settings.mode==="single")&&a.items.length){const u=a.controlChildren();let c;n<0&&i.start===0&&i.length===0?c=u[a.caretPos-1]:n>0&&i.start===a.inputValue().length&&(c=u[a.caretPos]),c!==void 0&&o.push(c)}if(!a.shouldDelete(o,t))return!1;for(kt(t,!0),typeof s<"u"&&a.setCaret(s);o.length;)a.removeItem(o.pop());return a.inputState(),a.positionDropdown(),a.refreshOptions(!1),!0}shouldDelete(t,n){const i=t.map(s=>s.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,n)===!1)}advanceSelection(t,n){var i,s,r=this;r.rtl&&(t*=-1),!r.inputValue().length&&(ws(wu,n)||ws("shiftKey",n)?(i=r.getLastActive(t),i?i.classList.contains("active")?s=r.getAdjacent(i,t,"item"):s=i:t>0?s=r.control_input.nextElementSibling:s=r.control_input.previousElementSibling,s&&(s.classList.contains("active")&&r.removeActiveItem(i),r.setActiveItemClass(s))):r.moveCaret(t))}moveCaret(t){}getLastActive(t){let n=this.control.querySelector(".last-active");if(n)return n;var i=this.control.querySelectorAll(".active");if(i)return a1(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,n=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=n.innerHTML,t.input.tabIndex=n.tabIndex,wi(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,n){var i,s;const r=this;if(typeof this.settings.render[t]!="function"||(s=r.settings.render[t].call(this,n,lf),!s))return null;if(s=wn(s),t==="option"||t==="option_create"?n[r.settings.disabledField]?Rt(s,{"aria-disabled":"true"}):Rt(s,{"data-selectable":""}):t==="optgroup"&&(i=n.group[r.settings.optgroupValueField],Rt(s,{"data-group":i}),n.group[r.settings.disabledField]&&Rt(s,{"data-disabled":""})),t==="option"||t==="item"){const a=Xu(n[r.settings.valueField]);Rt(s,{"data-value":a}),t==="item"?(qe(s,r.settings.itemClass),Rt(s,{"data-ts-item":""})):(qe(s,r.settings.optionClass),Rt(s,{role:"option",id:n.$id}),n.$div=s,r.options[a]=n)}return s}_render(t,n){const i=this.render(t,n);if(i==null)throw"HTMLElement expected";return i}clearCache(){re(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){const n=this.getOption(t);n&&n.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,n,i){var s=this,r=s[n];s[n]=function(){var a,o;return t==="after"&&(a=r.apply(s,arguments)),o=i.apply(s,arguments),t==="instead"?o:(t==="before"&&(a=r.apply(s,arguments)),a)}}}const I6=(e,t,n,i)=>{e.addEventListener(t,n,i)};function C6(){I6(this.input,"change",()=>{this.sync()})}const x6=e=>typeof e>"u"||e===null?null:O6(e),O6=e=>typeof e=="boolean"?e?"1":"0":e+"",f1=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},N6=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(D6(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},D6=e=>typeof e=="string"&&e.indexOf("<")>-1;function k6(e){var t=this,n=t.onOptionSelect;t.settings.hideSelected=!1;const i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},e);var s=function(o,u){u?(o.checked=!0,i.uncheckedClassNames&&o.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&o.classList.add(...i.checkedClassNames)):(o.checked=!1,i.checkedClassNames&&o.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&o.classList.add(...i.uncheckedClassNames))},r=function(o){setTimeout(()=>{var u=o.querySelector("input."+i.className);u instanceof HTMLInputElement&&s(u,o.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var a=t.settings.render.option;t.settings.render.option=(o,u)=>{var c=N6(a.call(t,o,u)),d=document.createElement("input");i.className&&d.classList.add(i.className),d.addEventListener("click",function(p){f1(p)}),d.type="checkbox";const m=x6(o[t.settings.valueField]);return s(d,!!(m&&t.items.indexOf(m)>-1)),c.prepend(d),c}}),t.on("item_remove",a=>{var o=t.getOption(a);o&&(o.classList.remove("selected"),r(o))}),t.on("item_add",a=>{var o=t.getOption(a);o&&r(o)}),t.hook("instead","onOptionSelect",(a,o)=>{if(o.classList.contains("selected")){o.classList.remove("selected"),t.removeItem(o.dataset.value),t.refreshOptions(),f1(a,!0);return}n.call(t,a,o),r(o)})}const M6=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(P6(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},P6=e=>typeof e=="string"&&e.indexOf("<")>-1;function V6(e){const t=this,n=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},e);t.on("initialize",()=>{var i=M6(n.html(n));i.addEventListener("click",s=>{t.isLocked||(t.clear(),t.settings.mode==="single"&&t.settings.allowEmptyOption&&t.addItem(""),s.preventDefault(),s.stopPropagation())}),t.control.appendChild(i)})}const L6=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},yr=(e,t,n,i)=>{e.addEventListener(t,n,i)},U6=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},j6=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(z6(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},z6=e=>typeof e=="string"&&e.indexOf("<")>-1,B6=(e,t)=>{U6(t,(n,i)=>{n==null?e.removeAttribute(i):e.setAttribute(i,""+n)})},F6=(e,t)=>{var n;(n=e.parentNode)==null||n.insertBefore(t,e.nextSibling)},H6=(e,t)=>{var n;(n=e.parentNode)==null||n.insertBefore(t,e)},q6=(e,t)=>{do{var n;if(t=(n=t)==null?void 0:n.previousElementSibling,e==t)return!0}while(t&&t.previousElementSibling);return!1};function G6(){var e=this;if(e.settings.mode!=="multi")return;var t=e.lock,n=e.unlock;let i=!0,s;e.hook("after","setupTemplates",()=>{var r=e.settings.render.item;e.settings.render.item=(a,o)=>{const u=j6(r.call(e,a,o));B6(u,{draggable:"true"});const c=O=>{i||L6(O),O.stopPropagation()},d=O=>{s=u,setTimeout(()=>{u.classList.add("ts-dragging")},0)},m=O=>{O.preventDefault(),u.classList.add("ts-drag-over"),v(u,s)},p=()=>{u.classList.remove("ts-drag-over")},v=(O,D)=>{D!==void 0&&(q6(D,u)?F6(O,D):H6(O,D))},R=()=>{var O;document.querySelectorAll(".ts-drag-over").forEach(T=>T.classList.remove("ts-drag-over")),(O=s)==null||O.classList.remove("ts-dragging"),s=void 0;var D=[];e.control.querySelectorAll("[data-value]").forEach(T=>{if(T.dataset.value){let _=T.dataset.value;_&&D.push(_)}}),e.setValue(D)};return yr(u,"mousedown",c),yr(u,"dragstart",d),yr(u,"dragenter",m),yr(u,"dragover",m),yr(u,"dragleave",p),yr(u,"dragend",R),u}}),e.hook("instead","lock",()=>(i=!1,t.call(e))),e.hook("instead","unlock",()=>(i=!0,n.call(e)))}const $6=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},K6=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(Q6(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},Q6=e=>typeof e=="string"&&e.indexOf("<")>-1;function Y6(e){const t=this,n=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},e);t.on("initialize",()=>{var i=K6(n.html(n)),s=i.querySelector("."+n.closeClass);s&&s.addEventListener("click",r=>{$6(r,!0),t.close()}),t.dropdown.insertBefore(i,t.dropdown.firstChild)})}const X6=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},W6=(e,...t)=>{var n=Z6(t);e=J6(e),e.map(i=>{n.map(s=>{i.classList.remove(s)})})},Z6=e=>{var t=[];return X6(e,n=>{typeof n=="string"&&(n=n.trim().split(/[\t\n\f\r\s]/)),Array.isArray(n)&&(t=t.concat(n))}),t.filter(Boolean)},J6=e=>(Array.isArray(e)||(e=[e]),e),t3=(e,t)=>{if(!e)return-1;t=t||e.nodeName;for(var n=0;e=e.previousElementSibling;)e.matches(t)&&n++;return n};function e3(){var e=this;e.hook("instead","setCaret",t=>{e.settings.mode==="single"||!e.control.contains(e.control_input)?t=e.items.length:(t=Math.max(0,Math.min(e.items.length,t)),t!=e.caretPos&&!e.isPending&&e.controlChildren().forEach((n,i)=>{i<t?e.control_input.insertAdjacentElement("beforebegin",n):e.control.appendChild(n)})),e.caretPos=t}),e.hook("instead","moveCaret",t=>{if(!e.isFocused)return;const n=e.getLastActive(t);if(n){const i=t3(n);e.setCaret(t>0?i+1:i),e.setActiveItem(),W6(n,"last-active")}else e.setCaret(e.caretPos+t)})}const n3=27,i3=9,s3=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},r3=(e,t,n,i)=>{e.addEventListener(t,n,i)},a3=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},p1=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(o3(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},o3=e=>typeof e=="string"&&e.indexOf("<")>-1,l3=(e,...t)=>{var n=u3(t);e=c3(e),e.map(i=>{n.map(s=>{i.classList.add(s)})})},u3=e=>{var t=[];return a3(e,n=>{typeof n=="string"&&(n=n.trim().split(/[\t\n\f\r\s]/)),Array.isArray(n)&&(t=t.concat(n))}),t.filter(Boolean)},c3=e=>(Array.isArray(e)||(e=[e]),e);function h3(){const e=this;e.settings.shouldOpen=!0,e.hook("before","setup",()=>{e.focus_node=e.control,l3(e.control_input,"dropdown-input");const t=p1('<div class="dropdown-input-wrap">');t.append(e.control_input),e.dropdown.insertBefore(t,e.dropdown.firstChild);const n=p1('<input class="items-placeholder" tabindex="-1" />');n.placeholder=e.settings.placeholder||"",e.control.append(n)}),e.on("initialize",()=>{e.control_input.addEventListener("keydown",n=>{switch(n.keyCode){case n3:e.isOpen&&(s3(n,!0),e.close()),e.clearActiveItems();return;case i3:e.focus_node.tabIndex=-1;break}return e.onKeyDown.call(e,n)}),e.on("blur",()=>{e.focus_node.tabIndex=e.isDisabled?-1:e.tabIndex}),e.on("dropdown_open",()=>{e.control_input.focus()});const t=e.onBlur;e.hook("instead","onBlur",n=>{if(!(n&&n.relatedTarget==e.control_input))return t.call(e)}),r3(e.control_input,"blur",()=>e.onBlur()),e.hook("before","close",()=>{e.isOpen&&e.focus_node.focus({preventScroll:!0})})})}const Ru=(e,t,n,i)=>{e.addEventListener(t,n,i)};function d3(){var e=this;e.on("initialize",()=>{var t=document.createElement("span"),n=e.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",e.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const r of i)t.style[r]=n.style[r];var s=()=>{t.textContent=n.value,n.style.width=t.clientWidth+"px"};s(),e.on("update item_add item_remove",s),Ru(n,"input",s),Ru(n,"keyup",s),Ru(n,"blur",s),Ru(n,"update",s)})}function f3(){var e=this,t=e.deleteSelection;this.hook("instead","deleteSelection",n=>e.activeItems.length?t.call(e,n):!1)}function p3(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const m1=37,m3=39,g3=(e,t,n)=>{for(;e&&e.matches;){if(e.matches(t))return e;e=e.parentNode}},_3=(e,t)=>{if(!e)return-1;t=t||e.nodeName;for(var n=0;e=e.previousElementSibling;)e.matches(t)&&n++;return n};function y3(){var e=this,t=e.onKeyDown;e.hook("instead","onKeyDown",n=>{var i,s,r,a;if(!e.isOpen||!(n.keyCode===m1||n.keyCode===m3))return t.call(e,n);e.ignoreHover=!0,a=g3(e.activeOption,"[data-group]"),i=_3(e.activeOption,"[data-selectable]"),a&&(n.keyCode===m1?a=a.previousSibling:a=a.nextSibling,a&&(r=a.querySelectorAll("[data-selectable]"),s=r[Math.min(r.length-1,i)],s&&e.setActiveOption(s)))})}const v3=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),g1=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},_1=(e,t,n,i)=>{e.addEventListener(t,n,i)},y1=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(E3(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},E3=e=>typeof e=="string"&&e.indexOf("<")>-1;function T3(e){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},e);var n=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+v3(t.title)+'">'+t.label+"</a>";n.hook("after","setupTemplates",()=>{var s=n.settings.render.item;n.settings.render.item=(r,a)=>{var o=y1(s.call(n,r,a)),u=y1(i);return o.appendChild(u),_1(u,"mousedown",c=>{g1(c,!0)}),_1(u,"click",c=>{n.isLocked||(g1(c,!0),!n.isLocked&&n.shouldDelete([o],c)&&(n.removeItem(o),n.refreshOptions(!1),n.inputState()))}),o}})}}function b3(e){const t=this,n=Object.assign({text:i=>i[t.settings.labelField]},e);t.on("item_remove",function(i){if(t.isFocused&&t.control_input.value.trim()===""){var s=t.options[i];s&&t.setTextboxValue(n.text.call(t,s))}})}const A3=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},S3=(e,...t)=>{var n=w3(t);e=R3(e),e.map(i=>{n.map(s=>{i.classList.add(s)})})},w3=e=>{var t=[];return A3(e,n=>{typeof n=="string"&&(n=n.trim().split(/[\t\n\f\r\s]/)),Array.isArray(n)&&(t=t.concat(n))}),t.filter(Boolean)},R3=e=>(Array.isArray(e)||(e=[e]),e);function I3(){const e=this,t=e.canLoad,n=e.clearActiveOption,i=e.loadCallback;var s={},r,a=!1,o,u=[];if(e.settings.shouldLoadMore||(e.settings.shouldLoadMore=()=>{if(r.clientHeight/(r.scrollHeight-r.scrollTop)>.9)return!0;if(e.activeOption){var p=e.selectable(),v=Array.from(p).indexOf(e.activeOption);if(v>=p.length-2)return!0}return!1}),!e.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";e.settings.sortField=[{field:"$order"},{field:"$score"}];const c=m=>typeof e.settings.maxOptions=="number"&&r.children.length>=e.settings.maxOptions?!1:!!(m in s&&s[m]),d=(m,p)=>e.items.indexOf(p)>=0||u.indexOf(p)>=0;e.setNextUrl=(m,p)=>{s[m]=p},e.getUrl=m=>{if(m in s){const p=s[m];return s[m]=!1,p}return e.clearPagination(),e.settings.firstUrl.call(e,m)},e.clearPagination=()=>{s={}},e.hook("instead","clearActiveOption",()=>{if(!a)return n.call(e)}),e.hook("instead","canLoad",m=>m in s?c(m):t.call(e,m)),e.hook("instead","loadCallback",(m,p)=>{if(!a)e.clearOptions(d);else if(o){const v=m[0];v!==void 0&&(o.dataset.value=v[e.settings.valueField])}i.call(e,m,p),a=!1}),e.hook("after","refreshOptions",()=>{const m=e.lastValue;var p;c(m)?(p=e.render("loading_more",{query:m}),p&&(p.setAttribute("data-selectable",""),o=p)):m in s&&!r.querySelector(".no-results")&&(p=e.render("no_more_results",{query:m})),p&&(S3(p,e.settings.optionClass),r.append(p))}),e.on("initialize",()=>{u=Object.keys(e.options),r=e.dropdown_content,e.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},e.settings.render),r.addEventListener("scroll",()=>{e.settings.shouldLoadMore.call(e)&&c(e.lastValue)&&(a||(a=!0,e.load.call(e,e.lastValue)))})})}xe.define("change_listener",C6);xe.define("checkbox_options",k6);xe.define("clear_button",V6);xe.define("drag_drop",G6);xe.define("dropdown_header",Y6);xe.define("caret_position",e3);xe.define("dropdown_input",h3);xe.define("input_autogrow",d3);xe.define("no_backspace_delete",f3);xe.define("no_active_items",p3);xe.define("optgroup_columns",y3);xe.define("remove_button",T3);xe.define("restore_on_backspace",b3);xe.define("virtual_scroll",I3);function Xe({options:e,value:t,onChange:n,placeholder:i,allowCreate:s=!1,multiple:r=!1}){const a=q.useRef(null),o=q.useRef(null);return q.useEffect(()=>{const u=a.current;if(u)return o.current=new xe(u,{options:e,items:Array.isArray(t)?t:[t],placeholder:i,onChange:n,create:s}),()=>{o.current&&(o.current.destroy(),o.current=null)}},[]),q.useEffect(()=>{o.current&&(o.current.clearOptions(),o.current.addOptions(e),o.current.setValue(t,!0))},[e,t]),g.jsx("select",{ref:a,placeholder:i,multiple:r})}function C3({appData:e,openModal:t,userInfo:n}){const{jabatan:i=[],opds:s=[]}=e.options,[r,a]=q.useState(n.peran==="super_admin"?"":n.opdId),o=q.useMemo(()=>r?i.filter(c=>c.opdId===r):[],[r,i]),u=q.useMemo(()=>s.map(c=>({value:c.id,text:c.nama})),[s]);return g.jsxs("div",{children:[g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[g.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Manajemen Pengguna"}),g.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[n.peran==="super_admin"&&g.jsx("div",{className:"w-full md:w-64",children:g.jsx(Xe,{options:u,value:r,onChange:a,placeholder:"Pilih Unit Kerja..."})}),g.jsx("button",{onClick:()=>t("pengguna",{opdId:r}),className:"elegant-btn p-2.5",disabled:!r,children:g.jsx(uV,{className:"w-5 h-5"})})]})]}),g.jsx("div",{className:"bg-bg-surface rounded-lg border border-border-color overflow-x-auto",children:g.jsxs("table",{className:"w-full text-left",children:[g.jsx("thead",{className:"bg-bg-muted/30",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-4 text-sm font-semibold text-text-secondary",children:"Nama"}),g.jsx("th",{className:"p-4 text-sm font-semibold text-text-secondary hidden md:table-cell",children:"Jabatan"}),g.jsx("th",{className:"p-4 text-sm font-semibold text-text-secondary",children:"Peran"}),g.jsx("th",{className:"p-4 text-sm font-semibold text-text-secondary",children:"Aksi"})]})}),g.jsx("tbody",{children:o.length>0?o.map(c=>g.jsxs("tr",{className:"border-t border-border-color",children:[g.jsxs("td",{className:"p-4 align-top",children:[g.jsx("p",{className:"font-semibold text-text-primary",children:c.nama}),g.jsx("p",{className:"text-text-secondary text-xs",children:c.email})]}),g.jsx("td",{className:"p-4 text-text-secondary hidden md:table-cell align-top",children:c.namaJabatan}),g.jsx("td",{className:"p-4 align-top",children:g.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-accent-color/20 text-accent-color capitalize",children:(c.peran||"pengguna").replace(/_/g," ")})}),g.jsx("td",{className:"p-4 align-top",children:g.jsx("button",{onClick:()=>t("pengguna",c),className:"text-blue-accent hover:opacity-80 p-1",children:g.jsx(dw,{className:"w-4 h-4"})})})]},c.id)):g.jsx("tr",{children:g.jsx("td",{colSpan:"4",className:"text-center p-8 text-text-secondary",children:r?"Tidak ada pengguna.":"Pilih Unit Kerja."})})})]})})]})}function x3({data:e,onClose:t,allOptions:n,userInfo:i}){const[s,r]=q.useState({nomorSurat:"",tanggalSurat:"",pengirim:"",perihal:"",sifatSurat:"Biasa",jenisSurat:"",waktuPelaksanaan:"",tempatPelaksanaan:"",...e}),[a,o]=q.useState(null),[u,c]=q.useState(!1),d=cr();q.useEffect(()=>{var T,_;if((T=e==null?void 0:e.tanggalSurat)!=null&&T.toDate&&r(A=>({...A,tanggalSurat:e.tanggalSurat.toDate().toISOString().split("T")[0]})),(_=e==null?void 0:e.waktuPelaksanaan)!=null&&_.toDate){const A=e.waktuPelaksanaan.toDate();A.setMinutes(A.getMinutes()-A.getTimezoneOffset()),r(x=>({...x,waktuPelaksanaan:A.toISOString().slice(0,16)}))}},[e]);const m=T=>r(_=>({..._,[T.target.name]:T.target.value})),p=(T,_)=>r(A=>({...A,[T]:_})),v=async T=>{T.preventDefault(),c(!0);try{const _=i.opdId;if(!_)throw new Error("ID OPD pengguna tidak ditemukan.");let A={url:(e==null?void 0:e.linkDokumen)||null,path:(e==null?void 0:e.storagePath)||null};if(a){const V=`${_}/surat-masuk/${Date.now()}-${a.name}`,b=aw(ow,V);await sw(b,a),A={url:await rw(b),path:V}}const x={...s,tanggalSurat:new Date(s.tanggalSurat),waktuPelaksanaan:s.jenisSurat==="Undangan"&&s.waktuPelaksanaan?new Date(s.waktuPelaksanaan):null,linkDokumen:A.url,storagePath:A.path,updatedAt:_i()},M=js(ce,"opds",_,"suratMasuk");if(!e)x.createdAt=_i(),x.statusDisposisi="Belum Disposisi",x.diinputOleh={id:i.id,nama:i.nama,jabatan:i.namaJabatan},await Mg(M,x);else{const V=Tn(ce,"opds",_,"suratMasuk",e.id);await Pl(V,x)}d.show("Data berhasil disimpan!","success"),t()}catch(_){console.error(_),d.show("Gagal menyimpan data: "+_.message,"error")}finally{c(!1)}},{tujuan:R=[],jenisSurat:O=[]}=n,D=[{nama:"Biasa"},{nama:"Rahasia"},{nama:"Segera"},{nama:"Penting"}];return g.jsx("div",{className:"modal-overlay active",onClick:t,children:g.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),children:[u&&g.jsx(tr,{text:"Menyimpan..."}),g.jsx("button",{onClick:t,className:"modal-close-button",children:g.jsx(Ra,{})}),g.jsxs("h2",{className:"text-xl font-bold mb-6 text-text-primary",children:[e?"Edit":"Tambah"," Surat Masuk"]}),g.jsxs("form",{onSubmit:v,className:"space-y-4",children:[g.jsx("input",{type:"text",name:"nomorSurat",placeholder:"Nomor Surat",className:"form-input-elegant",value:s.nomorSurat,onChange:m}),g.jsx("input",{type:"date",name:"tanggalSurat",className:"form-input-elegant",value:s.tanggalSurat,onChange:m,required:!0}),g.jsx(Xe,{options:R.map(T=>({value:T.nama,text:T.nama})),value:s.pengirim,onChange:T=>p("pengirim",T),placeholder:"Cari pengirim...",allowCreate:!0}),g.jsx("textarea",{name:"perihal",placeholder:"Perihal",rows:"3",className:"form-input-elegant",value:s.perihal,onChange:m,required:!0}),g.jsx(Xe,{options:D.map(T=>({value:T.nama,text:T.nama})),value:s.sifatSurat,onChange:T=>p("sifatSurat",T),placeholder:"Pilih sifat..."}),g.jsx(Xe,{options:O.map(T=>({value:T.nama,text:T.nama})),value:s.jenisSurat,onChange:T=>p("jenisSurat",T),placeholder:"Pilih jenis...",allowCreate:!0}),s.jenisSurat==="Undangan"&&g.jsxs("div",{className:"space-y-4 border-t border-border-color pt-4 mt-4",children:[g.jsx("input",{type:"datetime-local",name:"waktuPelaksanaan",className:"form-input-elegant",value:s.waktuPelaksanaan,onChange:m}),g.jsx("input",{type:"text",name:"tempatPelaksanaan",placeholder:"Lokasi acara",className:"form-input-elegant",value:s.tempatPelaksanaan,onChange:m})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"File Surat (Kosongkan jika tidak berubah)"}),g.jsx("input",{type:"file",onChange:T=>o(T.target.files[0]),className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-accent-color/20 file:text-accent-color hover:file:bg-accent-color/30 transition cursor-pointer"})]}),g.jsx("button",{type:"submit",className:"w-full elegant-btn mt-4",disabled:u,children:"Simpan"})]})]})})}function O3({data:e,onClose:t,allOptions:n,userInfo:i}){const[s,r]=q.useState({klasifikasiId:"",nomorUrut:"",tanggalSurat:"",perihal:"",tujuanId:"",sifatSurat:"Biasa",jenisSurat:"",...e}),[a,o]=q.useState("-- Lengkapi Form --"),[u,c]=q.useState(null),[d,m]=q.useState(!1),p=cr(),v=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"];q.useEffect(()=>{const{klasifikasiId:M,nomorUrut:V,tanggalSurat:b}=s,y=(n.klasifikasi||[]).find(S=>S.id===M);if(y&&V&&b){const S=new Date(b),w=y.kode,I=v[S.getMonth()],N=S.getFullYear();o(`${w}/${V}/${I}/${N}`)}else o("-- Lengkapi Form --")},[s.klasifikasiId,s.nomorUrut,s.tanggalSurat,n.klasifikasi]);const R=M=>r(V=>({...V,[M.target.name]:M.target.value})),O=(M,V)=>r(b=>({...b,[M]:V})),D=async M=>{if(M.preventDefault(),a.includes("--")){p.show("Nomor surat belum lengkap.","warning");return}m(!0);try{const V=i.opdId;if(!V)throw new Error("ID OPD pengguna tidak ditemukan.");let b={url:(e==null?void 0:e.linkDokumen)||null,path:(e==null?void 0:e.storagePath)||null};if(u){const w=`${V}/surat-keluar/${Date.now()}-${u.name}`,I=aw(ow,w);await sw(I,u),b={url:await rw(I),path:w}}const y={...s,nomorSurat:a,tanggalSurat:new Date(s.tanggalSurat),linkDokumen:b.url,storagePath:b.path,updatedAt:_i()},S=js(ce,"opds",V,"suratKeluar");if(!e)y.createdAt=_i(),await Mg(S,y);else{const w=Tn(ce,"opds",V,"suratKeluar",e.id);await Pl(w,y)}p.show("Surat keluar berhasil disimpan!","success"),t()}catch(V){console.error(V),p.show("Gagal menyimpan surat keluar: "+V.message,"error")}finally{m(!1)}},{klasifikasi:T=[],tujuan:_=[],jenisSurat:A=[]}=n,x=[{nama:"Biasa"},{nama:"Rahasia"},{nama:"Segera"},{nama:"Penting"}];return g.jsx("div",{className:"modal-overlay active",onClick:t,children:g.jsxs("div",{className:"modal-content",onClick:M=>M.stopPropagation(),children:[d&&g.jsx(tr,{text:"Menyimpan..."}),g.jsx("button",{onClick:t,className:"modal-close-button",children:g.jsx(Ra,{})}),g.jsxs("h2",{className:"text-xl font-bold mb-6 text-text-primary",children:[e?"Edit":"Tambah"," Surat Keluar"]}),g.jsxs("form",{onSubmit:D,className:"space-y-4",children:[g.jsx(Xe,{options:T.map(M=>({value:M.id,text:`${M.kode} - ${M.keterangan}`})),value:s.klasifikasiId,onChange:M=>O("klasifikasiId",M),placeholder:"Cari klasifikasi..."}),g.jsx("input",{type:"text",name:"nomorUrut",placeholder:"e.g., 098",className:"form-input-elegant",value:s.nomorUrut,onChange:R,required:!0}),g.jsx("input",{type:"date",name:"tanggalSurat",className:"form-input-elegant",value:s.tanggalSurat,onChange:R,required:!0}),g.jsx("div",{className:"p-3 bg-bg-base rounded-md text-center font-mono text-text-secondary border border-border-color",children:a}),g.jsx("textarea",{name:"perihal",placeholder:"Perihal",rows:"3",className:"form-input-elegant",value:s.perihal,onChange:R,required:!0}),g.jsx(Xe,{options:_.map(M=>({value:M.nama,text:M.nama})),value:s.tujuanId,onChange:M=>O("tujuanId",M),placeholder:"Cari tujuan...",allowCreate:!0}),g.jsx(Xe,{options:x.map(M=>({value:M.nama,text:M.nama})),value:s.sifatSurat,onChange:M=>O("sifatSurat",M),placeholder:"Pilih sifat..."}),g.jsx(Xe,{options:A.map(M=>({value:M.nama,text:M.nama})),value:s.jenisSurat,onChange:M=>O("jenisSurat",M),placeholder:"Pilih jenis...",allowCreate:!0}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"File Surat (Kosongkan jika tidak berubah)"}),g.jsx("input",{type:"file",onChange:M=>c(M.target.files[0]),className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-accent-color/20 file:text-accent-color hover:file:bg-accent-color/30 transition cursor-pointer"})]}),g.jsx("button",{type:"submit",className:"w-full elegant-btn mt-4",disabled:d,children:"Simpan"})]})]})})}function N3({data:e,onClose:t,allData:n,currentUser:i}){const[s,r]=q.useState({suratMasukId:"",tujuanJabatanId:"",isiDisposisi:"",catatan:""}),[a,o]=q.useState(!1),u=cr(),{suratMasuk:c,options:d}=n,{jabatan:m}=d,p=q.useMemo(()=>(c||[]).filter(T=>T.statusDisposisi!=="Sudah Disposisi").map(T=>({value:T.id,text:`${T.jenisSurat||"Surat"} dari ${T.pengirim} - ${T.perihal}`})),[c]),v=q.useMemo(()=>(m||[]).filter(T=>T.id!==i.id&&T.opdId===i.opdId),[m,i]),R=(T,_)=>r(A=>({...A,[T]:_})),O=T=>r(_=>({..._,[T.target.name]:T.target.value})),D=async T=>{if(T.preventDefault(),!s.suratMasukId||!s.tujuanJabatanId||!s.isiDisposisi)return u.show("Surat, Tujuan, dan Instruksi wajib diisi.","warning");o(!0);try{const _=i.opdId;if(!_)throw new Error("ID OPD pengguna tidak ditemukan.");const A=sM(ce),x=Tn(js(ce,"opds",_,"disposisi")),M=Tn(ce,"opds",_,"suratMasuk",s.suratMasukId),V={...s,pemberiDisposisiJabatanId:i.id,statusTindakLanjut:"Baru",logTindakLanjut:[],createdAt:_i()};A.set(x,V),A.update(M,{statusDisposisi:"Sudah Disposisi"}),await A.commit(),u.show("Disposisi berhasil dikirim!","success"),t()}catch(_){u.show("Gagal mengirim disposisi: "+_.message,"error")}finally{o(!1)}};return g.jsx("div",{className:"modal-overlay active",onClick:t,children:g.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),children:[a&&g.jsx(tr,{text:"Mengirim..."}),g.jsx("button",{onClick:t,className:"modal-close-button",children:g.jsx(Ra,{})}),g.jsx("h2",{className:"text-xl font-bold mb-6 text-text-primary",children:"Buat Disposisi Baru"}),g.jsxs("form",{onSubmit:D,className:"space-y-4",children:[g.jsx(Xe,{options:p,value:s.suratMasukId,onChange:T=>R("suratMasukId",T),placeholder:"Pilih surat yang akan didisposisi..."}),g.jsx(Xe,{options:v.map(T=>({value:T.id,text:`${T.namaJabatan} - ${T.nama}`})),value:s.tujuanJabatanId,onChange:T=>R("tujuanJabatanId",T),placeholder:"Disposisikan ke..."}),g.jsx("textarea",{name:"isiDisposisi",placeholder:"Isi Instruksi",rows:"3",className:"form-input-elegant",value:s.isiDisposisi,onChange:O,required:!0}),g.jsx("textarea",{name:"catatan",placeholder:"Catatan tambahan (opsional)",rows:"2",className:"form-input-elegant",value:s.catatan,onChange:O}),g.jsx("button",{type:"submit",className:"w-full elegant-btn mt-4",disabled:a,children:"Kirim Disposisi"})]})]})})}function D3({data:e,onClose:t}){const[n,i]=q.useState({nama:"",jenis:"OPD",...e}),[s,r]=q.useState(!1),a=cr(),o=async u=>{if(u.preventDefault(),!n.nama)return a.show("Nama Unit Kerja wajib diisi.","warning");r(!0);try{const c={...n,updatedAt:_i()};e?await Pl(Tn(ce,"opds",e.id),c):(c.createdAt=_i(),await Mg(js(ce,"opds"),c)),a.show("Data Unit Kerja berhasil disimpan.","success"),t()}catch(c){a.show("Gagal menyimpan data: "+c.message,"error")}finally{r(!1)}};return g.jsx("div",{className:"modal-overlay active",onClick:t,children:g.jsxs("div",{className:"modal-content",onClick:u=>u.stopPropagation(),children:[s&&g.jsx(tr,{text:"Menyimpan..."}),g.jsx("button",{onClick:t,className:"modal-close-button",children:g.jsx(Ra,{})}),g.jsxs("h2",{className:"text-xl font-bold mb-6 text-text-primary",children:[e?"Edit":"Tambah"," Unit Kerja"]}),g.jsxs("form",{onSubmit:o,className:"space-y-4",children:[g.jsx("input",{type:"text",placeholder:"Nama Unit Kerja",className:"form-input-elegant",value:n.nama,onChange:u=>i(c=>({...c,nama:u.target.value})),required:!0}),g.jsxs("select",{value:n.jenis,onChange:u=>i(c=>({...c,jenis:u.target.value})),className:"form-input-elegant",children:[g.jsx("option",{value:"OPD",children:"OPD"}),g.jsx("option",{value:"Kecamatan",children:"Kecamatan"}),g.jsx("option",{value:"Kelurahan",children:"Kelurahan"})]}),g.jsx("button",{type:"submit",className:"w-full elegant-btn mt-4",disabled:s,children:"Simpan"})]})]})})}function k3({data:e,onClose:t,allOptions:n,currentUser:i}){const s=!!(e!=null&&e.id),[r,a]=q.useState({email:"",password:"",nama:"",namaJabatan:"",peran:"staf",opdId:(e==null?void 0:e.opdId)||"",atasanId:"",nomorTelepon:"",...e}),[o,u]=q.useState(!1),c=cr(),{jabatan:d=[],opds:m=[]}=n,p=q.useMemo(()=>r.opdId?d.filter(A=>A.opdId===r.opdId&&A.id!==r.id).map(A=>({value:A.id,text:`${A.nama} (${A.namaJabatan})`})):[],[r.opdId,d,r.id]),v=q.useMemo(()=>m.map(A=>({value:A.id,text:A.nama})),[m]),R=A=>a(x=>({...x,[A.target.name]:A.target.value})),O=(A,x)=>a(M=>({...M,[A]:x})),D=async A=>{if(A.preventDefault(),!r.email||!s&&!r.password||!r.nama||!r.namaJabatan)return c.show("Email, Nama, Jabatan, dan Password (baru) wajib diisi.","warning");if(r.peran!=="super_admin"&&!r.opdId)return c.show("Unit Kerja (OPD) wajib dipilih.","warning");u(!0);try{if(s){const x={nama:r.nama,namaJabatan:r.namaJabatan,peran:r.peran,opdId:r.peran==="super_admin"?null:r.opdId,atasanId:r.peran==="super_admin"?null:r.atasanId||null,nomorTelepon:r.nomorTelepon||null,updatedAt:_i()};await Pl(Tn(ce,"jabatan",e.id),x),c.show("Data pengguna berhasil diperbarui.","success")}else{const M=(await kO(lo,r.email,r.password)).user,V={nama:r.nama,namaJabatan:r.namaJabatan,peran:r.peran,email:r.email,opdId:r.peran==="super_admin"?null:r.opdId,atasanId:r.peran==="super_admin"?null:r.atasanId||null,nomorTelepon:r.nomorTelepon||null,createdAt:_i()};await nM(Tn(ce,"jabatan",M.uid),V),c.show("Pengguna baru berhasil ditambahkan!","success")}t()}catch(x){let M="Terjadi kesalahan: "+x.message;x.code==="auth/email-already-in-use"&&(M="Email ini sudah terdaftar."),x.code==="auth/weak-password"&&(M="Password terlalu lemah (min. 6 karakter)."),c.show(M,"error")}finally{u(!1)}},T=[{value:"super_admin",text:"Super Admin"},{value:"admin",text:"Admin"},{value:"pimpinan",text:"Pimpinan"},{value:"tu_pimpinan",text:"TU Pimpinan"},{value:"tu_opd",text:"TU OPD"},{value:"pejabat_struktural",text:"Pejabat Struktural"},{value:"staf",text:"Staf"}],_=i.peran==="super_admin"?T:T.filter(A=>A.value!=="super_admin");return g.jsx("div",{className:"modal-overlay active",onClick:t,children:g.jsxs("div",{className:"modal-content",onClick:A=>A.stopPropagation(),children:[o&&g.jsx(tr,{text:s?"Memperbarui...":"Menambahkan..."}),g.jsx("button",{onClick:t,className:"modal-close-button",children:g.jsx(Ra,{})}),g.jsxs("h2",{className:"text-xl font-bold mb-6 text-text-primary",children:[s?"Edit":"Tambah"," Pengguna"]}),g.jsxs("form",{onSubmit:D,className:"space-y-4",children:[g.jsx("input",{type:"text",name:"nama",placeholder:"Nama Lengkap",className:"form-input-elegant",value:r.nama,onChange:R,required:!0}),g.jsx("input",{type:"text",name:"namaJabatan",placeholder:"Nama Jabatan",className:"form-input-elegant",value:r.namaJabatan,onChange:R,required:!0}),g.jsx("input",{type:"email",name:"email",placeholder:"Alamat Email",className:"form-input-elegant",value:r.email,onChange:R,required:!0,disabled:s}),!s&&g.jsx("input",{type:"password",name:"password",placeholder:"Password (min. 6 karakter)",className:"form-input-elegant",value:r.password,onChange:R,required:!0}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Peran"}),g.jsx(Xe,{options:_,value:r.peran,onChange:A=>O("peran",A)})]}),r.peran!=="super_admin"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Unit Kerja (OPD)"}),g.jsx(Xe,{options:v,value:r.opdId,onChange:A=>O("opdId",A),placeholder:"Pilih OPD..."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Atasan Langsung"}),g.jsx(Xe,{options:p,value:r.atasanId,onChange:A=>O("atasanId",A),placeholder:"Pilih atasan... (opsional)"})]})]}),g.jsx("button",{type:"submit",className:"w-full elegant-btn mt-4",disabled:o,children:"Simpan"})]})]})})}function M3(){const[e,t]=q.useState({user:null,userInfo:null,loading:!0}),[n,i]=q.useState({suratMasuk:[],suratKeluar:[],disposisi:[],notifications:[],options:{jabatan:[],klasifikasi:[],tujuan:[],jenisSurat:[],opds:[]}}),[s,r]=q.useState({activeTab:"dashboard",modal:{isOpen:!1,type:null,data:null},isNotifPanelOpen:!1}),[a,o]=q.useState(()=>localStorage.getItem("arkadia-theme")||"dark"),[u,c]=q.useState(null),[d,m]=q.useState({required:!1,opdList:[]}),[p,v]=q.useState(!0),R=cr();q.useEffect(()=>{document.body.className="",document.body.classList.add(a==="light"?"light-theme":"dark-theme"),localStorage.setItem("arkadia-theme",a)},[a]),q.useEffect(()=>LO(lo,async V=>{if(V){const b=await G0(Tn(ce,"jabatan",V.uid));if(b.exists()){const y={id:b.id,...b.data()};if(t({user:V,userInfo:y,loading:!1}),y.peran==="super_admin"){const S=await eM(js(ce,"opds"));m({required:!0,opdList:S.docs.map(w=>({id:w.id,...w.data()}))})}else if(y.opdId){const S=await G0(Tn(ce,"opds",y.opdId));c(S.exists()?{id:S.id,...S.data()}:null)}}else R.show("Profil pengguna tidak ditemukan.","error"),await kv(lo)}else t({user:null,userInfo:null,loading:!1}),c(null)}),[R]),q.useEffect(()=>{if(!e.userInfo)return;v(!0);const M=e.userInfo.peran==="super_admin"?u==null?void 0:u.id:e.userInfo.opdId,V=Object.entries({jabatan:"jabatan",klasifikasi:"klasifikasi",tujuan:"tujuan",jenisSurat:"jenisSurat",opds:"opds"}).map(([b,y])=>$0(F0(js(ce,y)),S=>{i(w=>({...w,options:{...w.options,[b]:S.docs.map(I=>({id:I.id,...I.data()}))}}))}));if(M){const y=["suratMasuk","suratKeluar","disposisi"].map(S=>$0(F0(js(ce,`opds/${M}/${S}`)),w=>{i(I=>({...I,[S]:w.docs.map(N=>({id:N.id,...N.data()}))}))}));V.push(...y),setTimeout(()=>v(!1),1500)}else v(!1);return()=>V.forEach(b=>b())},[e.userInfo,u]);const O=async(M,V)=>{try{await MO(lo,M,V)}catch{R.show("Email atau password salah.","error")}},D=async()=>{await kv(lo),r({...s,activeTab:"dashboard"}),R.show("Anda telah berhasil keluar.","info")},T=(M,V=null)=>r(b=>({...b,modal:{isOpen:!0,type:M,data:V}})),_=()=>r(M=>({...M,modal:{isOpen:!1,type:null,data:null}})),A=()=>{if(p&&e.userInfo)return g.jsx("div",{className:"flex items-center justify-center h-full pt-20",children:g.jsx(tr,{text:"Mengambil data..."})});const{activeTab:M}=s,{userInfo:V}=e,b={appData:n,userInfo:V,openModal:T,onEdit:y=>T(M,y)};switch(M){case"dashboard":return g.jsx(t1,{...b});case"surat-masuk":return g.jsx(NV,{data:n.suratMasuk,...b});case"surat-keluar":return g.jsx(PV,{data:n.suratKeluar,...b});case"disposisi":return g.jsx(zV,{data:n.disposisi,allData:n,...b});case"disposisi-saya":return g.jsx(BV,{disposisiSaya:n.disposisi.filter(y=>y.tujuanJabatanId===V.id),allData:n,...b});case"manajemen-opd":return g.jsx(FV,{...b});case"manajemen-pengguna":return g.jsx(C3,{...b});default:return g.jsx(t1,{...b})}},x=()=>{const{modal:M}=s;if(!M.isOpen)return null;const V={data:M.data,onClose:_,allOptions:n.options,userInfo:e.userInfo,currentUser:e.userInfo};switch(M.type){case"suratMasuk":return g.jsx(x3,{...V});case"suratKeluar":return g.jsx(O3,{...V});case"disposisi":return g.jsx(N3,{...V});case"opd":return g.jsx(D3,{...V});case"pengguna":return g.jsx(k3,{...V});default:return null}};return e.loading?g.jsx(tr,{text:"Inisialisasi Aplikasi..."}):e.user?d.required&&!u?g.jsx(RV,{opdList:d.opdList,onSelect:c,onSkip:()=>c({id:"pusat",nama:"Pusat"})}):g.jsxs("div",{id:"app-wrapper",className:"flex h-screen bg-bg-base overflow-hidden",children:[g.jsx(AV,{userInfo:e.userInfo,activeTab:s.activeTab,onTabChange:M=>r(V=>({...V,activeTab:M})),onLogout:D,theme:a,toggleTheme:()=>o(M=>M==="dark"?"light":"dark"),sessionOpdName:u==null?void 0:u.nama}),g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[g.jsx(SV,{pageTitle:s.activeTab,notifications:n.notifications,onNotifClick:()=>r(M=>({...M,isNotifPanelOpen:!M.isNotifPanelOpen})),onMenuClick:()=>{}}),g.jsx("main",{id:"main-content",className:"flex-1 overflow-y-auto",children:g.jsx("div",{className:"content-wrapper p-4 md:p-6",children:A()})})]}),x()]}):g.jsx(wV,{onLogin:O})}Z2.createRoot(document.getElementById("root")).render(g.jsx(yR.StrictMode,{children:g.jsx(UV,{children:g.jsx(M3,{})})}));
